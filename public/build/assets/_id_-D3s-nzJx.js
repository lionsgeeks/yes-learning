import{r as w,m as V,j as e,L as Q,$ as D}from"./app-C63RW_A8.js";import{A as z,D as G,a as H,b as K,c as $}from"./app-layout-C86-vYy4.js";import{c as X,B as m}from"./button-C9oGkuB1.js";import{C as q,a as U,b as P,d as R,e as k,c as Y}from"./card-D5-mwLWY.js";import{B as p}from"./badge-D73r7Sqn.js";import{D as Z,a as W,b as ee,c as se,d as te,e as ae}from"./dialog-BvJSafTo.js";import{I as h}from"./input-xWbc2EED.js";import{L as l}from"./label-BFMajRWC.js";import{T as ie}from"./textarea-DREkHze9.js";import{S as T,a as M,b as L,c as F,d as g}from"./select-BKmNIRiG.js";import{S as C}from"./switch-b7eD8oVt.js";import{T as O,a as I,b as j,c as A}from"./tabs-oE-yzVpY.js";import{C as E}from"./sidebar-DVSB-QeP.js";import{C as re}from"./chevron-left-Dkv64HcE.js";import{D as ne,C as le}from"./delete-workshop-dialog-Cn78ZH-u.js";import{i as ce}from"./isPast-CMtZTBm5.js";import{C as B}from"./calendar-Chc8KH6H.js";import{U as J}from"./users-_p6o4v2s.js";import{T as de}from"./triangle-alert-98MW-rwc.js";import{C as oe}from"./circle-check-big-D1xx-XsG.js";import{f as _}from"./format-ymR-pL-R.js";import{A as me}from"./arrow-left-zkU-0xLB.js";import{E as xe}from"./alert-dialog-DU3BoMIj.js";import{G as he}from"./globe-D1Iezt4k.js";import{P as pe}from"./plus-BR9vaOBG.js";import"./index-BnriUOpo.js";import"./index-C2UCfdsy.js";import"./index-DG3HcBNq.js";import"./book-open-CZEBvkvN.js";import"./index-BdQq_4o_.js";import"./chevron-down-jG5fkIAI.js";import"./check-T1rm7eTg.js";import"./TransText-DaOO7E6g.js";import"./loader-circle-CZB20JDQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],je=X("CircleCheck",ue);function fe({open:t,onOpenChange:n,chapters:u,workshop:y}){const[c,x]=w.useState(1),{data:a,setData:i,post:b,processing:f,errors:d}=V({name:{en:"",fr:"",ar:""},description:{en:"",fr:"",ar:""},workshop_id:y,prerequisite:{en:"",fr:"",ar:""},chapter_id:"",date:"",time:"",duration:"90",instructor:{en:"",fr:"",ar:""},meetLink:{en:"",fr:"",ar:""},allowQuestions:!0,requireRegistration:!0,sendNotifications:!0,notificationTime:"24h",published:!1}),N=()=>{x(s=>Math.min(s+1,3))},v=()=>{x(s=>Math.max(s-1,1))},r=()=>{b(route("sub-workshop.store"),{onSuccess:()=>{n(!1),x(1)}})},S=a.name&&a.description&&a.date&&a.time&&a.duration;return e.jsx(Z,{open:t,onOpenChange:s=>{n(s),s||x(1)},children:e.jsxs(W,{className:"max-w-3xl",children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Add Sub-Workshop"}),e.jsx(te,{children:c===1?"Enter basic information about the sub-workshop":c===2?"Configure instructor settings":"Set sub-workshop preferences and notification settings"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Step ",c," of 3"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:c===1?"Basic Info":c===2?"Instructor Settings":"Preferences"})]}),e.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-muted",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all",style:{width:`${c/3*100}%`}})})]}),c===1&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(O,{defaultValue:"en",children:[e.jsxs(I,{className:"grid w-full grid-cols-3",children:[e.jsx(j,{value:"en",children:"English"}),e.jsx(j,{value:"fr",children:"French"}),e.jsx(j,{value:"ar",children:"Arabic"})]}),["en","fr","ar"].map(s=>e.jsx(A,{value:s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:`name-${s}`,children:["Sub-Workshop Title (",s.toUpperCase(),")"]}),e.jsx(h,{id:`name-${s}`,placeholder:`name (${s.toUpperCase()})`,value:a.name[`${s}`],onChange:o=>i("name",{...a.name,[`${s}`]:o.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:`description-${s}`,children:["description (",s.toUpperCase(),")"]}),e.jsx(h,{id:`description-${s}`,placeholder:`description (${s.toUpperCase()})`,value:a.description[`${s}`],onChange:o=>i("description",{...a.description,[`${s}`]:o.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:`prerequisite-${s}`,children:["prerequisite (",s.toUpperCase(),")"]}),e.jsx(ie,{id:`prerequisite-${s}`,placeholder:`prerequisite (${s.toUpperCase()})`,value:a.prerequisite[`${s}`],onChange:o=>i("prerequisite",{...a.prerequisite,[`${s}`]:o.target.value})})]})]})},s))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"course",children:"Associated chapter"}),e.jsxs(T,{value:a.chapter_id,onValueChange:s=>i("chapter_id",s),children:[e.jsx(M,{id:"course",children:e.jsx(L,{placeholder:"Select a course"})}),e.jsx(F,{children:u.map(s=>e.jsx(g,{value:s.id,children:s.title.en},s.id))})]}),d.chapter_id&&e.jsx("p",{className:"text-sm text-red-500",children:d.chapter_id})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"date",children:"Date"}),e.jsx(h,{id:"date",type:"date",value:a.date,onChange:s=>i("date",s.target.value),error:d.date}),d.date&&e.jsx("p",{className:"text-sm text-red-500",children:d.date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"time",children:"Time"}),e.jsx(h,{id:"time",type:"time",value:a.time,onChange:s=>i("time",s.target.value),error:d.time}),d.time&&e.jsx("p",{className:"text-sm text-red-500",children:d.time})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"duration",children:"Duration (minutes)"}),e.jsx(h,{id:"duration",type:"number",placeholder:"90",value:a.duration,onChange:s=>i("duration",s.target.value),error:d.duration}),d.duration&&e.jsx("p",{className:"text-sm text-red-500",children:d.duration})]})]})]}),c===2&&e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs(O,{defaultValue:"en",children:[e.jsxs(I,{className:"grid w-full grid-cols-3",children:[e.jsx(j,{value:"en",children:"English"}),e.jsx(j,{value:"fr",children:"French"}),e.jsx(j,{value:"ar",children:"Arabic"})]}),["en","fr","ar"].map(s=>e.jsx(A,{value:s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:`instructor-${s}`,children:["Instructor (",s.toUpperCase(),")"]}),e.jsx(h,{id:`instructor-${s}`,placeholder:`Instructor (${s.toUpperCase()})`,value:a.instructor[`${s}`],onChange:o=>i("instructor",{...a.instructor,[`${s}`]:o.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:`meetLink-${s}`,children:["Google Meet Link (",s.toUpperCase(),")"]}),e.jsx(h,{id:`meetLink-${s}`,placeholder:"https://meet.google.com/...",value:a.meetLink[`${s}`],onChange:o=>i("meetLink",{...a.meetLink,[`${s}`]:o.target.value})})]})]})},s))]})}),c===3&&e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Allow Questions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable Q&A during the workshop"})]}),e.jsx(C,{checked:a.allowQuestions,onCheckedChange:s=>i("allowQuestions",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Require Registration"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Students must register before joining"})]}),e.jsx(C,{checked:a.requireRegistration,onCheckedChange:s=>i("requireRegistration",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Send Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify enrolled students about this workshop"})]}),e.jsx(C,{checked:a.sendNotifications,onCheckedChange:s=>i("sendNotifications",s)})]}),a.sendNotifications&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"notificationTime",children:"Notification Schedule"}),e.jsxs(T,{value:a.notificationTime,onValueChange:s=>i("notificationTime",s),children:[e.jsx(M,{id:"notificationTime",children:e.jsx(L,{})}),e.jsxs(F,{children:[e.jsx(g,{value:"24h",children:"24 hours before workshop"}),e.jsx(g,{value:"1h",children:"1 hour before workshop"}),e.jsx(g,{value:"both",children:"Both 24 hours and 1 hour before"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{children:"Publish Sub-Workshop"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this sub-workshop visible to students"})]}),e.jsx(C,{checked:a.published,onCheckedChange:s=>i("published",s)})]})]})}),e.jsx(ae,{children:c===1?e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(m,{onClick:N,disabled:!S,children:["Next",e.jsx(E,{className:"ml-2 h-4 w-4"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(m,{variant:"outline",onClick:v,children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Back"]}),c===2?e.jsxs(m,{onClick:N,children:["Next",e.jsx(E,{className:"ml-2 h-4 w-4"})]}):e.jsx(m,{onClick:r,disabled:f,children:f?"Creating...":"Create Sub-Workshop"})]})})]})})}function Ne({subWorkshop:t}){const n=[];t.date||n.push("date"),t.time||n.push("time"),JSON.parse(t.instructor).en||n.push("instructor"),t.meetLink||n.push("meet link");const u=t.date&&ce(new Date(`${t.date} ${t.time}`));return e.jsxs(q,{className:"overflow-hidden transition-all hover:shadow-md h-full flex flex-col",children:[e.jsx(U,{className:"pb-2",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx(P,{className:"text-lg",children:JSON.parse(t.name).en}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(p,{variant:"outline",className:"text-xs",children:t.subCourse}),e.jsx(p,{variant:"secondary",className:"text-xs uppercase",children:t.language})]})]})})}),e.jsx(R,{className:"pb-2 flex-grow",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[JSON.parse(t.description).en&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:JSON.parse(t.description).en}),t.date&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(B,{className:"mr-1 h-4 w-4"}),e.jsx("span",{children:_(new Date(t.date),"MMM d, yyyy")}),t.time&&e.jsxs("span",{className:"ml-1",children:["at ",t.time]}),u&&e.jsx(p,{variant:"outline",className:"ml-2 text-xs text-muted-foreground",children:"Passed"})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(J,{className:"mr-1 h-4 w-4"}),e.jsxs("span",{children:[t.users.length," Students"]})]}),JSON.parse(t.instructor).en&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Instructor:"}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:e.jsx("span",{children:JSON.parse(t.instructor).en})})]})]})}),n.length>0&&e.jsx(k,{className:"border-t bg-amber-50 px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 w-full",children:[e.jsx(de,{className:"h-4 w-4 flex-shrink-0"}),e.jsxs("span",{className:"text-xs",children:["Missing: ",n.join(", ")]})]})}),u&&n.length===0?e.jsx(k,{className:"border-t bg-muted px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground w-full",children:[e.jsx(je,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-xs",children:"Completed"})]})}):e.jsx(k,{className:"border-t bg-muted px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground w-full",children:[e.jsx(oe,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-xs",children:"Soon"})]})})]})}const ve=[{title:"Workshops",href:"/admin/workshop/detail"}],es=({workshop:t,subWorkshops:n,chapters:u,courses:y})=>{const[c,x]=w.useState(!1),[a,i]=w.useState(!1),[b,f]=w.useState(!1),d=new Date,N=n.filter(r=>new Date(`${r.date} ${r.time}`)>d).sort((r,S)=>new Date(r.date).getTime()-new Date(S.date).getTime()),v=N.length>0?N[0]:null;return e.jsxs(z,{breadcrumbs:ve,children:[e.jsx(Q,{title:"Workshop Detail"}),e.jsxs("div",{className:"container mx-auto p-3 lg:p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center",children:[e.jsx(m,{variant:"ghost",size:"icon",asChild:!0,className:"mr-2",children:e.jsx(D,{href:"/admin/workshops",children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h1",{className:"text-2xl font-bold",children:JSON.parse(t.name).en})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.course.name.en})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex gap-2 jus",children:e.jsxs(G,{children:[e.jsx(H,{asChild:!0,children:e.jsx(m,{variant:"outline",size:"icon",children:e.jsx(xe,{className:"h-4 w-4"})})}),e.jsxs(K,{align:"end",children:[e.jsx($,{onClick:r=>{r.preventDefault(),r.stopPropagation(),i(!0)},children:"Edit Workshop"}),e.jsx($,{className:"text-destructive",onClick:r=>{r.preventDefault(),r.stopPropagation(),x(!0)},children:"Delete Workshop"}),e.jsx(ne,{open:c,onOpenChange:x,workshopTitle:t.name,workshopId:t.id})]})]})})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(q,{className:"md:col-span-2",children:[e.jsxs(U,{className:"pb-2",children:[e.jsx(P,{children:"Workshop Overview"}),e.jsx(Y,{children:JSON.parse(t.description).en})]}),e.jsx(R,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Course"}),e.jsx(p,{variant:"outline",className:"mt-1",children:t.course.name.en})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Enrollment"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Students"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Languages"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(p,{variant:"secondary",className:"text-xs",children:"EN"}),e.jsx(p,{variant:"secondary",className:"text-xs",children:"FR"}),e.jsx(p,{variant:"secondary",className:"text-xs",children:"AR"})]})]})]}),v&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Next Session"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[_(new Date(v.date),"MMM d, yyyy")," at ",v.time]})]})]})]})})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Sub-Workshops"}),e.jsxs(m,{onClick:()=>f(!0),children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Add Sub-Workshop"]})]}),e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:n.map(r=>e.jsx(D,{href:`/admin/sub-workshop/${r.id}`,children:e.jsx(Ne,{subWorkshop:r})},r.id))})]})]}),e.jsx(fe,{open:b,onOpenChange:f,chapters:u,workshop:t.id})]}),e.jsx(le,{open:a,onOpenChange:i,workshop:t,courses:y})]})};export{es as default};
