import{j as e,r as b,m as G,L as H,$ as U}from"./app-C63RW_A8.js";import{C as F,a as I,d as M,b as R,c as K}from"./card-D5-mwLWY.js";import{T as y,c as u,a as z,b as N}from"./tabs-oE-yzVpY.js";import{B as W,L as J,P as Q,C as X,a as Y,b as Z,c as k,p as ee,d as se,e as te,A as ae,f as ie,g as re}from"./index-DupPz8lD.js";import{B as g}from"./button-C9oGkuB1.js";import{C as ne}from"./circle-check-big-D1xx-XsG.js";import{F as le}from"./file-text-BdAqrcqv.js";import{D as ce}from"./download-pwFxnpWD.js";import{B as de}from"./book-open-CZEBvkvN.js";import{A as oe,D as me,a as ue,b as he,c as pe}from"./app-layout-C86-vYy4.js";import{C as xe}from"./content-block-editor-DPssNA2u.js";import{u as je,a as V,s as fe,K as ve,P as ge}from"./sortable.esm-BqG2bcdx.js";import{I as $}from"./input-xWbc2EED.js";import{L as q}from"./label-BFMajRWC.js";import{T as Ne}from"./textarea-DREkHze9.js";import{C as be}from"./check-T1rm7eTg.js";import{A as Ce}from"./arrow-left-zkU-0xLB.js";import{L as we}from"./loader-circle-CZB20JDQ.js";import{S as ye}from"./save-B0f3D73a.js";import{C as Se}from"./chevron-down-jG5fkIAI.js";import"./index-BnriUOpo.js";import"./index-C2UCfdsy.js";import"./sidebar-DVSB-QeP.js";import"./index-DG3HcBNq.js";import"./select-BKmNIRiG.js";import"./index-BdQq_4o_.js";import"./plus-BR9vaOBG.js";import"./trash-2-DKOJ9GyN.js";import"./image-DtSp-YCz.js";import"./radio-group-CCZvIIS1.js";import"./video-BTrPciMZ.js";X.register(Y,Z,k,ee,se,te,ae,ie,re);function D({course:j,lang:C}){function h(r){const t=r.content,c={labels:t.data.map(a=>a.name),datasets:[{label:"Dataset",data:t.data.map(a=>a.value),backgroundColor:t.type==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},s={responsive:!0,plugins:{title:{display:!0,text:t.title||"Chart Preview"}}};return e.jsx("div",{className:"bg- rounded-md",children:e.jsx("div",{className:"h-full w-full",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"",children:[r.content.type==="bar"&&e.jsx(W,{data:c,options:s}),r.content.type==="line"&&e.jsx(J,{data:c,options:s}),r.content.type==="pie"&&e.jsx(Q,{data:c,options:s})]})})})})}function l(r){const t=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,c=r.match(t);return c&&c[1]}function d({block:r}){const[t,c]=b.useState(null);return b.useEffect(()=>{var a;const s=(a=r.content)==null?void 0:a.file;if(s){const n=new FileReader;n.onloadend=()=>{n.result&&c(n.result)},n.readAsDataURL(s)}},[r]),t?e.jsx("img",{src:t,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"}):e.jsx("div",{className:"text-muted-foreground",children:"Image Preview"})}return e.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-4",children:e.jsxs(F,{className:"lg:col-span-4",children:[e.jsx(I,{className:"pb-0",children:e.jsx("div",{dir:C==="ar"?"rtl":"ltr",className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"bg-primary/10 text-primary rounded-full px-2 py-1 text-xs",children:"NGO View"})})})}),e.jsx(M,{className:"",children:e.jsxs(y,{dir:C==="ar"?"rtl":"ltr",defaultValue:"content",children:[e.jsx(u,{value:"content",className:"mt-3",children:j.subcourses.length>0?e.jsx("div",{className:"space-y-8",children:j.subcourses.map((r,t)=>{var c;return e.jsx("div",{children:((c=r.blocks)==null?void 0:c.length)>0?e.jsx("div",{className:"",children:r.blocks.map(s=>e.jsxs("div",{className:"rounded-md p-4",children:[e.jsx("h3",{className:"mb-2 font-medium",children:s.content.title}),s.type==="text"&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:s.content.body||"Text content will appear here."})}),s.type==="image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx(d,{block:s})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="video"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video rounded-md",children:s.type==="video"&&e.jsxs("div",{className:"w-full space-y-2",children:[e.jsx("div",{className:"bg-muted aspect-video rounded-md",children:e.jsx("iframe",{className:"h-full w-full",src:`https://www.youtube.com/embed/${l(s.content.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground w-full text-center text-sm",children:s.content.caption})]})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground w-full text-center text-sm",children:s.content.caption})]}),s.type==="list"&&e.jsx("div",{children:s.content.type==="bullet"?e.jsx("ul",{className:"list-disc space-y-1 pl-5",children:(s.content.items||["Sample item"]).map((a,n)=>e.jsx("li",{children:a},n))}):s.content.type==="numbered"?e.jsx("ol",{className:"list-decimal space-y-1 pl-5",children:(s.content.items||["Sample item"]).map((a,n)=>e.jsx("li",{children:a},n))}):e.jsx("div",{className:"space-y-2",children:(s.content.items||["Sample item"]).map((a,n)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{className:"text-primary mr-2 h-4 w-4"}),e.jsx("span",{children:a})]},n))})}),s.type==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:Array.from({length:s.content.cols||3}).map((a,n)=>{var o;return e.jsx("th",{className:"border p-2 text-left",children:((o=s.content)==null?void 0:o.data[0][n])||`Header ${n+1}`},n)})})}),e.jsx("tbody",{children:Array.from({length:s.content.rows-1||3}).map((a,n)=>e.jsx("tr",{children:Array.from({length:s.content.cols||3}).map((o,m)=>{var w;return e.jsx("td",{className:"border p-2",children:((w=s.content)==null?void 0:w.data[n+1][m])||`Cell ${n+1}, ${m+1}`},m)})},n))})]})}),s.type==="chart"&&h(s),s.type==="document"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs("div",{className:"bg-muted/30 flex items-center justify-between border-b p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("div",{className:"font-medium",children:s.content.title||"PDF Document"})]}),e.jsxs(g,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Download"]})]})}),s.content.description&&e.jsx("p",{className:"text-muted-foreground text-sm",children:s.content.description})]})]},s.id))}):e.jsx("div",{className:"text-muted-foreground pl-11",children:"No content blocks in this module"})},r.id)})}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(de,{className:"text-muted-foreground mx-auto mb-4 h-12 w-12"}),e.jsx("h3",{className:"text-lg font-medium",children:"No modules yet"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Add modules to your course to see a preview"})]})}),e.jsx(u,{value:"resources",children:e.jsx("div",{className:"text-muted-foreground py-8 text-center",children:"Resources section preview"})}),e.jsx(u,{value:"discussions",children:e.jsx("div",{className:"text-muted-foreground py-8 text-center",children:"Discussions section preview"})})]})})]})})}const B=({subcourses:j,setSubcourses:C,activeSubcourse:h,setActiveSubcourse:l,addSubcourse:d,updateSubcourse:r,deleteSubcourse:t,data:c,setData:s,lang:a})=>{var o,m,w,S;je(V(ge),V(ve,{coordinateGetter:fe}));const n=v=>v[a];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(F,{className:"lg:col-span-2",children:[e.jsxs(I,{children:[e.jsx(R,{children:((m=(o=j[a])==null?void 0:o.find(v=>v.id===h))==null?void 0:m.title)||"Module Content"}),e.jsxs(K,{children:[n({en:"Add and arrange content blocks for this module",fr:"",ar:""})," "]})]}),e.jsx(M,{children:e.jsx(xe,{subcourseId:h,blocks:((S=(w=j[a])==null?void 0:w.find(v=>v.id===h))==null?void 0:S.blocks)||[],onBlocksChange:v=>{r(h,{blocks:v},a)},lang:a})})]}),e.jsx("div",{className:"col-span-2",children:e.jsx(D,{lang:a,course:{title:"Course Title",description:"Course description will appear here.",subcourses:j[a]}})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(g,{variant:"outline",onClick:()=>setActiveTab("details"),children:"Back to Details"}),e.jsx(g,{onClick:()=>setActiveTab("preview"),children:"Preview Course"})]})]})},E=({setActiveTab:j,data:C,setData:h,lang:l})=>{const d=r=>r[l];return e.jsx(e.Fragment,{children:e.jsxs(F,{dir:l==="ar"?"rtl":"ltr",className:"col-span-5",children:[e.jsxs(I,{children:[e.jsxs(R,{children:[" ",d({en:"Basic Information",ar:"المعلومات الأساسية",fr:"Informations de base"})," "]}),e.jsx(K,{children:d({en:"Enter the main details about your course",ar:"أدخل التفاصيل الرئيسية حول دورتك",fr:"Informations de base"})})]}),e.jsxs(M,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"title",children:d({en:"Course Title",ar:"عنوان الدورة",fr:"titre du cours"})}),e.jsx($,{className:"mt-4",id:"title",placeholder:d({en:"Enter course title",ar:"	أدخل عنوان الدورة",fr:"Saisissez le titre du cours"}),value:C.title,onChange:r=>h(t=>({...t,[l]:{...t[l],title:r.target.value}}))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(q,{htmlFor:"duration",children:[d({en:"Estimated Duration (Minutes)",ar:"المدة التقديرية",fr:"Durée estimée"})," "]}),e.jsx($,{className:"mt-4",id:"duration",type:"number",min:"1",placeholder:"e.g., 8",value:C.estimated_duration,onChange:r=>h(t=>({...t,[l]:{...t[l],estimated_duration:r.target.value}}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(q,{htmlFor:"description",children:[d({en:"Course Description",ar:"وصف الدورة",fr:"Description du cours"}),"  "]}),e.jsx(Ne,{id:"description",placeholder:d({en:"Describe what this course covers and its learning objectives",ar:"صِف ما تغطيه هذه الدورة وأهدافها التعليمية",fr:"Décrivez le contenu de ce cours et ses objectifs d’apprentissage"}),className:"mt-4 h-[35vh]",value:C.description,onChange:r=>h(t=>({...t,[l]:{...t[l],description:r.target.value}}))})]})]}),e.jsx("div",{className:"mr-3 flex h-full items-end justify-end",children:e.jsxs(g,{onClick:()=>{j("content")},children:["Continue to Content",e.jsx(be,{className:"ml-2 h-4 w-4"})]})})]})})},as=()=>{const[j,C]=b.useState(!1),[h,l]=b.useState("details"),[d,r]=b.useState("en"),[t,c]=b.useState({en:[{id:"subcourse-1",title:"Chapter 1",description:"",block:[]}],fr:[{id:"subcourse-1",title:"Chapter 1",description:"",block:[]}],ar:[{id:"subcourse-1",title:"Chapter 1",description:"",block:[]}]}),[s,a]=b.useState("subcourse-1"),n=new URLSearchParams(window.location.search).get("course"),{data:o,setData:m,post:w}=G({en:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[],quizTitle:"",quizDescription:"",quizTime:"",quizPublish:0,questions:[]},fr:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[],quizTitle:"",quizDescription:"",quizTime:"",quizPublish:0,questions:[]},ar:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[],quizTitle:"",quizDescription:"",quizTime:"",quizPublish:0,questions:[]},course_id:n});b.useEffect(()=>{m(i=>({...i,en:{...i.en,content:t.en},fr:{...i.fr,content:t.fr},ar:{...i.ar,content:t.ar}}))},[t]);const S=i=>i[d];b.useEffect(()=>{l("details")},[d]);function v(i){return["en","fr","ar"].every(p=>{const f=i[p];return f.title.trim()!==""&&f.description.trim()!==""&&f.estimated_duration.trim()!==""&&(f.content.length>0||f.quizTitle.trim()!==""&&f.questions.length>0)})}const O=i=>{console.log("all feilds are fill : ",v),i.preventDefault(),v(o)?w(route("chapter.store"),{data:o,onFinish:()=>{m({en:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[]},fr:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[]},ar:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[]},course_id:n})}}):alert("All inputs should be filled")},T=i=>{const x=`subcourse-${t[i].length+1}`;c(p=>({...p,[i]:[...p[i],{id:x,title:`Chapter ${p[i].length+1}`,description:"",blocks:[]}]})),a(x)},_=(i,x,p)=>{c(f=>({...f,[p]:f[p].map(L=>L.id===i?{...L,...x}:L)}))},A=(i,x)=>{c(p=>({...p,[x]:p[x].filter(f=>f.id!==i)}))},P=i=>{if(!i.destination)return;const x=Array.from(t),[p]=x.splice(i.source.index,1);x.splice(i.destination.index,0,p),c(x)};return e.jsxs(oe,{children:[e.jsx(H,{title:"Chapter"}),e.jsx("div",{className:"space-y-6 p-3 lg:p-6",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(g,{variant:"ghost",size:"sm",asChild:!0,className:"mr-2",children:e.jsxs(U,{href:"/admin/courses",children:[e.jsx(Ce,{className:"mr-1 h-4 w-4"}),"Back"]})}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Course"})]}),e.jsx(g,{onClick:O,disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Save Course"]})})]}),e.jsxs("div",{dir:d==="ar"?"rtl":"ltr",className:"bg-alpha mb-6 flex items-center justify-between rounded-lg p-3 text-white",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"font-medium",children:[S({en:"Editing english Language Content",ar:"تعديل محتوى اللغة العربية ",fr:"Modification du contenu en langue français"}),"  "]})}),e.jsxs(me,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(g,{variant:"ghost",size:"sm",className:"h-8",children:["Switch ",e.jsx(Se,{className:"ml-1 h-4 w-4"})]})}),e.jsx(he,{align:"end",children:["en","ar","fr"].map(i=>e.jsx(pe,{onClick:()=>r(i),children:e.jsx("span",{className:"mr-2",children:i})},i))})]})]}),e.jsxs(y,{value:d,onValueChange:r,className:"space-y-4",children:[e.jsx(u,{value:"en",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs(y,{value:h,onValueChange:l,className:"space-y-4",children:[e.jsxs(z,{className:"grid w-full grid-cols-3",children:[e.jsx(N,{value:"details",children:"Course Details"}),e.jsx(N,{value:"content",children:"Content & Modules"}),e.jsx(N,{value:"preview",children:"Preview"})]}),e.jsx(u,{value:"details",className:"grid grid-cols-5 gap-4 space-y-4",children:e.jsx(E,{data:o.en,setData:m,setActiveTab:l,lang:"en"})}),e.jsx(u,{value:"content",className:"space-y-4",children:e.jsx(B,{data:o.en,setData:m,deleteSubcourse:A,updateSubcourse:_,onDragEnd:P,addSubcourse:T,subcourses:t,activeSubcourse:s,setActiveSubcourse:a,setSubcourses:c,lang:"en"})}),e.jsxs(u,{value:"preview",children:[e.jsx(D,{course:{title:"Course Title",description:"Course description will appear here.",subcourses:t.en},lang:"en"}),e.jsx("div",{className:"mt-6 flex justify-between",children:e.jsx(g,{variant:"outline",onClick:()=>l("content"),children:"Back to Content"})})]})]})}),e.jsx(u,{value:"fr",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs(y,{value:h,onValueChange:l,className:"space-y-4",children:[e.jsxs(z,{className:"grid w-full grid-cols-3",children:[e.jsx(N,{value:"details",children:"Course Details"}),e.jsx(N,{value:"content",children:"Content & Modules"}),e.jsx(N,{value:"preview",children:"Preview"})]}),e.jsx(u,{value:"details",className:"grid grid-cols-5 gap-4 space-y-4",children:e.jsx(E,{data:o.fr,setData:m,setActiveTab:l,lang:"fr"})}),e.jsx(u,{value:"content",className:"space-y-4",children:e.jsx(B,{data:o.fr,setData:m,deleteSubcourse:A,updateSubcourse:_,onDragEnd:P,addSubcourse:T,subcourses:t,activeSubcourse:s,setActiveSubcourse:a,setSubcourses:c,lang:"fr"})}),e.jsxs(u,{value:"preview",children:[e.jsx(D,{course:{title:"Course Title",description:"Course description will appear here.",subcourses:t.fr},lang:"fr"}),e.jsx("div",{className:"mt-6 flex justify-between",children:e.jsx(g,{variant:"outline",onClick:()=>l("content"),children:"Back to Content"})})]})]})}),e.jsx(u,{value:"ar",dir:"rtl",className:"grid-cols- grid gap-4 space-y-4",children:e.jsx("div",{dir:"rtl",children:e.jsxs(y,{value:h,onValueChange:l,className:"space-y-4",children:[e.jsxs(z,{className:"grid w-full grid-cols-3",children:[e.jsx(N,{value:"details",children:"Course Details"}),e.jsx(N,{value:"content",children:"Content & Modules"}),e.jsx(N,{value:"preview",children:"Preview"})]}),e.jsx(u,{value:"details",className:"grid grid-cols-5 gap-4 space-y-4",children:e.jsx(E,{data:o.ar,setData:m,setActiveTab:l,lang:"ar"})}),e.jsx(u,{value:"content",className:"space-y-4",children:e.jsx(B,{data:o,setData:m,deleteSubcourse:A,updateSubcourse:_,onDragEnd:P,addSubcourse:T,subcourses:t,activeSubcourse:s,setActiveSubcourse:a,setSubcourses:c,lang:"ar"})}),e.jsxs(u,{value:"preview",children:[e.jsx(D,{course:{title:"Course Title",description:"Course description will appear here.",subcourses:t.ar},lang:"ar"}),e.jsx("div",{className:"mt-6 flex justify-between",children:e.jsx(g,{variant:"outline",onClick:()=>l("content"),children:"Back to Content"})})]})]})})})]})]})})]})};export{as as default};
