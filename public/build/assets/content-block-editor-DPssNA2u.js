import{r as k,j as e}from"./app-C63RW_A8.js";import{c as y,B as p}from"./button-C9oGkuB1.js";import{C as R,d as U}from"./card-D5-mwLWY.js";import{T as H,a as O,b as G,d as q}from"./tabs-oE-yzVpY.js";import{D as P,S as B,v as S,d as Y,e as I,c as J,b as W,C as Z}from"./sortable.esm-BqG2bcdx.js";import{I as j}from"./input-xWbc2EED.js";import{L as u}from"./label-BFMajRWC.js";import{S as K,a as Q,b as X,c as ee,d as T}from"./select-BKmNIRiG.js";import{B as se,L as ae,P as te,C as re,a as ie,b as le,c as de,p as ce,d as ne,e as me,A as oe,f as he,g as xe}from"./index-DupPz8lD.js";import{P as C}from"./plus-BR9vaOBG.js";import{T as w}from"./trash-2-DKOJ9GyN.js";import{T as E}from"./textarea-DREkHze9.js";import{F as L}from"./file-text-BdAqrcqv.js";import{I as b}from"./image-DtSp-YCz.js";import{R as ue,a as F}from"./radio-group-CCZvIIS1.js";import{V as A}from"./video-BTrPciMZ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],M=y("AlignLeft",pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],ve=y("ChartLine",je);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],_=y("ChartNoAxesColumnIncreasing",ye);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Ne=y("ChartPie",fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],$=y("File",ge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],D=y("GripVertical",we);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],z=y("List",Ce);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],Te=y("Presentation",be);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],V=y("Table",Fe);re.register(ie,le,de,ce,ne,me,oe,he,xe);function De({content:s,onChange:r}){var o;k.useEffect(()=>{if(!s.data||s.data.length===0){const t=[{name:"Category A",value:40},{name:"Category B",value:30},{name:"Category C",value:20},{name:"Category D",value:10}];r({...s,type:s.type||"bar",data:t})}},[s,r]);const h=()=>{r({...s,data:[...s.data,{name:`Category ${s.data.length+1}`,value:0}]})},m=t=>{r({...s,data:s.data.filter((c,x)=>x!==t)})},i=(t,c,x)=>{const a=[...s.data];a[t]={...a[t],[c]:c==="value"?Number(x):x},r({...s,data:a})},n={labels:s.data.map(t=>t.name),datasets:[{label:"Dataset",data:s.data.map(t=>t.value),backgroundColor:s.type==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},l={responsive:!0,plugins:{title:{display:!0,text:s.title||"Chart Preview"}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"title",children:"Chart Title"}),e.jsx(j,{id:"title",value:s.title,onChange:t=>r({...s,title:t.target.value}),placeholder:"Enter chart title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"chartType",children:"Chart Type"}),e.jsxs(K,{value:s.type,onValueChange:t=>r({...s,type:t}),children:[e.jsx(Q,{id:"chartType",children:e.jsx(X,{placeholder:"Select chart type"})}),e.jsxs(ee,{children:[e.jsx(T,{value:"bar",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Bar Chart"]})}),e.jsx(T,{value:"line",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"h-4 w-4 mr-2"}),"Line Chart"]})}),e.jsx(T,{value:"pie",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Pie Chart"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{children:"Chart Data"}),e.jsxs(p,{variant:"outline",size:"sm",onClick:h,children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Add Data Point"]})]}),e.jsx("div",{className:"space-y-2 mt-2",children:(o=s.data)==null?void 0:o.map((t,c)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{value:t.name,onChange:x=>i(c,"name",x.target.value),placeholder:"Category name",className:"flex-1"}),e.jsx(j,{type:"number",value:t.value,onChange:x=>i(c,"value",x.target.value),placeholder:"Value",className:"w-24"}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>m(c),disabled:s.data.length<=1,children:e.jsx(w,{className:"h-4 w-4"})})]},c))})]}),e.jsxs("div",{className:"border rounded-md p-4 bg-muted/30",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Chart Preview"}),e.jsx("div",{className:" flex items-center justify-center",children:e.jsxs("div",{className:"text-muted-foreground",children:[s.type==="bar"&&e.jsx(se,{data:n,options:l}),s.type==="line"&&e.jsx(ae,{data:n,options:l}),s.type==="pie"&&e.jsx(te,{data:n,options:l})]})})]})]})}function ke({content:s,onChange:r}){const h=async m=>{const i=m.target.files?m.target.files[0]:null;if(!i)return;const n=`documents/chapters/${i.name}`;r({...s,file:i,url:n})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"title",children:"PDF Title"}),e.jsx(j,{id:"title",value:s.title,onChange:m=>r({...s,title:m.target.value}),placeholder:"Enter PDF title"})]}),s.url?e.jsx("div",{className:"border rounded-md p-4 bg-muted/30",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-8 w-8 text-primary mr-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.title||"PDF Document"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.url.split("/").pop()})]})]})}):e.jsxs("div",{className:"border-2 border-dashed rounded-md p-6 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(L,{className:"h-12 w-12"})}),e.jsxs("div",{className:"flex text-sm text-muted-foreground",children:[e.jsxs("label",{htmlFor:"pdf-upload",className:"relative cursor-pointer rounded-md font-medium text-primary focus-within:outline-none focus-within:ring-2 focus-within:ring-primary",children:[e.jsx("span",{children:"Upload a PDF"}),e.jsx("input",{id:"pdf-upload",name:"pdf-upload",type:"file",accept:".pdf,.xls,.xlsx",className:"sr-only",onChange:m=>h(m)})]}),e.jsx("p",{className:"pl-1",children:"or enter URL"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"PDF up to 50MB"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(E,{id:"description",value:s.description,onChange:m=>r({...s,description:m.target.value}),placeholder:"Enter a description of this PDF document",rows:3})]})]})}function Ee({content:s,onChange:r}){async function h(i){const l=new TextEncoder().encode(i.name+Date.now()),o=await crypto.subtle.digest("SHA-256",l),c=Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join(""),x=i.name.split(".").pop();return`${c}.${x}`}const m=async i=>{const n=i.target.files?i.target.files[0]:null;if(!n)return;const l=await h(n),o=new File([n],l,{type:n.type}),t=`image/chapters/${l}`;r({...s,file:o,url:t})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"title",children:"Image Title"}),e.jsx(j,{accept:"image/png, image/jpeg, image/jpeg",id:"title",value:s.title,onChange:i=>r({...s,title:i.target.value}),placeholder:"Enter image title"})]}),e.jsx("div",{className:"flex flex-col items-center justify-center rounded-md border-2 border-dashed p-6",children:s.url?e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(b,{}),e.jsx("span",{children:s.title})]}),e.jsx(p,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>r({...s,url:""}),children:"Remove Image"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-muted-foreground mb-4",children:e.jsx(b,{className:"h-12 w-12"})}),e.jsxs("div",{className:"text-muted-foreground flex text-sm",children:[e.jsxs("label",{htmlFor:"image-upload",className:"text-primary focus-within:ring-primary relative cursor-pointer rounded-md font-medium focus-within:ring-2 focus-within:outline-none",children:[e.jsx("span",{children:"Upload an image"}),e.jsx("input",{id:"image-upload",name:"image-upload",type:"file",className:"sr-only",onChange:i=>m(i)})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-muted-foreground mt-2 text-xs",children:"PNG, JPG, GIF up to 10MB"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"caption",children:"Caption (Optional)"}),e.jsx(j,{id:"caption",value:s.caption,onChange:i=>r({...s,caption:i.target.value}),placeholder:"Enter image caption"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"altText",children:"Alt Text (for accessibility)"}),e.jsx(j,{id:"altText",value:s.altText,onChange:i=>r({...s,altText:i.target.value}),placeholder:"Describe the image for screen readers"})]})]})]})}function Ae({content:s,onChange:r}){const h=()=>{r({...s,items:[...s.items,""]})},m=(l,o)=>{const t=[...s.items];t[l]=o,r({...s,items:t})},i=l=>{r({...s,items:s.items.filter((o,t)=>t!==l)})},n=l=>{const{active:o,over:t}=l;if(o.id!==(t==null?void 0:t.id)){const c=s.items.indexOf(o.id),x=s.items.indexOf(t==null?void 0:t.id),a=I(s.items,c,x);r({...s,items:a})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"title",children:"List Title"}),e.jsx(j,{id:"title",value:s.title,onChange:l=>r({...s,title:l.target.value}),placeholder:"Enter list title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"List Type"}),e.jsxs(ue,{value:s.type,onValueChange:l=>r({...s,type:l}),className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"bullet",id:"bullet"}),e.jsx(u,{htmlFor:"bullet",children:"Bullet Points"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"numbered",id:"numbered"}),e.jsx(u,{htmlFor:"numbered",children:"Numbered List"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"checklist",id:"checklist"}),e.jsx(u,{htmlFor:"checklist",children:"Checklist"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{children:"List Items"}),e.jsxs(P,{onDragEnd:n,children:[e.jsx(B,{items:s.items,strategy:S,children:e.jsx("div",{className:"space-y-2",children:s.items.map((l,o)=>e.jsxs("div",{id:l,className:"flex items-center space-x-2",style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{className:"cursor-move",children:e.jsx(D,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx(j,{value:l,onChange:t=>m(o,t.target.value),placeholder:`Item ${o+1}`}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>i(o),disabled:s.items.length<=1,children:e.jsx(w,{className:"h-4 w-4"})})]},o))})}),e.jsx(Y,{children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(D,{className:"h-5 w-5 text-muted-foreground"})})})]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:h,className:"mt-2",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]})}function _e({content:s,onChange:r}){k.useEffect(()=>{if(!s.data||s.data.length===0){const t=Array.from({length:s.rows},()=>Array.from({length:s.cols},()=>""));r({...s,data:t})}},[]);const h=(t,c)=>{const x=Array.from({length:t},(a,d)=>Array.from({length:c},(v,N)=>{var g,f;return((f=(g=s.data)==null?void 0:g[d])==null?void 0:f[N])||""}));r({...s,rows:t,cols:c,data:x})},m=(t,c,x)=>{const a=s.data.map(d=>[...d]);a[t][c]=x,console.log(a),r({...s,data:a})},i=()=>h(s.rows+1,s.cols),n=()=>s.rows>1&&h(s.rows-1,s.cols),l=()=>h(s.rows,s.cols+1),o=()=>s.cols>1&&h(s.rows,s.cols-1);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"title",children:"Table Title"}),e.jsx(j,{id:"title",value:s.title,onChange:t=>r({...s,title:t.target.value}),placeholder:"Enter table title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(u,{children:"Table Dimensions"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:n,disabled:s.rows<=1,children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),"Row"]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:i,children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),"Row"]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:o,disabled:s.cols<=1,children:[e.jsx(w,{className:"h-3 w-3 mr-1"}),"Column"]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:l,children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),"Column"]})]})]}),e.jsx("div",{className:"border rounded-md overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:Array.from({length:s.cols}).map((t,c)=>{var x,a;return e.jsx("th",{className:"border p-2",children:e.jsx(j,{value:((a=(x=s.data)==null?void 0:x[0])==null?void 0:a[c])||"",onChange:d=>m(0,c,d.target.value),placeholder:`Header ${c+1}`,className:"border-0 p-0 h-8 bg-transparent"})},c)})})}),e.jsx("tbody",{children:Array.from({length:s.rows-1}).map((t,c)=>e.jsx("tr",{children:Array.from({length:s.cols}).map((x,a)=>{var d,v;return e.jsx("td",{className:"border p-2",children:e.jsx(j,{value:((v=(d=s.data)==null?void 0:d[c+1])==null?void 0:v[a])||"",onChange:N=>m(c+1,a,N.target.value),placeholder:`Cell ${c+1},${a+1}`,className:"border-0 p-0 h-8"})},a)})},c+1))})]})})]})]})}function Le({content:s,onChange:r}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"title",children:"Section Title"}),e.jsx(j,{id:"title",value:s.title,onChange:h=>r({...s,title:h.target.value}),placeholder:"Enter section title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"body",children:"Content"}),e.jsx(E,{id:"body",value:s.body,onChange:h=>r({...s,body:h.target.value}),placeholder:"Enter text content here...",rows:6})]})]})}function Pe({content:s,onChange:r}){const h=i=>{const n=i.target.value;r({...s,url:n})};function m(i){const n=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,l=i.match(n);return l&&l[1]}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"title",children:"Video Title"}),e.jsx(j,{id:"title",value:s.title,onChange:i=>r({...s,title:i.target.value}),placeholder:"Enter video title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"url",children:"Video URL"}),e.jsx(j,{id:"url",value:s.url,onChange:h,placeholder:"Enter YouTube, Vimeo, or other video URL"})]}),s.url?e.jsx("div",{className:"aspect-video bg-muted rounded-md flex items-center justify-center",children:s.url.includes("youtube.com")||s.url.includes("vimeo.com")?e.jsx("iframe",{width:"866",height:"487",src:`https://www.youtube.com/embed/${m(s.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Invalid video URL"})}):e.jsxs("div",{className:"border-2 border-dashed rounded-md p-6 flex flex-col items-center justify-center aspect-video",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(A,{className:"h-12 w-12"})}),e.jsx("div",{className:"flex text-sm text-muted-foreground",children:e.jsx("p",{className:"pl-1",children:"Only YouTube or Vimeo videos are allowed"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Please insert a valid link"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"caption",children:"Caption (Optional)"}),e.jsx(E,{id:"caption",value:s.caption,onChange:i=>r({...s,caption:i.target.value}),placeholder:"Enter video caption or description",rows:3})]})]})}function Ke({blocks:s,onBlocksChange:r,lang:h}){const[m,i]=k.useState(null),n=a=>{const d={id:`block-${Date.now()}`,type:a,content:c(a)};r([...s,d]),i(d.id)},l=(a,d)=>{r(s.map(v=>v.id===a?{...v,content:d}:v))},o=a=>{r(s==null?void 0:s.filter(d=>d.id!==a)),m===a&&i(null)},t=a=>{const{active:d,over:v}=a;if(!v||d.id===v.id)return;const N=s.findIndex(f=>f.id===d.id),g=s.findIndex(f=>f.id===v.id);if(N!==-1&&g!==-1){const f=I(s,N,g);r(f)}},c=a=>{switch(a){case"text":return{title:"New Text Section",body:""};case"image":return{title:"New Image",url:"",caption:"",altText:""};case"document":return{title:"New File",url:"",caption:""};case"video":return{title:"New Video",url:"",caption:""};case"list":return{title:"New List",items:["Item 1"],type:"bullet"};case"table":return{title:"New Table",rows:3,cols:3,data:Array(3).fill(Array(3).fill(""))};case"chart":return{title:"New Chart",type:"bar",data:[]};default:return{}}},x=a=>{switch(a.type){case"text":return e.jsx(Le,{content:a.content,onChange:d=>l(a.id,d)});case"image":return e.jsx(Ee,{content:a.content,onChange:d=>l(a.id,d)});case"video":return e.jsx(Pe,{content:a.content,onChange:d=>l(a.id,d)});case"list":return e.jsx(Ae,{content:a.content,onChange:d=>l(a.id,d)});case"table":return e.jsx(_e,{content:a.content,onChange:d=>l(a.id,d)});case"chart":return e.jsx(De,{content:a.content,onChange:d=>l(a.id,d)});case"document":return e.jsx(ke,{content:a.content,onChange:d=>l(a.id,d)});default:return e.jsx("div",{children:"Unknown block type"})}};return e.jsxs("div",{dir:h==="ar"?"rtl":"ltr",className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsx(P,{collisionDetection:J,onDragEnd:t,children:e.jsx(B,{items:s.map(a=>a.id),strategy:S,children:e.jsx("div",{className:"space-y-4",children:(s==null?void 0:s.length)===0?e.jsxs("div",{className:"rounded-md border-2 border-dashed py-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No content blocks yet"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Add your first content block using the buttons below"})]}):s.map(a=>e.jsx(Be,{block:a,activeBlockId:m,setActiveBlockId:i,removeBlock:o,renderBlockEditor:x},a.id))})})})}),e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsx("h3",{className:"mb-3 p-3 text-sm font-medium",children:"Add Content Block"}),e.jsxs(H,{defaultValue:"basic",className:"w-full",children:[e.jsx(O,{className:"w-full",children:e.jsx(G,{value:"basic",children:"Add Chapter Content"})}),e.jsx(q,{value:"basic",children:e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 sm:grid-cols-3",children:[e.jsxs(p,{variant:"outline",className:"justify-start",onClick:()=>n("text"),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Text"]}),e.jsxs(p,{variant:"outline",className:"justify-start",onClick:()=>n("list"),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"List"]}),e.jsxs(p,{variant:"outline",className:"justify-start",onClick:()=>n("image"),children:[e.jsx(b,{className:"mr-2 h-4 w-4"}),"Image"]}),e.jsxs(p,{variant:"outline",className:"justify-start",onClick:()=>n("video"),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Video"]}),e.jsxs(p,{variant:"outline",className:"justify-start",onClick:()=>n("table"),children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Table"]}),e.jsxs(p,{variant:"outline",className:"justify-start",onClick:()=>n("chart"),children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Chart"]}),e.jsxs(p,{variant:"outline",className:"justify-start",onClick:()=>n("document"),children:[e.jsx($,{className:"mr-2 h-4 w-4"}),"Document"]})]})})]})]})]})}function Be({block:s,activeBlockId:r,setActiveBlockId:h,removeBlock:m,renderBlockEditor:i}){const{attributes:n,listeners:l,setNodeRef:o,transform:t,transition:c}=W({id:s.id});return e.jsxs(R,{ref:o,style:{transform:Z.Transform.toString(t),transition:c},className:`${r===s.id?"ring-primary ring-2":""} p-2`,children:[e.jsxs("div",{className:"bg-muted/50 flex items-center border-b p-3",children:[e.jsx("div",{...l,...n,className:"mr-2 cursor-move",children:e.jsx(D,{className:"text-muted-foreground h-5 w-5"})}),e.jsx("div",{className:"flex-1 font-medium",children:s.content.title||`${s.type.charAt(0).toUpperCase()+s.type.slice(1)} Block`}),e.jsxs(p,{variant:"ghost",size:"icon",onClick:()=>h(r===s.id?null:s.id),children:[s.type==="text"&&e.jsx(M,{className:"h-4 w-4"}),s.type==="image"&&e.jsx(b,{className:"h-4 w-4"}),s.type==="video"&&e.jsx(A,{className:"h-4 w-4"}),s.type==="list"&&e.jsx(z,{className:"h-4 w-4"}),s.type==="table"&&e.jsx(V,{className:"h-4 w-4"}),s.type==="chart"&&e.jsx(_,{className:"h-4 w-4"}),s.type==="presentation"&&e.jsx(Te,{className:"h-4 w-4"}),s.type==="document"&&e.jsx($,{className:"h-4 w-4"})]}),e.jsx(p,{variant:"ghost",size:"icon",onClick:()=>m(s.id),className:"text-destructive",children:e.jsx(w,{className:"h-4 w-4"})})]}),r===s.id&&e.jsx(U,{className:"p-4",children:i(s)})]})}export{Ke as C};
