import{j as e,K as W,r as x,m as K,L as G,$ as X,S as Y}from"./app-C63RW_A8.js";import{T as Z}from"./TransText-DaOO7E6g.js";import{B as N}from"./badge-D73r7Sqn.js";import{c as k,B as d}from"./button-C9oGkuB1.js";import{C as v,a as P,b as _,d as g}from"./card-D5-mwLWY.js";import{P as ee}from"./progress-ZnRfCg3Q.js";import{S as se}from"./scroll-area-j5Rws7ih.js";import{S as te}from"./separator-KX6caguq.js";import{T as ae,a as re,b as ne,c as y}from"./tabs-oE-yzVpY.js";import{d as ie,A as le}from"./app-layout-C86-vYy4.js";import{B as ce,L as de,P as oe,C as me,a as xe,b as he,c as pe,p as ue,d as je,e as fe,A as Ne,f as ve,g as ge}from"./index-DupPz8lD.js";import{T as ye}from"./TruncateText-D9Sejyoj.js";import{C as z}from"./chevron-left-Dkv64HcE.js";import{C as we}from"./clock-jgSRPwmR.js";import{B as Ce}from"./book-open-CZEBvkvN.js";import{C as be}from"./circle-check-big-D1xx-XsG.js";import{F as D}from"./file-text-BdAqrcqv.js";import{D as E}from"./download-pwFxnpWD.js";import{I as $}from"./image-DtSp-YCz.js";import{C as M}from"./sidebar-DVSB-QeP.js";import"./index-BnriUOpo.js";import"./index-C2UCfdsy.js";import"./index-BdQq_4o_.js";import"./index-DG3HcBNq.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Le=k("CirclePlus",Se),Te=()=>e.jsx("div",{className:"animate-bounce",children:e.jsx(ie,{})});me.register(xe,he,pe,ue,je,fe,Ne,ve,ge);const Ze=()=>{var T;const{course:h,chapters:i,auth:o,quizId:w}=W().props,[p,C]=x.useState((T=i[0])==null?void 0:T.id),{setData:I,post:F,processing:Q}=K({user_id:o==null?void 0:o.user.id,chapter_id:null}),[l,u]=x.useState(1),[b,R]=x.useState(0),[j,V]=x.useState([]);x.useEffect(()=>{const t=[];i.forEach(a=>{a.content.forEach(r=>{r.blocks.forEach(c=>{if(c.type==="document"){console.log("document block",c);const s=c.content;t.push(s)}})})}),V(t)},[]);const S=t=>{R(t/i.length*100)},H=[{title:h.name,href:`/course/${h.id}`}];x.useEffect(()=>{p!==null&&I("chapter_id",p)},[p]);const L=()=>{F(route("chapter.read")),u(l+1),S(l),C(p+1)},J=t=>{t.preventDefault(),L(),Y.visit("/quiz/"+w)};function q(t){const a=t.content,r={labels:a.data.map(s=>s.name),datasets:[{label:"Dataset",data:a.data.map(s=>s.value),backgroundColor:a.type==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},c={responsive:!0,plugins:{title:{display:!0,text:a.title||"Chart Preview"}}};return e.jsx("div",{className:"bg- rounded-md",children:e.jsx("div",{className:"h-full w-full",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"",children:[t.content.type==="bar"&&e.jsx(ce,{data:r,options:c}),t.content.type==="line"&&e.jsx(de,{data:r,options:c}),t.content.type==="pie"&&e.jsx(oe,{data:r,options:c})]})})})})}function O(t){const a=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,r=t.match(a);return r&&r[1]}return e.jsxs(le,{breadcrumbs:H,children:[e.jsx(G,{title:h.name}),e.jsxs("div",{className:"mb-6 p-6",children:[e.jsxs(X,{href:"/course",className:"text-muted-foreground hover:text-foreground inline-flex items-center text-sm transition-colors",children:[e.jsx(z,{className:"mr- h-4 w-4"}),"Back to Courses"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:h.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(N,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(we,{className:"mr-1 h-3 w-3"}),i.reduce((t,a)=>t+a.estimated_duration,0)," Minutes total"]}),e.jsxs(N,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(Ce,{className:"mr-1 h-3 w-3"}),i.length," lessons"]})]})]}),e.jsx(ee,{value:b,className:"mt-4 h-2"}),e.jsxs("div",{className:"text-muted-foreground mt-1 flex justify-between text-xs",children:[e.jsxs("span",{children:[Math.round(b),"% completed"]}),e.jsxs("span",{children:[l," of ",i.length," lessons completed"]})]})]}),e.jsxs("div",{dir:o.user.language==="ar"?"rtl":"ltr",className:"grid grid-cols-1 gap-6 p-6 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(v,{children:[e.jsx(P,{className:"py-3",children:e.jsx(_,{className:"text-lg",children:"Course Content"})}),e.jsx(g,{className:"p-0",children:e.jsx(se,{className:"h-[calc(100vh-300px)]",children:e.jsx("div",{className:"space-y-1 pl-2",children:i.map((t,a)=>e.jsxs("div",{onClick:()=>{u(a+1),S(a+1),C(t.id)},className:`flex cursor-pointer items-center justify-between rounded-md px-2 py-1.5 text-sm transition-colors ${a+1===l?"bg-primary/80 text-primary-foreground":"hover:bg-muted"}`,children:[e.jsxs("div",{className:"flex items-center",children:[t.users.some(r=>r.id===o.user.id)?e.jsx("div",{className:"bg-primary mr-2 flex h-4 w-4 items-center justify-center rounded-full text-[10px] text-white",children:"✓"}):e.jsx("div",{className:"border-input mr-2 flex h-4 w-4 items-center justify-center rounded-full border text-[10px]"}),e.jsx("span",{className:a+1===l?"":"text-muted-foreground",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.hasQuiz&&e.jsx(N,{variant:"outline",className:"h-5 px-1 text-[10px]",children:"Quiz"}),e.jsx("span",{className:a+1===l?"":"text-muted-foreground text-xs",children:t.estimated_duration})]})]},a))})})})]})}),Q?e.jsx("div",{className:"flex items-center justify-center lg:col-span-6",children:e.jsx(Te,{})}):e.jsxs("div",{className:"lg:col-span-6",children:[e.jsx(v,{className:"overflow-hidden",children:e.jsx(g,{className:"p-6",children:e.jsxs(ae,{defaultValue:"content",children:[e.jsx(re,{className:"mb-4",children:e.jsxs(ne,{value:"content",children:[e.jsx(Z,{en:"Lesson Content",fr:"Contenu",ar:"محتوى "})," "]})}),e.jsxs(y,{value:"content",className:"space-y-4",children:[e.jsx("div",{dir:o.user.language==="ar"?"rtl":"ltr",className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-medium",children:[i[0].title," "]})}),e.jsx("div",{dir:o.user.language==="ar"?"rtl":"ltr",className:"prose max-w-none",children:i.flatMap((t,a)=>t.content.flatMap((r,c)=>r.blocks.map((s,U)=>a+1===l&&e.jsxs("div",{className:"rounded-md p-4",children:[s.content.title&&e.jsx("h3",{className:"mb-2 font-medium",children:s.content.title}),s.type==="text"&&s.content.body&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:s.content.body})}),s.type==="image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("img",{src:`/storage/${s.content.url}`,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="video"&&s.content.url&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("iframe",{width:"866",height:"487",src:`https://www.youtube.com/embed/${O(s.content.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="list"&&e.jsx("div",{children:s.content.type==="bullet"?e.jsx("ul",{className:"list-disc space-y-1 pl-5",children:(s.content.items||["Sample item"]).map((m,n)=>e.jsx("li",{children:m},n))}):s.content.type==="numbered"?e.jsx("ol",{className:"list-decimal space-y-1 pl-5",children:(s.content.items||["Sample item"]).map((m,n)=>e.jsx("li",{children:m},n))}):e.jsx("div",{className:"space-y-2",children:(s.content.items||["Sample item"]).map((m,n)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"text-primary mr-2 h-4 w-4"}),e.jsx("span",{children:m})]},n))})}),s.type==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:Array.from({length:s.content.cols||3}).map((m,n)=>{var f;return e.jsx("th",{className:"border p-2 text-left",children:(f=s.content)==null?void 0:f.data[0][n]},n)})})}),e.jsx("tbody",{children:Array.from({length:s.content.rows-1||3}).map((m,n)=>e.jsx("tr",{children:Array.from({length:s.content.cols||3}).map((f,A)=>{var B;return e.jsx("td",{className:"border p-2",children:(B=s.content)==null?void 0:B.data[n+1][A]},A)})},n))})]})}),s.type==="chart"&&q(s),s.type==="document"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs("div",{className:"bg-muted/30 flex items-center justify-between border-b p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("div",{className:"font-medium",children:e.jsx("span",{children:s.content.title||"PDF Document"})})]}),e.jsx("a",{href:`/storage/${s.content.url}`,target:"_blank",download:!0,children:e.jsxs(d,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Download"]})})]})}),s.content.description&&e.jsx("p",{className:"text-muted-foreground text-sm",children:s.content.description})]})]},`${a}-${c}-${U}`))))})]}),e.jsx(y,{value:"discussion",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4",children:[e.jsx($,{src:"/placeholder.svg?height=40&width=40",alt:"User avatar",width:40,height:40,className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{className:"w-full rounded-md border p-2 text-sm",rows:3,placeholder:"Add to the discussion..."}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx(d,{size:"sm",children:"Post Comment"})})]})]}),e.jsx(te,{}),e.jsx("div",{className:"space-y-4 pt-2",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx($,{src:"/placeholder.svg?height=40&width=40",alt:"User avatar",width:40,height:40,className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Alex Johnson"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"2 days ago"})]}),e.jsx("p",{className:"mt-1 text-sm",children:"I'm finding the distinction between front-end and back-end really helpful. Are there any recommended resources for learning more about back-end development?"}),e.jsx("div",{className:"mt-2 flex gap-4",children:e.jsxs(d,{variant:"ghost",size:"sm",className:"h-8 px-2",children:[e.jsx("svg",{className:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905a3.61 3.61 0 01-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),"Like (12)"]})})]})]})})]})}),e.jsx(y,{value:"notes",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:"My Notes for This Lesson"}),e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(Le,{className:"mr-1 h-4 w-4"}),"Add Note"]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"font-medium",children:"Front-end vs Back-end"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Added 2 days ago"})]}),e.jsx("p",{className:"mt-2 text-sm",children:"Front-end: HTML, CSS, JavaScript - what users see and interact with. Back-end: Server-side languages, databases - powers the front-end. Remember to look into Node.js for JavaScript back-end development."})]})]})})]})})}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[l>1&&e.jsxs(d,{variant:"outline",onClick:()=>u(l-1),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Previous Lesson"]}),l===i.length?w?e.jsx("a",{onClick:t=>J(t),children:e.jsxs(d,{children:["Take Quiz",e.jsx(M,{className:"ml-2 h-4 w-4"})]})}):e.jsx("a",{href:"/course",children:e.jsx(d,{children:"Return To Courses"})}):e.jsxs(d,{onClick:()=>{L()},children:["Next",e.jsx(M,{className:"ml-2 h-4 w-4"})]})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(v,{children:[e.jsx(P,{className:"py-3",children:e.jsx(_,{className:"text-lg",children:"Attachments"})}),e.jsx(g,{children:e.jsx("div",{className:"space-y-3",children:j==null?void 0:j.map((t,a)=>e.jsxs("div",{className:"hover:bg-muted/50 flex items-center justify-between rounded-md border p-2 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary/10 mr-3 flex h-8 w-8 items-center justify-center rounded",children:e.jsx(D,{className:"text-primary h-4 w-4"})}),e.jsx("div",{children:e.jsx("div",{className:"text-sm font-medium",children:e.jsx(ye,{text:t.title,length:8})})})]}),e.jsx("a",{href:`/storage/${t.url}`,target:"_blank",download:!0,children:e.jsxs(d,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Download"]})})]},a))})})]})})]})]})};export{Ze as default};
