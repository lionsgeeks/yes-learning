import{r as c,j as e,$ as ee}from"./app-C63RW_A8.js";import{c as C,B as o}from"./button-C9oGkuB1.js";import{C as se,a as ae,b as le,d as te}from"./card-D5-mwLWY.js";import{I as g}from"./input-xWbc2EED.js";import{T as ie,a as ne,b as y,c as f,d as re,e as m}from"./table-DgaGv9ni.js";import{h as ce,i as de,j as oe,D as me,a as he,b as xe,f as ue,c as p,g as je}from"./app-layout-C86-vYy4.js";import{B as ge}from"./badge-D73r7Sqn.js";import{E as fe,A as pe,a as ve,b as we,c as Ne,d as ye,e as Ce,f as De,g as be}from"./alert-dialog-DU3BoMIj.js";import{D as Se,a as Ae,b as ke,c as Te,d as Le,e as Ee}from"./dialog-BvJSafTo.js";import{L as h}from"./label-BFMajRWC.js";import{S as M,a as O,b as U,c as $,d as x}from"./select-BKmNIRiG.js";import{S as Fe}from"./search-BKyGJwfN.js";import{F as Ie}from"./filter-DE4e80cM.js";import{S as Me}from"./square-pen-O9gGr2H6.js";import{T as Oe}from"./trash-2-DKOJ9GyN.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],$e=C("LockOpen",Ue);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],He=C("Lock",_e);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ve=C("UserPlus",Be);function ls({Users:_,title:H,description:D,showAddButton:B=!0,addButtonLink:V="/admin/users/create",onUserUpdate:u,onUserDelete:b,role:S,courses:A,joinDate:k}){const[d,v]=c.useState(_),[t,R]=c.useState(""),[z,w]=c.useState(!1),[N,T]=c.useState(null),[P,j]=c.useState(!1),[a,n]=c.useState(null),[L,E]=c.useState(!1),F=d.filter(s=>{var l,r,i;return((l=s.name)==null?void 0:l.toLowerCase().includes(t==null?void 0:t.toLowerCase()))||((r=s.email)==null?void 0:r.toLowerCase().includes(t==null?void 0:t.toLowerCase()))||((i=s.role)==null?void 0:i.toLowerCase().includes(t==null?void 0:t.toLowerCase()))}),q=s=>{T(s),w(!0)},J=()=>{N&&(b&&b(N),v(d.filter(s=>s.id!==N)),w(!1),T(null))},G=s=>{n({...s}),j(!0)},K=()=>{a&&(E(!0),setTimeout(()=>{const s=d.map(l=>l.id===a.id?a:l);u&&a&&u(a),v(s),j(!1),n(null),E(!1)},500))},I=s=>{const l=d.find(i=>i.id===s);if(!l)return;const r={...l,status:l.status==="Active"?"Inactive":"Active"};u&&u(r),v(d.map(i=>i.id===s?r:i))};function W(s){const l=new Date(s),r={weekday:"long",day:"numeric",month:"long",year:"numeric"},i=l.toLocaleDateString("en-US",r),[X,Y,Z,Q]=i.split(" ");return`${X} ${Z} ${Y} ${Q}`}return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[e.jsxs(se,{children:[e.jsxs(ae,{className:"pb-3",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:H}),D&&e.jsx("p",{className:"text-muted-foreground mt-1",children:D})]}),B&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(o,{asChild:!0,children:e.jsxs(ee,{href:V,children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Add User"]})})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx(le,{children:"Users"}),e.jsxs("div",{className:"flex items-center sm:justify-normal justify-evenly gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(g,{type:"search",placeholder:"Search users...",className:"w-full sm:w-[260px] pl-9",value:t,onChange:s=>R(s.target.value)})]}),e.jsxs(o,{variant:"outline",size:"icon",children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Filter"})]})]})]})]}),e.jsx(te,{children:e.jsxs(ie,{children:[e.jsx(ne,{children:e.jsxs(y,{className:"lg:flex-row lg:flex hidden w-full",children:[e.jsx(f,{className:"w-full ",children:"User"}),S&&e.jsx(f,{className:"w-full",children:"Role"}),A&&e.jsx(f,{className:"w-full",children:"Subscribed Courses"}),k&&e.jsx(f,{className:"w-full",children:"Join Date"})]})}),e.jsxs(re,{className:"flex-col flex gap-y-2 overflow-auto h-[35vh]",children:[F.map(s=>{var l;return e.jsxs(y,{className:"flex flex-col  p-2 rounded-lg lg:flex-row w-full border-2 lg:border-1",children:[e.jsx(m,{className:"w-full",children:e.jsxs("div",{className:"flex items-center gap-3 justify-between",children:[e.jsxs("div",{className:"flex",children:[e.jsxs(ce,{children:[e.jsx(de,{src:s.avatar,alt:s.name}),e.jsxs(oe,{children:[s.name.charAt(0),(l=s.name.split(" ")[1])==null?void 0:l.charAt(0)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.email})]})]}),e.jsx("div",{className:"lg:hidden",children:e.jsxs(me,{children:[e.jsx(he,{asChild:!0,children:e.jsxs(o,{variant:"ghost",size:"icon",children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Actions"})]})}),e.jsxs(xe,{align:"end",children:[e.jsx(ue,{children:"Actions"}),e.jsxs(p,{onClick:()=>G(s),children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Edit"]}),s.status==="Active"?e.jsxs(p,{onClick:()=>I(s.id),children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Deactivate"]}):e.jsxs(p,{onClick:()=>I(s.id),children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),"Activate"]}),e.jsx(je,{}),e.jsxs(p,{className:"text-destructive",onClick:()=>q(s.id),children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]})}),S&&e.jsx(m,{className:"w-full",children:e.jsx(ge,{variant:s.role==="admin"?"default":"secondary",children:s.role==="admin"?"Admin":"User"})}),A&&e.jsx(m,{className:"w-full",children:s.courses}),k&&e.jsx(m,{className:"w-full",children:W(s.created_at)})]},s.id)}),F.length===0&&e.jsx(y,{className:"flex flex-col  p-2 rounded-lg lg:flex-row w-full",children:e.jsx(m,{colSpan:6,className:"text-center py-8 text-muted-foreground w-full",children:"No users found. Try adjusting your search."})})]})]})})]}),e.jsx(pe,{open:z,onOpenChange:w,children:e.jsxs(ve,{children:[e.jsxs(we,{children:[e.jsx(Ne,{children:"Are you sure?"}),e.jsx(ye,{children:"This will permanently delete this user account and all associated data. This action cannot be undone."})]}),e.jsxs(Ce,{children:[e.jsx(De,{children:"Cancel"}),e.jsx(be,{onClick:J,className:"bg-destructive  text-white hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(Se,{open:P,onOpenChange:j,children:e.jsxs(Ae,{className:"sm:max-w-[525px]",children:[e.jsxs(ke,{children:[e.jsx(Te,{children:"Edit User"}),e.jsx(Le,{children:"Make changes to the user details below."})]}),a&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"name",children:"Full Name"}),e.jsx(g,{id:"name",value:a.name,onChange:s=>n({...a,name:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"email",children:"Email"}),e.jsx(g,{id:"email",type:"email",value:a.email,onChange:s=>n({...a,email:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"role",children:"Role"}),e.jsxs(M,{value:a.role,onValueChange:s=>n({...a,role:s}),children:[e.jsx(O,{id:"role",children:e.jsx(U,{placeholder:"Select role"})}),e.jsxs($,{children:[e.jsx(x,{value:"Student",children:"Student"}),e.jsx(x,{value:"Instructor",children:"Instructor"}),e.jsx(x,{value:"Admin",children:"Admin"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"status",children:"Status"}),e.jsxs(M,{value:a.status,onValueChange:s=>n({...a,status:s}),children:[e.jsx(O,{id:"status",children:e.jsx(U,{placeholder:"Select status"})}),e.jsxs($,{children:[e.jsx(x,{value:"Active",children:"Active"}),e.jsx(x,{value:"Inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"courses",children:"Enrolled Courses"}),e.jsx(g,{id:"courses",type:"number",value:a.courses,onChange:s=>n({...a,courses:Number.parseInt(s.target.value)||0}),disabled:a.status==="Inactive"})]}),e.jsxs(Ee,{children:[e.jsx(o,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(o,{onClick:K,disabled:L,children:L?"Saving...":"Save changes"})]})]})]})})]})})}export{ls as A};
