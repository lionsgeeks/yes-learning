import{r as b,m as M,j as e,L as K,$ as I}from"./app-C63RW_A8.js";import{A as X}from"./app-layout-C86-vYy4.js";import{c as G,B as d}from"./button-C9oGkuB1.js";import{C as w,d as y,a as O,b as T,c as U}from"./card-D5-mwLWY.js";import{B as j}from"./badge-D73r7Sqn.js";import{S as A}from"./separator-KX6caguq.js";import{A as Y}from"./admin-users-table-JJ9coXo3.js";import{A as Z,a as W,b as ee,c as se,d as ie,e as te,f as ae}from"./alert-dialog-DU3BoMIj.js";import{L as re}from"./loader-circle-CZB20JDQ.js";import{D as ne,a as le,b as ce,c as de,d as oe,e as me}from"./dialog-BvJSafTo.js";import{I as h}from"./input-xWbc2EED.js";import{L as c}from"./label-BFMajRWC.js";import{T as xe}from"./textarea-DREkHze9.js";import{S as E,a as R,b as _,c as B,d as C}from"./select-BKmNIRiG.js";import{S}from"./switch-b7eD8oVt.js";import{T as P,a as V,b as u,c as Q}from"./tabs-oE-yzVpY.js";import{C as D}from"./sidebar-DVSB-QeP.js";import{C as he}from"./chevron-left-Dkv64HcE.js";import{A as pe}from"./arrow-left-zkU-0xLB.js";import{T as J}from"./triangle-alert-98MW-rwc.js";import{C as je}from"./calendar-Chc8KH6H.js";import{C as ue}from"./clock-jgSRPwmR.js";import{U as fe}from"./users-_p6o4v2s.js";import{G as Ne}from"./globe-D1Iezt4k.js";import{B as ve}from"./book-open-CZEBvkvN.js";import{C as ge}from"./copy-BEcaG9Al.js";import{V as we}from"./video-BTrPciMZ.js";import{i as ye}from"./isPast-CMtZTBm5.js";import{f as Ce}from"./format-ymR-pL-R.js";import"./index-BnriUOpo.js";import"./index-C2UCfdsy.js";import"./index-DG3HcBNq.js";import"./table-DgaGv9ni.js";import"./search-BKyGJwfN.js";import"./filter-DE4e80cM.js";import"./square-pen-O9gGr2H6.js";import"./trash-2-DKOJ9GyN.js";import"./index-BdQq_4o_.js";import"./chevron-down-jG5fkIAI.js";import"./check-T1rm7eTg.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],be=G("Link",Se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],z=G("Mail",De);function $e({open:t,onOpenChange:x,workshopTitle:f,workshopId:a}){const[l,o]=b.useState(!1),{delete:i,processing:r}=M(),p=()=>{o(!0),i(route("subworkshop.destroy",a),{onSuccess:()=>{x(!1),o(!1)},onError:()=>{o(!1)}})};return e.jsx(Z,{open:t,onOpenChange:x,children:e.jsxs(W,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Are you absolutely sure?"}),e.jsxs(ie,{children:["This action cannot be undone. This will permanently delete the ",f," workshop and remove its data from our servers."]})]}),e.jsxs(te,{children:[e.jsx(ae,{disabled:r,children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:p,disabled:r,className:"bg-red-500 text-red-50 hover:bg-red-600",children:r?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})}function ke({open:t,onOpenChange:x,chapters:f,subWorkshop:a}){const[l,o]=b.useState(1),{data:i,setData:r,put:p,processing:N,errors:m}=M({workshop_id:a.workshop_id,chapter_id:a.chapter_id,date:a.date,time:a.time,duration:a.duration,name:{en:JSON.parse(a.name).en,fr:JSON.parse(a.name).fr,ar:JSON.parse(a.name).ar},description:{en:JSON.parse(a.description).en,fr:JSON.parse(a.description).fr,ar:JSON.parse(a.description).ar},prerequisite:{en:JSON.parse(a.prerequisite).en,fr:JSON.parse(a.prerequisite).fr,ar:JSON.parse(a.prerequisite).ar},instructor:{en:JSON.parse(a.instructor).en,fr:JSON.parse(a.instructor).fr,ar:JSON.parse(a.instructor).ar},meetLink:{en:JSON.parse(a.meetLink).en,fr:JSON.parse(a.meetLink).fr,ar:JSON.parse(a.meetLink).ar},allowQuestions:a.allowQuestions,requireRegistration:a.requireRegistration,sendNotifications:a.sendNotifications,notificationTime:"24h",published:a.published}),v=()=>{o(s=>Math.min(s+1,3))},$=()=>{o(s=>Math.max(s-1,1))},k=()=>{p(route("subworkshop.update",a.id),{onSuccess:()=>{x(!1),o(1)}})},L=i.name&&i.description&&i.date&&i.time&&i.duration;return e.jsx(ne,{open:t,onOpenChange:s=>{x(s),s||o(1)},children:e.jsxs(le,{className:"max-w-3xl",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Update Sub-Workshop"}),e.jsx(oe,{children:l===1?"Update basic information about the sub-workshop":l===2?"Modify instructor settings":"Adjust sub-workshop preferences and notification settings"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Step ",l," of 3"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l===1?"Basic Info":l===2?"Instructor Settings":"Preferences"})]}),e.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-muted",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all",style:{width:`${l/3*100}%`}})})]}),l===1&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(P,{defaultValue:"en",children:[e.jsxs(V,{className:"grid w-full grid-cols-3",children:[e.jsx(u,{value:"en",children:"English"}),e.jsx(u,{value:"fr",children:"French"}),e.jsx(u,{value:"ar",children:"Arabic"})]}),["en","fr","ar"].map(s=>e.jsx(Q,{value:s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:`name-${s}`,children:["name (",s.toUpperCase(),")"]}),e.jsx(h,{id:`name-${s}`,placeholder:`name (${s.toUpperCase()})`,value:i.name[`${s}`],onChange:n=>r("name",{...i.name,[`${s}`]:n.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:`description-${s}`,children:["description (",s.toUpperCase(),")"]}),e.jsx(h,{id:`description-${s}`,placeholder:"https://meet.google.com/...",value:i.description[`${s}`],onChange:n=>r("description",{...i.description,[`${s}`]:n.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:`prerequisite-${s}`,children:["prerequisite (",s.toUpperCase(),")"]}),e.jsx(xe,{id:`prerequisite-${s}`,placeholder:"https://meet.google.com/...",value:i.prerequisite[`${s}`],onChange:n=>r("prerequisite",{...i.prerequisite,[`${s}`]:n.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"course",children:"Associated chapter"}),e.jsxs(E,{value:i.chapter_id,onValueChange:n=>r("chapter_id",n),children:[e.jsx(R,{id:"course",children:e.jsx(_,{placeholder:"Select a course"})}),e.jsx(B,{children:f.map(n=>e.jsx(C,{value:n.id,children:n.title[`${s}`]},n.id))})]}),m.chapter_id&&e.jsx("p",{className:"text-sm text-red-500",children:m.chapter_id})]})]})},s))]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"date",children:"Date"}),e.jsx(h,{id:"date",type:"date",value:i.date,onChange:s=>r("date",s.target.value)}),m.date&&e.jsx("p",{className:"text-sm text-red-500",children:m.date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"time",children:"Time"}),e.jsx(h,{id:"time",type:"time",value:i.time,onChange:s=>r("time",s.target.value)}),m.time&&e.jsx("p",{className:"text-sm text-red-500",children:m.time})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"duration",children:"Duration (minutes)"}),e.jsx(h,{id:"duration",type:"number",placeholder:"90",value:i.duration,onChange:s=>r("duration",s.target.value)}),m.duration&&e.jsx("p",{className:"text-sm text-red-500",children:m.duration})]})]})]}),l===2&&e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs(P,{defaultValue:"en",children:[e.jsxs(V,{className:"grid w-full grid-cols-3",children:[e.jsx(u,{value:"en",children:"English"}),e.jsx(u,{value:"fr",children:"French"}),e.jsx(u,{value:"ar",children:"Arabic"})]}),["en","fr","ar"].map(s=>e.jsx(Q,{value:s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:`instructor-${s}`,children:["Instructor (",s.toUpperCase(),")"]}),e.jsx(h,{id:`instructor-${s}`,placeholder:`Instructor (${s.toUpperCase()})`,value:i.instructor[`${s}`],onChange:n=>r("instructor",{...i.instructor,[`${s}`]:n.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:`meetLink-${s}`,children:["Google Meet Link (",s.toUpperCase(),")"]}),e.jsx(h,{id:`meetLink-${s}`,placeholder:"https://meet.google.com/...",value:i.meetLink[`${s}`],onChange:n=>r("meetLink",{...i.meetLink,[`${s}`]:n.target.value})})]})]})},s))]})}),l===3&&e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{children:"Allow Questions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable Q&A during the workshop"})]}),e.jsx(S,{checked:i.allowQuestions,onCheckedChange:s=>r("allowQuestions",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{children:"Require Registration"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Students must register before joining"})]}),e.jsx(S,{checked:i.requireRegistration,onCheckedChange:s=>r("requireRegistration",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{children:"Send Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify enrolled students about this workshop"})]}),e.jsx(S,{checked:i.sendNotifications,onCheckedChange:s=>r("sendNotifications",s)})]}),i.sendNotifications&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"notificationTime",children:"Notification Schedule"}),e.jsxs(E,{value:i.notificationTime,onValueChange:s=>r("notificationTime",s),children:[e.jsx(R,{id:"notificationTime",children:e.jsx(_,{})}),e.jsxs(B,{children:[e.jsx(C,{value:"24h",children:"24 hours before workshop"}),e.jsx(C,{value:"1h",children:"1 hour before workshop"}),e.jsx(C,{value:"both",children:"Both 24 hours and 1 hour before"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(c,{children:"Publish Sub-Workshop"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this sub-workshop visible to students"})]}),e.jsx(S,{checked:i.published,onCheckedChange:s=>r("published",s)})]})]})}),e.jsx(me,{children:l===1?e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsxs(d,{onClick:v,disabled:!L,children:["Next",e.jsx(D,{className:"ml-2 h-4 w-4"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{variant:"outline",onClick:$,children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Back"]}),l===2?e.jsxs(d,{onClick:v,children:["Next",e.jsx(D,{className:"ml-2 h-4 w-4"})]}):e.jsx(d,{onClick:k,disabled:N,children:N?"Updating...":"Update Sub-Workshop"})]})})]})})}const Le=[{title:"Sub-Workshop Session",href:"/admin/sub-workshop/1"}];function us({subWorkshop:t,chapters:x}){t.status;const[f,a]=b.useState(!1),[l,o]=b.useState(!1),i=[];t.date||i.push("date"),t.time||i.push("time");const r=["en","fr","ar"],p=r.filter(s=>!JSON.parse(t.instructor).instructor-[s]),N=r.filter(s=>!JSON.parse(t.meetLink).meetLink-[s]);p.length>0&&i.push(`instructor (${p.map(s=>s.substring(0,2).toUpperCase()).join(", ")})`),N.length>0&&i.push(`meet link (${N.map(s=>s.substring(0,2).toUpperCase()).join(", ")})`),t.date&&ye(new Date(`${t.date} ${t.time}`));const m={english:"English",french:"French",arabic:"Arabic"},v={english:"EN",french:"FR",arabic:"AR"},{setData:$,put:k}=M({workshop:""}),L=s=>{$("workshop",s),k(route("workshop.notif",s),{})};return e.jsxs(X,{breadcrumbs:Le,children:[e.jsx(K,{title:"Sub-Workshop Session"}),e.jsxs("div",{className:"container mx-auto p-3 lg:p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center",children:[e.jsx(d,{variant:"ghost",size:"icon",asChild:!0,className:"mr-2",children:e.jsx(I,{href:`/admin/workshops/${t.workshop_id}`,children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h1",{className:"text-2xl font-bold",children:JSON.parse(t.name).en})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx(I,{href:`/workshops/${t.workshopId}`,className:"hover:underline",children:t.workshopTitle})," ",t.subCourse]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{variant:"outline",onClick:s=>{s.preventDefault(),s.stopPropagation(),o(!0)},children:"Edit"}),e.jsx(ke,{open:l,onOpenChange:o,subWorkshop:t,chapters:x}),e.jsx(d,{className:"text-destructive",variant:"outline",onClick:s=>{s.preventDefault(),s.stopPropagation(),a(!0)},children:"Delete Sub-Workshop"}),e.jsx($e,{open:f,onOpenChange:a,workshopTitle:JSON.parse(t.name).en,workshopId:t.id})]})})]}),i.length>0&&e.jsx(w,{className:"mb-6 bg-amber-50 border-amber-200",children:e.jsx(y,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(J,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Incomplete Sub-Workshop"}),e.jsxs("p",{className:"text-sm",children:["This sub-workshop is missing: ",i.join(", "),". Please complete all required information before publishing."]})]})]})})}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3 mb-6",children:[e.jsxs(w,{className:"md:col-span-2",children:[e.jsxs(O,{className:"pb-3",children:[e.jsx(T,{children:"Overview"}),e.jsx(U,{children:JSON.parse(t.name).en})]}),e.jsxs(y,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4 text-muted-foreground"}),"Date"]}),e.jsx("div",{className:"text-sm",children:t.date?Ce(new Date(t.date),"MMMM d, yyyy"):"Not set"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4 text-muted-foreground"}),"Time"]}),e.jsx("div",{className:"text-sm",children:t.time?`${t.time} (${t.duration} min)`:"Not set"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(fe,{className:"h-4 w-4 text-muted-foreground"}),"Enrollment"]}),e.jsxs("div",{className:"text-sm",children:[t.users.length," participants"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"}),"Languages"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(j,{variant:"secondary",className:"text-xs",children:"EN"}),e.jsx(j,{variant:"secondary",className:"text-xs",children:"FR"}),e.jsx(j,{variant:"secondary",className:"text-xs",children:"AR"})]})]})]}),e.jsx(A,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ve,{className:"h-4 w-4 text-muted-foreground"}),"Prerequisites"]}),e.jsx("ul",{className:"text-sm list-disc pl-5 space-y-1",children:e.jsx("li",{children:JSON.parse(t.prerequisite).en})})]})]})]}),e.jsxs(w,{children:[e.jsxs(O,{className:"pb-3",children:[e.jsx(T,{children:"Communication"}),e.jsx(U,{children:"Send emails to participants"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{variant:"outline",className:"w-full justify-between",size:"sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Send Reminder"]}),e.jsx(D,{className:"h-4 w-4"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Remind participants about the upcoming session"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{variant:"outline",className:"w-full justify-between",size:"sm",onClick:()=>L(t),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{className:"mr-2 h-4 w-4"}),"Send Meeting Links"]}),e.jsx(D,{className:"h-4 w-4"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Send meeting links to all confirmed participants"})]}),e.jsx(A,{}),e.jsx("div",{className:"pt-2",children:e.jsxs(d,{className:"w-full",children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Custom Email"]})})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Language Sessions"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:r.map(s=>{const n=JSON.parse(t.instructor),g=JSON.parse(t.meetLink),q=!!n[`${s}`],F=!!g[`${s}`],H=q&&F;return e.jsxs(w,{className:"border",children:[e.jsx(O,{className:"pb-3 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(T,{className:"text-lg flex items-center gap-2",children:[e.jsx(j,{variant:"secondary",children:v[s]}),m[s]]}),H?e.jsx(j,{children:"Complete"}):e.jsx(j,{variant:"outline",className:"text-amber-500 border-amber-500",children:"Incomplete"})]})}),e.jsxs(y,{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"Instructor"}),q?e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:n[`${s}`]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:n[`${s}`]})]})}):e.jsxs("div",{className:"text-amber-600 text-sm flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"No instructor assigned"]})]}),e.jsx(A,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"Google Meet"}),F?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"rounded-md border bg-muted p-2 text-xs text-muted-foreground break-all",children:g[`${s}`]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{size:"sm",variant:"outline",className:"flex-1 h-8 text-xs",onClick:()=>navigator.clipboard.writeText(g[`${s}`]||""),children:[e.jsx(ge,{className:"mr-1 h-3 w-3"}),"Copy"]}),e.jsx(d,{size:"sm",className:"flex-1 h-8 text-xs",asChild:!0,children:e.jsxs("a",{href:g[`${s}`],target:"_blank",rel:"noopener noreferrer",children:[e.jsx(we,{className:"mr-1 h-3 w-3"}),"Join"]})})]})]}):e.jsxs("div",{className:"text-amber-600 text-sm flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"No meeting link provided"]})]})]})]},s)})})]}),e.jsx(Y,{title:"Manage Users",description:"Check Students Information",Users:t.users,role:1,courses:1,joinDate:1,showAddButton:!1})]})]})}export{us as default};
