import{K as F,r as h,j as e,L as M,$ as z,S as I}from"./app-C63RW_A8.js";import{B as w}from"./badge-D73r7Sqn.js";import{B as m}from"./button-C9oGkuB1.js";import{C,a as V,b as O,d as b}from"./card-D5-mwLWY.js";import{A as Q,D as R,a as H,b as K,c as W}from"./app-layout-C86-vYy4.js";import{S as q}from"./scroll-area-j5Rws7ih.js";import{T as G,a as J,b as U,c as X}from"./tabs-oE-yzVpY.js";import{B as Y,L as Z,P as k,C as ee,a as se,b as te,c as ae,p as re,d as ne,e as ie,A as le,f as ce,g as de}from"./index-DupPz8lD.js";import{C as S}from"./chevron-left-Dkv64HcE.js";import{B as oe}from"./book-open-CZEBvkvN.js";import{C as me}from"./chevron-down-jG5fkIAI.js";import{C as xe}from"./circle-check-big-D1xx-XsG.js";import{F as he}from"./file-text-BdAqrcqv.js";import{D as pe}from"./download-pwFxnpWD.js";import{C as D}from"./sidebar-DVSB-QeP.js";import"./index-BnriUOpo.js";import"./index-C2UCfdsy.js";import"./index-DG3HcBNq.js";import"./index-BdQq_4o_.js";ee.register(se,te,ae,re,ne,ie,le,ce,de);const Fe=()=>{var N;const{course:x,chapters:c,auth:j}=F().props,[B,f]=h.useState((N=c[0])==null?void 0:N.id),[n,L]=h.useState("en"),[i,p]=h.useState(1),[ue,P]=h.useState(0),g=t=>{P(t/c.length*100)},$=[{title:x.name[n],href:`/course/${x.id}`}],T=()=>{p(i+1),g(i),f(B+1)};function A(t){const a=t.content,l={labels:a.data.map(s=>s.name),datasets:[{label:"Dataset",data:a.data.map(s=>s.value),backgroundColor:a.type==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},o={responsive:!0,plugins:{title:{display:!0,text:a.title||"Chart Preview"}}};return e.jsx("div",{className:"bg- rounded-md",children:e.jsx("div",{className:"h-full w-full",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"",children:[t.content.type==="bar"&&e.jsx(Y,{data:l,options:o}),t.content.type==="line"&&e.jsx(Z,{data:l,options:o}),t.content.type==="pie"&&e.jsx(k,{data:l,options:o})]})})})})}function _(t){const a=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,l=t.match(a);return l&&l[1]}return e.jsxs(Q,{breadcrumbs:$,children:[e.jsx(M,{title:x.name[n]}),e.jsxs("div",{dir:n==="ar"?"rtl":"ltr",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs(z,{href:"/admin/courses",className:"text-muted-foreground hover:text-foreground inline-flex items-center text-sm transition-colors",children:[e.jsx(S,{className:"mr- h-4 w-4"}),"Back to Courses"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:x.name[n]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(w,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(oe,{className:"mr-1 h-3 w-3"}),c.length," lessons"]})})]})]}),e.jsx("div",{className:"p-4",children:e.jsxs(R,{className:"",children:[e.jsx(H,{asChild:!0,children:e.jsxs(m,{variant:"ghost",size:"sm",className:"h-8",children:[n==="en"?"English":n==="ar"?"العربية ":"Français"," ",e.jsx(me,{className:"ml-1 h-4 w-4"})]})}),e.jsx(K,{align:"end",children:["en","ar","fr"].map(t=>e.jsx(W,{onClick:()=>L(t),children:e.jsx("span",{className:"mr-2",children:t})},t))})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 p-6 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(C,{children:[e.jsx(V,{className:"py-",children:e.jsx(O,{className:"text-lg",children:"Course Content"})}),e.jsx(b,{className:"p-0",children:e.jsx(q,{className:"h-[calc(100vh-300px)]",children:e.jsx("div",{className:"space-y-1 p-2",children:c.map((t,a)=>e.jsx("div",{onClick:()=>{p(a+1),g(a+1),f(t.id)},className:`flex cursor-pointer items-center justify-between rounded-md px-2 py-1.5 text-sm transition-colors ${a+1===i?"bg-primary/80 text-primary-foreground":"hover:bg-muted"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.hasQuiz&&e.jsx(w,{variant:"outline",className:"h-5 px-1 text-[10px]",children:"Quiz"}),e.jsx("span",{className:a+1===i?"":"text-muted-foreground text-xs",children:t.estimated_duration[n]}),e.jsx("span",{className:a+1===i?"":"text-muted-foreground",children:t.title[n]})]})},a))})})})]})}),e.jsxs("div",{dir:j.user.language==="ar"?"rtl":"ltr",className:"lg:col-span-9",children:[e.jsx(C,{className:"overflow-hidden",children:e.jsx(b,{className:"",children:e.jsxs(G,{defaultValue:"content",children:[e.jsx(J,{className:"mb-4",children:e.jsx(U,{value:"content",children:" Lesson Content"})}),e.jsxs(X,{value:"content",className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-xl font-medium",children:c[0].title[n]})}),e.jsx("div",{dir:j.user.language==="ar"?"rtl":"ltr",className:"prose max-w-none",children:c.flatMap((t,a)=>t.content[n].flatMap((l,o)=>l.blocks.map((s,E)=>a+1===i&&e.jsxs("div",{className:"rounded-md p-4",children:[s.content.title&&e.jsx("h3",{className:"mb-2 font-medium",children:s.content.title}),s.type==="text"&&s.content.body&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:s.content.body})}),s.type==="image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("img",{src:`/storage/${s.content.url}`,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="video"&&s.content.url&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("iframe",{width:"866",height:"487",src:`https://www.youtube.com/embed/${_(s.content.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="list"&&e.jsx("div",{children:s.content.type==="bullet"?e.jsx("ul",{className:"list-disc space-y-1 pl-5",children:(s.content.items||["Sample item"]).map((d,r)=>e.jsx("li",{children:d},r))}):s.content.type==="numbered"?e.jsx("ol",{className:"list-decimal space-y-1 pl-5",children:(s.content.items||["Sample item"]).map((d,r)=>e.jsx("li",{children:d},r))}):e.jsx("div",{className:"space-y-2",children:(s.content.items||["Sample item"]).map((d,r)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"text-primary mr-2 h-4 w-4"}),e.jsx("span",{children:d})]},r))})}),s.type==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:Array.from({length:s.content.cols||3}).map((d,r)=>{var u;return e.jsx("th",{className:"border p-2 text-left",children:(u=s.content)==null?void 0:u.data[0][r]},r)})})}),e.jsx("tbody",{children:Array.from({length:s.content.rows-1||3}).map((d,r)=>e.jsx("tr",{children:Array.from({length:s.content.cols||3}).map((u,v)=>{var y;return e.jsx("td",{className:"border p-2",children:(y=s.content)==null?void 0:y.data[r+1][v]},v)})},r))})]})}),s.type==="chart"&&A(s),s.type==="document"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs("div",{className:"bg-muted/30 flex items-center justify-between border-b p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(he,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("div",{className:"font-medium",children:e.jsx("span",{children:s.content.title||"PDF Document"})})]}),e.jsx("a",{href:`/storage/${s.content.url}`,target:"_blank",download:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Download"]})})]})}),s.content.description&&e.jsx("p",{className:"text-muted-foreground text-sm",children:s.content.description})]})]},`${a}-${o}-${E}`))))})]})]})})}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[i>1&&e.jsxs(m,{variant:"outline",onClick:()=>p(i-1),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Previous Lesson"]}),i===c.length?e.jsxs(m,{onClick:()=>I.visit("/admin/courses"),children:["Back to courses",e.jsx(D,{className:"ml-2 h-4 w-4"})]}):e.jsxs(m,{onClick:()=>{T()},children:["Next",e.jsx(D,{className:"ml-2 h-4 w-4"})]})]})]})]})]})]})};export{Fe as default};
