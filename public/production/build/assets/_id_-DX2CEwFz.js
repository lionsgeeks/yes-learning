import{j as e,r as f,K as ae,m as le,L as ce,$ as Z}from"./app-BepXSDoE.js";import{c as S,a as R,b as ne,B as v}from"./button-BZVkaX9H.js";import{C,a as k,b as M,c as B,d as _,e as H}from"./card-DaSB9O8q.js";import{P as J}from"./progress-BaZ70opi.js";import{R as W,a as F}from"./radio-group-DMdUS8A6.js";import{L as A}from"./label-i2PKwYmJ.js";import{C as de}from"./checkbox-8xAItRyd.js";import{S as D}from"./separator-CdGzawyu.js";import{d as O,A as oe,e as me}from"./app-layout-CFaYeUwl.js";import{I as xe}from"./input-Ce2DZWVi.js";import{C as z}from"./circle-check-big-CT7tduDW.js";import{C as U}from"./chevron-left-Bl1lYPD2.js";import{C as he}from"./sidebar-fzgE3VwQ.js";import{A as ue}from"./arrow-left-DPBVF2aI.js";import"./index-BoIa7ulN.js";import"./index-B9UOmD4j.js";import"./index-CH90LRVw.js";import"./check-B5wazGBN.js";import"./book-open-C_xq8X6x.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],je=S("CalendarDays",pe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ge=S("CircleHelp",fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Q=S("CircleX",Ne);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],be=S("QrCode",ve),ye=ne("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-background text-foreground",destructive:"text-destructive-foreground [&>svg]:text-current *:data-[slot=alert-description]:text-destructive-foreground/80"}},defaultVariants:{variant:"default"}});function V({className:r,variant:n,...i}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:R(ye({variant:n}),r),...i})}function E({className:r,...n}){return e.jsx("div",{"data-slot":"alert-title",className:R("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",r),...n})}function X({className:r,...n}){return e.jsx("div",{"data-slot":"alert-description",className:R("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",r),...n})}const we=f.memo(function({userName:n,courseName:i,completionDate:d,score:m}){return e.jsxs("div",{className:"relative w-full max-w-3xl mx-auto bg-white border-8 border-secondary/20 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-5",children:e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiMyMjIiIGZpbGwtb3BhY2l0eT0iLjA1Ij48cGF0aCBkPSJNMzYgMzRoLTJ2LTRoMnY0em0wLTZ2LTRoLTJ2NGgyek0zMCAzNGgtMnYtNGgydjR6bTAtNnYtNGgtMnY0aDJ6TTI0IDM0aC0ydi00aDJ2NHptMC02di00aC0ydjRoMnoiLz48L2c+PC9nPjwvc3ZnPg==')]"})}),e.jsxs("div",{className:"relative p-8 md:p-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12  rounded-full flex items-center justify-center",children:e.jsx(O,{})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-xl font-bold text-alpha ",children:"Yes Africa"}),e.jsx("p",{className:"text-sm text-beta",children:"Certificate of Course Completion"})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"w-20 h-20 bg-muted/20 rounded-lg flex items-center justify-center",children:e.jsx(be,{className:"h-12 w-12 text-muted-foreground/50"})})})]}),e.jsxs("div",{className:"text-center my-12",children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-serif mb-2 text-alpha",children:"Certificate of Achievement"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"This certifies that"}),e.jsx("h2",{className:"text-2xl md:text-4xl font-bold text-black my-4 font-serif",children:n}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"has successfully completed"}),e.jsx("h3",{className:"text-xl md:text-2xl font-bold my-4 text-beta",children:i}),e.jsx("p",{className:"text-muted-foreground mb-2",children:"with a score of"}),e.jsxs("div",{className:"text-2xl md:text-3xl font-bold text-secondary my-2",children:[m,"%"]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mt-12 pt-8 border-t border-muted",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsx(je,{className:"h-5 w-5 text-muted-foreground mr-2"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Issued on ",d]})]}),e.jsx("div",{className:"w-20 h-0.5 bg-alpha"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(O,{})})]})]})]})}),K=({q:r,answers:n,option:i,lang:d})=>{const m=r.type==="multiple-choice"&&!r.allow_multiple?n[r.id]===i.text[d]:r.type==="multiple-choice"&&r.allow_multiple?(n[r.id]||[]).includes(i.text[d]):r.type==="short-answer"?r.correct_answer[d]==n[r.id]:r.correct_answer==n[r.id],t=r.type==="multiple-choice"&&!r.allow_multiple?r.options.find(h=>h.isCorrect).text[d]===i.text[d]:r.type==="multiple-choice"&&r.allow_multiple?r.options.filter(h=>h.isCorrect).map(h=>h.text[d]).includes(i.text[d]):r.type==="short-answer"?r.correct_answer[d]==n[r.id]:r.correct_answer==n[r.id];switch(r.type){case"multiple-choice":return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`flex items-center p-2 rounded ${m&&t?"bg-green-50 border border-green-200":m&&!t?"bg-red-50 border border-red-200":!m&&t?"bg-blue-50 border border-blue-200":"bg-muted/30 border"}`,children:[e.jsxs("div",{className:"w-5 h-5 flex items-center justify-center mr-2",children:[m&&t&&e.jsx(z,{className:"h-4 w-4 text-green-500"}),m&&!t&&e.jsx(Q,{className:"h-4 w-4 text-red-500"}),!m&&t&&e.jsx(ge,{className:"h-4 w-4 text-blue-500"})]}),e.jsx("span",{className:`text-sm ${m&&t?"text-green-700":m&&!t?"text-red-700":!m&&t?"text-blue-700":""}`,children:i.text[d]})]},i.text[d])});case"true-false":return e.jsx(e.Fragment,{children:e.jsxs("div",{children:["The Correct Answer is : ",e.jsx("span",{children:r.correct_answer?"True":"False"})]})});case"short-answer":return e.jsx(e.Fragment,{children:t?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded",children:e.jsx("p",{className:"p-2 rounded text-green-700",children:r.correct_answer[d]})}):e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("p",{className:"bg-blue-50 border border-blue-200 rounded text-blue-700 p-2",children:["Correct Answer : ",r.correct_answer[d]]}),e.jsxs("p",{className:"bg-red-50 border border-red-200 rounded text-red-700 p-2",children:["Your Answer : ",n[r.id]]})]})});default:return e.jsx(e.Fragment,{children:e.jsx("h1",{children:"You Should Not Be Seeing This Text. If You Do Please Contact Us."})})}};function Be(){const{quiz:r,user:n,lang:i}=ae().props,{post:d}=le({score:0,time:0}),m=[{title:"Quiz Title",href:`/quiz/${r.id}`}],t=r,[h,b]=f.useState(0),[o,y]=f.useState({}),[L,Y]=f.useState(!1),T=f.useRef(t.timeLimit*60),[w,q]=f.useState(t.timeLimit*60);f.useEffect(()=>{if(L)return;const s=setInterval(()=>{T.current>0?(T.current-=1,q(T.current)):(clearInterval(s),$())},1e3);return()=>clearInterval(s)},[L]);const c=t.questions[h],I=s=>{y({...o,[c.id]:s})},ee=s=>{const a=o[c.id]||[];a.includes(s)?y({...o,[c.id]:a.filter(l=>l!==s)}):y({...o,[c.id]:[...a,s]})},G=s=>!!o[s],[p,se]=f.useState(0),te=()=>{let s=0;t.questions.forEach(l=>{const x=o[l.id];if(l.type=="multiple-choice"&&!l.allow_multiple){const g=l.options.find(j=>j.isCorrect).text[i];x==g&&s++}if(l.type=="multiple-choice"&&l.allow_multiple){const g=l.options.filter(N=>N.isCorrect).map(N=>N.text[i]).sort(),j=x.sort();g.every((N,ie)=>N===j[ie])&&s++}l.type=="short-answer"&&x==l.correct_answer[i]&&s++,l.type=="true-false"&&x==l.correct_answer&&s++});const a=s/t.questions.length*100;return se(a),a},$=s=>{s.preventDefault();const a=te();Y(!0);const l=Math.floor((t.timeLimit*60-w)/60)+"m"+(t.timeLimit*60-w)%60+"s";d(route("store.score",{data:{score:a,time:l,answers:o,quiz_id:t.id}}))},P=s=>{const a=t.questions.find(x=>x.id===s);if(!a)return!1;const l=o[s];if(a.type=="multiple-choice"&&!a.allow_multiple){const x=a.options.find(g=>g.isCorrect).text[i];if(l==x)return!0}if(a.type=="multiple-choice"&&a.allow_multiple){const x=a.options.filter(j=>j.isCorrect).map(j=>j.text[i]).sort(),g=l.sort();if(x.every((j,N)=>j==g[N]))return!0}if(a.type=="short-answer"&&l==a.correct_answer[i]||a.type=="true-false"&&l==a.correct_answer)return!0},u=p>=t.passingScore,re=s=>{switch(s.type){case"multiple-choice":return s.allow_multiple?"Choose The Correct Answers":"Choose One Answer";case"true-false":return"True or False";case"short-answer":return"Write The Correct Answer"}};return e.jsxs(oe,{breadcrumbs:m,children:[e.jsx(ce,{title:"Quiz Title"}),e.jsxs("div",{className:"mb-6 p-6",children:[e.jsxs(Z,{href:"/course/"+r.course_id,className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(U,{className:"mr-1 h-4 w-4"}),"Back to Course"]}),e.jsx("h1",{className:"text-2xl font-bold mt-2",children:t.title}),e.jsx("p",{className:"text-muted-foreground",children:t.description})]}),L?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(C,{children:[e.jsxs(k,{children:[e.jsx(M,{children:"Quiz Results"}),e.jsxs(B,{children:["You scored ",p.toFixed(0),"% (",Math.round(p*t.questions.length/100)," of"," ",t.questions.length," correct)"]})]}),e.jsxs(_,{children:[u&&p>=70?e.jsxs("div",{className:"space-y-6",children:[e.jsxs(V,{className:"bg-green-50 border-green-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx(E,{className:"text-green-700",children:"Congratulations! You've earned a certificate."})]}),e.jsx(X,{className:"mt-2",children:"You've demonstrated excellent understanding of the material. Your certificate is ready below."})]}),e.jsx("div",{className:"my-8 overflow-hidden rounded-lg shadow-lg",children:e.jsx(we,{userName:n.name,courseName:r.title,completionDate:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),score:Math.round(p)})})]}):e.jsxs(V,{className:u?"bg-green-50 border-green-200":"bg-red-50 border-red-200",children:[e.jsxs("div",{className:"flex items-center",children:[u?e.jsx(z,{className:"h-5 w-5 text-green-500 mr-2"}):e.jsx(Q,{className:"h-5 w-5 text-red-500 mr-2"}),e.jsx(E,{className:u?"text-green-700":"text-red-700",children:u?"Congratulations! You passed the quiz.":"You did not pass the quiz."})]}),e.jsx(X,{className:"mt-2",children:u?"You've demonstrated a good understanding of the material. You can now proceed to the next module.":`The passing score is ${t.passingScore}%. Review the material and try again.`})]}),e.jsx(D,{className:"my-6"}),e.jsx("div",{className:"space-y-6",children:t.questions.map((s,a)=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:`mt-0.5 flex-shrink-0 ${P(s.id)?"text-green-500":"text-red-500"}`,children:P(s.id)?e.jsx(z,{className:"h-5 w-5"}):e.jsx(Q,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium",children:["Question ",a+1,": ",s.question]}),e.jsx("div",{className:"mt-3 space-y-2",children:s.options&&s.options.length>0?s.options.map((l,x)=>e.jsx("div",{children:e.jsx(K,{q:s,answers:o,option:l,lang:i})},x)):e.jsx(K,{q:s,answers:o,lang:i})})]})]})},s.id))})]}),e.jsxs(H,{className:"flex justify-between",children:[e.jsx(v,{variant:"outline",asChild:!0,children:e.jsxs(Z,{href:`/course/${t.course_id}`,children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Return to Course"]})}),u?e.jsx(e.Fragment,{}):e.jsx(v,{onClick:()=>{Y(!1),y({}),b(0)},children:"Retry Quiz"})]})]})}),e.jsx("div",{children:e.jsxs(C,{children:[e.jsx(k,{children:e.jsx(M,{children:"Performance Summary"})}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between mb-1 text-sm",children:[e.jsx("span",{children:"Score"}),e.jsxs("span",{children:[p.toFixed(0),"%"]})]}),e.jsx(J,{value:p,className:`h-2 ${u?"bg-green-100":"bg-red-100"}`,indicatorclassname:u?"bg-green-500":"bg-red-500"}),e.jsxs("div",{className:"flex justify-between mt-1 text-xs text-muted-foreground",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{className:u?"text-green-600":"text-red-600",children:["Passing: ",t.passingScore,"%"]}),e.jsx("span",{children:"100%"})]})]}),e.jsx(D,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Correct Answers"}),e.jsx("span",{className:"font-medium",children:Math.round(p*t.questions.length/100)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Incorrect Answers"}),e.jsx("span",{className:"font-medium",children:t.questions.length-Math.round(p*t.questions.length/100)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Time Taken"}),e.jsxs("span",{className:"font-medium",children:[Math.floor((t.timeLimit*60-w)/60),"m ",e.jsx("span",{children:" "}),(t.timeLimit*60-w)%60,"s"]})]})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx(D,{}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3 text-center",children:[e.jsx("div",{className:"flex justify-center mb-2",children:e.jsx(me,{className:"h-6 w-6 text-green-600"})}),e.jsx("div",{className:"text-sm font-medium text-green-800",children:"Achievement Unlocked"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:r.title})]})]})]})})]})})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(C,{children:[e.jsx(k,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(M,{children:["Question ",h+1," of ",t.questions.length]}),e.jsx(B,{children:re(c)})]})})}),e.jsxs(_,{className:"pt-6",children:[e.jsx("div",{className:"text-2xl font-medium mb-6",children:c.question}),c.type==="multiple-choice"&&!c.allow_multiple?e.jsx(W,{value:o[c.id]||"",onValueChange:I,children:e.jsx("div",{className:"space-y-3",children:c.options.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 border rounded-lg p-3 hover:bg-muted/50 transition-colors",children:[e.jsx(F,{value:s.text[i],id:`option-${s.text[i]}`}),e.jsx(A,{htmlFor:`option-${s.text[i]}`,className:"flex-1 cursor-pointer",children:s.text[i]})]},s.text[i]))})}):c.type==="multiple-choice"&&c.allow_multiple?e.jsx("div",{className:"space-y-3",children:c.options.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 border rounded-lg p-3 hover:bg-muted/50 transition-colors",children:[e.jsx(de,{id:`option-${s.text[i]}`,checked:(o[c.id]||[]).includes(s.text[i]),onCheckedChange:()=>ee(s.text[i])}),e.jsx(A,{htmlFor:`option-${s.text[i]}`,className:"flex-1 cursor-pointer",children:s.text[i]})]},s.text[i]))}):c.type=="true-false"?e.jsx(W,{value:o[c.id]||"",onValueChange:I,children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 border rounded-lg p-3 hover:bg-muted/50 transition-colors",children:[e.jsx(F,{value:"1",id:"option-true"}),e.jsx(A,{className:"flex-1 cursor-pointer",htmlFor:"option-true",children:"True"})]}),e.jsxs("div",{className:"flex items-center space-x-2 border rounded-lg p-3 hover:bg-muted/50 transition-colors",children:[e.jsx(F,{value:"0",id:"option-false"}),e.jsx(A,{className:"flex-1 cursor-pointer",htmlFor:"option-false",children:"False"})]})]})}):c.type=="short-answer"?e.jsx(e.Fragment,{children:e.jsx(xe,{onChange:s=>{I(s.target.value)},placeholder:"Write Answer Here",className:"flex-1"})}):e.jsx(e.Fragment,{children:e.jsx("p",{children:"If you see this text then something is wrong. "})})]}),e.jsxs(H,{className:"flex justify-between",children:[e.jsxs(v,{variant:"outline",onClick:()=>b(s=>Math.max(0,s-1)),disabled:h===0,children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Previous"]}),h<t.questions.length-1?e.jsxs(v,{onClick:()=>b(s=>Math.min(t.questions.length-1,s+1)),disabled:!G(c.id),children:["Next",e.jsx(he,{className:"ml-2 h-4 w-4"})]}):e.jsx(v,{onClick:$,disabled:Object.keys(o).length<t.questions.length,children:"Submit Quiz"})]})]})}),e.jsx("div",{children:e.jsxs(C,{children:[e.jsx(k,{children:e.jsx(M,{children:"Quiz Progress"})}),e.jsxs(_,{children:[e.jsx("div",{className:"grid grid-cols-5 gap-2",children:t.questions.map((s,a)=>e.jsx(v,{variant:h===a?"default":G(s.id)?"outline":"ghost",className:"h-10 w-10 p-0",onClick:()=>b(a),children:a+1},s.id))}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Completion"}),e.jsxs("span",{children:[Object.keys(o).length," of ",t.questions.length]})]}),e.jsx(J,{value:Object.keys(o).length/t.questions.length*100,className:"h-2"})]})]})]})})]})]})}export{Be as default};
