import{r as n,j as e,$ as x,L as v}from"./app-DyttysuU.js";import{D as b,a as S,b as w,c as m,A as y,T as D}from"./app-layout-JXfhEOI_.js";import{c as k,B as h}from"./button-CsEfufLj.js";import{I as M}from"./input-DEOcPHAI.js";import{S as T,a as W,b as O,c as I,d as p}from"./select-CjrNFAen.js";import{D as E,C as u}from"./delete-workshop-dialog-BbG3OhpA.js";import{C as L,a as V,b as A,c as H,d as B,e as P}from"./card-CjmNi4f3.js";import{B as $}from"./badge-BrYO4mHl.js";import{E as F}from"./alert-dialog-BY0_q2PF.js";import{C as _}from"./calendar-CGiaj4uf.js";import{U as q}from"./users-BbkO47Wq.js";import{T as J}from"./triangle-alert-mhj0K04N.js";import{P as U}from"./plus-BIPNHW-c.js";import"./index-B6-K6RO8.js";import"./index-CTxFrPBm.js";import"./index-Cu6fXj98.js";import"./index-CIAxyqie.js";import"./book-open-BrytWTyk.js";import"./index-BdQq_4o_.js";import"./chevron-down-DtXxza_-.js";import"./check-PmGeBlFR.js";import"./dialog-CerEaLom.js";import"./label-C1m2j7ms.js";import"./tabs-DXMTH26h.js";import"./loader-circle-P0jpTGZu.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],R=k("Trophy",z);function Z({workshop:s,courses:r}){const[c,l]=n.useState(!1),[i,d]=n.useState(!1),o=t=>{t.target.closest("[data-dropdown-trigger]")&&(t.preventDefault(),t.stopPropagation())};return e.jsxs(L,{className:"overflow-hidden pb-0 transition-all hover:shadow-md h-full flex flex-col",children:[e.jsx(V,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(A,{className:"text-lg",children:JSON.parse(s.name).en})}),e.jsx(H,{className:"line-clamp-1 mt-1",children:JSON.parse(s.description).en})]}),e.jsxs(b,{children:[e.jsx(S,{asChild:!0,"data-dropdown-trigger":!0,onClick:o,children:e.jsxs(h,{variant:"ghost",size:"icon",className:"-mr-2 h-8 w-8",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(w,{align:"end",children:[e.jsx(m,{children:e.jsx(x,{href:`/admin/workshops/${s.id}`,children:"Edit Workshop"})}),e.jsx(m,{className:"text-destructive",onClick:t=>{t.preventDefault(),t.stopPropagation(),l(!0)},children:"Delete Workshop"})]})]})]})}),e.jsx(B,{className:"pb-3 flex-grow",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"flex items-center text-sm text-muted-foreground",children:e.jsx($,{variant:"outline",className:"mr-2",children:s.course.name.en})}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(_,{className:"mr-1 h-4 w-4"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(q,{className:"mr-1 h-4 w-4"}),e.jsxs("span",{children:[s.enrolledStudents,"/",s.maxCapacity," Students"]})]})]})}),e.jsx(P,{className:`border-t px-6 py-3 ${s.isComplete?"bg-muted/50":"bg-amber-50"}`,children:e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.subWorkshops," Sub-Workshops"]}),s.isComplete?e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Complete"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Incomplete"})]})]})}),e.jsx(E,{open:c,onOpenChange:l,workshopTitle:s.name,workshopId:s.id}),e.jsx(u,{open:i,onOpenChange:d,workshop:s,courses:r})]})}const G=[{title:"Workshops",href:"/admin/workshop"}],ve=({workshops:s,courses:r})=>{const[c,l]=n.useState(!1),[i,d]=n.useState(""),[o,t]=n.useState("all"),j=a=>{d(a.target.value.toLowerCase())},f=a=>{t(a)},g=s.filter(a=>{const C=a.name.toLowerCase().includes(i),N=o==="all"||a.course.id===o;return C&&N});return e.jsxs(y,{breadcrumbs:G,children:[e.jsx(v,{title:"Workshops"}),e.jsxs("div",{className:"flex flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Workshops"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage workshops for your courses"})]}),e.jsxs(h,{onClick:()=>l(!0),children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Create Workshop"]})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M,{placeholder:"Search workshops...",className:"max-w-sm",value:i,onChange:j}),e.jsxs(T,{defaultValue:"all",onValueChange:f,children:[e.jsx(W,{className:"w-[180px]",children:e.jsx(O,{placeholder:"Filter by course"})}),e.jsxs(I,{children:[e.jsx(p,{value:"all",children:"All Courses"}),r.map(a=>e.jsx(p,{value:a.id,children:e.jsx(D,{en:a.name.en,fr:a.name.fr,ar:a.name.ar})},a.id))]})]})]}),e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:g.map(a=>e.jsx(x,{children:e.jsx(Z,{workshop:a,courses:r})},a.id))})]}),e.jsx(u,{open:c,onOpenChange:l,courses:r})]})]})};export{ve as default};
