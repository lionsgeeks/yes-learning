import{r as N,j as e,m as de,K as ce}from"./app-D1uP6xAc.js";import{c as w,B as j}from"./button-D0NtJzOZ.js";import{C as ne,d as oe}from"./card-DLWXjJMa.js";import{T as me,a as he,b as xe,d as ue}from"./tabs-DByHUxHm.js";import{D as pe,a as je,b as ve,c as fe,d as ye}from"./dialog-yxwbQcQh.js";import{L as p}from"./label-C-gTEHXO.js";import{S as _,a as B,b as P,c as I,d as D,e as O,f as G}from"./select-G6NkXugG.js";import{D as Y,S as J,v as K,d as ge,e as W,c as Ne,b as we,C as Ce}from"./sortable.esm-Cj0FfHxl.js";import{I as v}from"./input-Bv6Tt3c0.js";import{B as be,L as Te,P as De,C as Se,a as Fe,b as ke,c as Ee,p as Ae,d as Le,e as _e,A as Be,f as Pe,g as Ie}from"./index-BUjE1EQW.js";import{P as E}from"./plus-somyGhHr.js";import{T as S}from"./trash-2-ClhlS4JN.js";import{T as $}from"./textarea-CXU7yDQJ.js";import{F as q}from"./file-text-ZeZnulqW.js";import{I as A}from"./image-CKd0u51_.js";import{R as Ve,a as L}from"./radio-group-Bik3tqLK.js";import{V as M}from"./video-D4plvrw0.js";import{F as Q}from"./file--mjGYAm5.js";import{E as $e}from"./external-link-BWRA7NRa.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],X=w("AlignLeft",Me);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],Re=w("ChartLine",ze);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],z=w("ChartNoAxesColumnIncreasing",Ue);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Oe=w("ChartPie",He);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],V=w("GripVertical",Ge);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Z=w("List",qe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],Je=w("Presentation",Ye);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],ee=w("Table",Ke);Se.register(Fe,ke,Ee,Ae,Le,_e,Be,Pe,Ie);function We({content:s,onChange:t}){var m;N.useEffect(()=>{if(!s.data||s.data.length===0){const a=[{name:"Category A",value:40},{name:"Category B",value:30},{name:"Category C",value:20},{name:"Category D",value:10}];t({...s,type:s.type||"bar",data:a})}},[s,t]);const n=()=>{t({...s,data:[...s.data,{name:`Category ${s.data.length+1}`,value:0}]})},o=a=>{t({...s,data:s.data.filter((l,x)=>x!==a)})},i=(a,l,x)=>{const u=[...s.data];u[a]={...u[a],[l]:l==="value"?Number(x):x},t({...s,data:u})},h={labels:s.data.map(a=>a.name),datasets:[{label:"Dataset",data:s.data.map(a=>a.value),backgroundColor:s.type==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},d={responsive:!0,plugins:{title:{display:!0,text:s.title||"Chart Preview"}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"Chart Title"}),e.jsx(v,{id:"title",value:s.title,onChange:a=>t({...s,title:a.target.value}),placeholder:"Enter chart title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"chartType",children:"Chart Type"}),e.jsxs(_,{value:s.type,onValueChange:a=>t({...s,type:a}),children:[e.jsx(B,{id:"chartType",children:e.jsx(P,{placeholder:"Select chart type"})}),e.jsxs(I,{children:[e.jsx(D,{value:"bar",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Bar Chart"]})}),e.jsx(D,{value:"line",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Re,{className:"h-4 w-4 mr-2"}),"Line Chart"]})}),e.jsx(D,{value:"pie",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Pie Chart"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{children:"Chart Data"}),e.jsxs(j,{variant:"outline",size:"sm",onClick:n,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Add Data Point"]})]}),e.jsx("div",{className:"space-y-2 mt-2",children:(m=s.data)==null?void 0:m.map((a,l)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{value:a.name,onChange:x=>i(l,"name",x.target.value),placeholder:"Category name",className:"flex-1"}),e.jsx(v,{type:"number",value:a.value,onChange:x=>i(l,"value",x.target.value),placeholder:"Value",className:"w-24"}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>o(l),disabled:s.data.length<=1,children:e.jsx(S,{className:"h-4 w-4"})})]},l))})]}),e.jsxs("div",{className:"border rounded-md p-4 bg-muted/30",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Chart Preview"}),e.jsx("div",{className:" flex items-center justify-center",children:e.jsxs("div",{className:"text-muted-foreground",children:[s.type==="bar"&&e.jsx(be,{data:h,options:d}),s.type==="line"&&e.jsx(Te,{data:h,options:d}),s.type==="pie"&&e.jsx(De,{data:h,options:d})]})})]})]})}function Qe({content:s,onChange:t}){const n=async o=>{const i=o.target.files?o.target.files[0]:null;if(!i)return;const h=`documents/chapters/${i.name}`;t({...s,file:i,url:h})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"PDF Title"}),e.jsx(v,{id:"title",value:s.title,onChange:o=>t({...s,title:o.target.value}),placeholder:"Enter PDF title"})]}),s.url?e.jsx("div",{className:"bg-muted/30 rounded-md border p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"text-primary mr-3 h-8 w-8"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.title||"PDF Document"}),e.jsx("div",{className:"text-muted-foreground text-sm",children:s.url.split("/").pop()})]})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-center rounded-md border-2 border-dashed p-6",children:[e.jsx("div",{className:"text-muted-foreground mb-4",children:e.jsx(q,{className:"h-12 w-12"})}),e.jsxs("div",{className:"text-muted-foreground flex text-sm",children:[e.jsxs("label",{htmlFor:"pdf-upload",className:"text-primary focus-within:ring-primary relative cursor-pointer rounded-md font-medium focus-within:ring-2 focus-within:outline-none",children:[e.jsx("span",{children:"Upload a PDF"}),e.jsx("input",{id:"pdf-upload",name:"pdf-upload",type:"file",accept:".pdf,.xls,.xlsx,.doc,.docx,.ppt,.pptx",className:"sr-only",onChange:o=>n(o)})]}),e.jsx("p",{className:"pl-1",children:"or enter URL"})]}),e.jsx("p",{className:"text-muted-foreground mt-2 text-xs",children:"PDF up to 50MB"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"description",children:"Description (Optional)"}),e.jsx($,{id:"description",value:s.description,onChange:o=>t({...s,description:o.target.value}),placeholder:"Enter a description of this PDF document",rows:3})]})]})}function Xe({content:s,onChange:t}){async function n(i){const d=new TextEncoder().encode(i.name+Date.now()),m=await crypto.subtle.digest("SHA-256",d),l=Array.from(new Uint8Array(m)).map(u=>u.toString(16).padStart(2,"0")).join(""),x=i.name.split(".").pop();return`${l}.${x}`}const o=async i=>{const h=i.target.files?i.target.files[0]:null;if(!h)return;const d=await n(h),m=new File([h],d,{type:h.type}),a=`image/chapters/${d}`;t({...s,file:m,url:a})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"Image Title"}),e.jsx(v,{accept:"image/png, image/jpeg, image/jpeg",id:"title",value:s.title,onChange:i=>t({...s,title:i.target.value}),placeholder:"Enter image title"})]}),e.jsx("div",{className:"flex flex-col items-center justify-center rounded-md border-2 border-dashed p-6",children:s.url?e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(A,{}),e.jsx("span",{children:s.title})]}),e.jsx(j,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>t({...s,url:""}),children:"Remove Image"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-muted-foreground mb-4",children:e.jsx(A,{className:"h-12 w-12"})}),e.jsxs("div",{className:"text-muted-foreground flex text-sm",children:[e.jsxs("label",{htmlFor:"image-upload",className:"text-primary focus-within:ring-primary relative cursor-pointer rounded-md font-medium focus-within:ring-2 focus-within:outline-none",children:[e.jsx("span",{children:"Upload an image"}),e.jsx("input",{id:"image-upload",name:"image-upload",type:"file",className:"sr-only",onChange:i=>o(i)})]}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-muted-foreground mt-2 text-xs",children:"PNG, JPG, GIF up to 10MB"})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"caption",children:"Caption (Optional)"}),e.jsx(v,{id:"caption",value:s.caption,onChange:i=>t({...s,caption:i.target.value}),placeholder:"Enter image caption"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"altText",children:"Alt Text (for accessibility)"}),e.jsx(v,{id:"altText",value:s.altText,onChange:i=>t({...s,altText:i.target.value}),placeholder:"Describe the image for screen readers"})]})]})]})}function Ze({content:s,onChange:t}){const n=()=>{t({...s,items:[...s.items,""]})},o=(d,m)=>{const a=[...s.items];a[d]=m,t({...s,items:a})},i=d=>{t({...s,items:s.items.filter((m,a)=>a!==d)})},h=d=>{const{active:m,over:a}=d;if(m.id!==(a==null?void 0:a.id)){const l=s.items.indexOf(m.id),x=s.items.indexOf(a==null?void 0:a.id),u=W(s.items,l,x);t({...s,items:u})}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"List Title"}),e.jsx(v,{id:"title",value:s.title,onChange:d=>t({...s,title:d.target.value}),placeholder:"Enter list title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"List Type"}),e.jsxs(Ve,{value:s.type,onValueChange:d=>t({...s,type:d}),className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{value:"bullet",id:"bullet"}),e.jsx(p,{htmlFor:"bullet",children:"Bullet Points"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{value:"numbered",id:"numbered"}),e.jsx(p,{htmlFor:"numbered",children:"Numbered List"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{value:"checklist",id:"checklist"}),e.jsx(p,{htmlFor:"checklist",children:"Checklist"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{children:"List Items"}),e.jsxs(Y,{onDragEnd:h,children:[e.jsx(J,{items:s.items,strategy:K,children:e.jsx("div",{className:"space-y-2",children:s.items.map((d,m)=>e.jsxs("div",{id:d,className:"flex items-center space-x-2",style:{display:"flex",alignItems:"center"},children:[e.jsx("div",{className:"cursor-move",children:e.jsx(V,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx(v,{value:d,onChange:a=>o(m,a.target.value),placeholder:`Item ${m+1}`}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>i(m),disabled:s.items.length<=1,children:e.jsx(S,{className:"h-4 w-4"})})]},m))})}),e.jsx(ge,{children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(V,{className:"h-5 w-5 text-muted-foreground"})})})]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:n,className:"mt-2",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Add Item"]})]})]})}function es({content:s,onChange:t}){N.useEffect(()=>{if(!s.data||s.data.length===0){const a=Array.from({length:s.rows},()=>Array.from({length:s.cols},()=>""));t({...s,data:a})}},[]);const n=(a,l)=>{const x=Array.from({length:a},(u,f)=>Array.from({length:l},(y,C)=>{var F,g;return((g=(F=s.data)==null?void 0:F[f])==null?void 0:g[C])||""}));t({...s,rows:a,cols:l,data:x})},o=(a,l,x)=>{const u=s.data.map(f=>[...f]);u[a][l]=x,console.log(u),t({...s,data:u})},i=()=>n(s.rows+1,s.cols),h=()=>s.rows>1&&n(s.rows-1,s.cols),d=()=>n(s.rows,s.cols+1),m=()=>s.cols>1&&n(s.rows,s.cols-1);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"Table Title"}),e.jsx(v,{id:"title",value:s.title,onChange:a=>t({...s,title:a.target.value}),placeholder:"Enter table title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{children:"Table Dimensions"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(j,{variant:"outline",size:"sm",onClick:h,disabled:s.rows<=1,children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),"Row"]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:i,children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),"Row"]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:m,disabled:s.cols<=1,children:[e.jsx(S,{className:"h-3 w-3 mr-1"}),"Column"]}),e.jsxs(j,{variant:"outline",size:"sm",onClick:d,children:[e.jsx(E,{className:"h-3 w-3 mr-1"}),"Column"]})]})]}),e.jsx("div",{className:"border rounded-md overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:Array.from({length:s.cols}).map((a,l)=>{var x,u;return e.jsx("th",{className:"border p-2",children:e.jsx(v,{value:((u=(x=s.data)==null?void 0:x[0])==null?void 0:u[l])||"",onChange:f=>o(0,l,f.target.value),placeholder:`Header ${l+1}`,className:"border-0 p-0 h-8 bg-transparent"})},l)})})}),e.jsx("tbody",{children:Array.from({length:s.rows-1}).map((a,l)=>e.jsx("tr",{children:Array.from({length:s.cols}).map((x,u)=>{var f,y;return e.jsx("td",{className:"border p-2",children:e.jsx(v,{value:((y=(f=s.data)==null?void 0:f[l+1])==null?void 0:y[u])||"",onChange:C=>o(l+1,u,C.target.value),placeholder:`Cell ${l+1},${u+1}`,className:"border-0 p-0 h-8"})},u)})},l+1))})]})})]})]})}function ss({content:s,onChange:t}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"Section Title"}),e.jsx(v,{id:"title",value:s.title,onChange:n=>t({...s,title:n.target.value}),placeholder:"Enter section title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"body",children:"Content"}),e.jsx($,{id:"body",value:s.body,onChange:n=>t({...s,body:n.target.value}),placeholder:"Enter text content here...",rows:6})]})]})}function as({content:s,onChange:t}){const n=i=>{const h=i.target.value;t({...s,url:h})};function o(i){const h=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,d=i.match(h);return d&&d[1]}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"title",children:"Video Title"}),e.jsx(v,{id:"title",value:s.title,onChange:i=>t({...s,title:i.target.value}),placeholder:"Enter video title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"url",children:"Video URL"}),e.jsx(v,{id:"url",value:s.url,onChange:n,placeholder:"Enter YouTube, Vimeo, or other video URL"})]}),s.url?e.jsx("div",{className:"aspect-video bg-muted rounded-md flex items-center justify-center",children:s.url.includes("youtube.com")||s.url.includes("vimeo.com")?e.jsx("iframe",{width:"866",height:"487",src:`https://www.youtube.com/embed/${o(s.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Invalid video URL"})}):e.jsxs("div",{className:"border-2 border-dashed rounded-md p-6 flex flex-col items-center justify-center aspect-video",children:[e.jsx("div",{className:"mb-4 text-muted-foreground",children:e.jsx(M,{className:"h-12 w-12"})}),e.jsx("div",{className:"flex text-sm text-muted-foreground",children:e.jsx("p",{className:"pl-1",children:"Only YouTube or Vimeo videos are allowed"})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Please insert a valid link"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"caption",children:"Caption (Optional)"}),e.jsx($,{id:"caption",value:s.caption,onChange:i=>t({...s,caption:i.target.value}),placeholder:"Enter video caption or description",rows:3})]})]})}function Cs({blocks:s,onBlocksChange:t,lang:n,courses:o}){var R;const{post:i,setData:h}=de({chapter_id:"",language:n,block:""}),[d,m]=N.useState(null);console.log(o);const a=r=>{const c={id:`block-${Date.now()}`,type:r,content:te(r)};t([...s,c]),m(c.id)},l=(r,c)=>{t(s.map(b=>b.id===r?{...b,content:c}:b))},x=r=>{t(s==null?void 0:s.filter(c=>c.id!==r)),d===r&&m(null)},u=r=>{const{active:c,over:b}=r;if(!b||c.id===b.id)return;const U=s.findIndex(T=>T.id===c.id),H=s.findIndex(T=>T.id===b.id);if(U!==-1&&H!==-1){const T=W(s,U,H);t(T)}},[f,y]=N.useState(!1),[C,F]=N.useState(null),[g,se]=N.useState(null),[k,ae]=N.useState(null),te=r=>{switch(r){case"text":return{title:"New Text Section",body:""};case"image":return{title:"New Image",url:"",caption:"",altText:""};case"document":return{title:"New File",url:"",caption:""};case"video":return{title:"New Video",url:"",caption:""};case"list":return{title:"New List",items:["Item 1"],type:"bullet"};case"table":return{title:"New Table",rows:3,cols:3,data:Array(3).fill(Array(3).fill(""))};case"chart":return{title:"New Chart",type:"bar",data:[]};default:return{}}},re=r=>{switch(r.type){case"text":return e.jsx(ss,{content:r.content,onChange:c=>l(r.id,c)});case"image":return e.jsx(Xe,{content:r.content,onChange:c=>l(r.id,c)});case"video":return e.jsx(as,{content:r.content,onChange:c=>l(r.id,c)});case"list":return e.jsx(Ze,{content:r.content,onChange:c=>l(r.id,c)});case"table":return e.jsx(es,{content:r.content,onChange:c=>l(r.id,c)});case"chart":return e.jsx(We,{content:r.content,onChange:c=>l(r.id,c)});case"document":return e.jsx(Qe,{content:r.content,onChange:c=>l(r.id,c)});default:return e.jsx("div",{children:"Unknown block type"})}};console.log("selected course : ",g);const le=r=>{y(!0),F(r),console.log("block : ",r)};N.useEffect(()=>{h({chapter_id:k,language:n,block:C})},[k,C,n]);const ie=async()=>{h({chapter_id:k,language:n,block:C}),i(route("chapter.share"),{onFinish:()=>{y(!1)}})};return e.jsxs("div",{dir:n==="ar"?"rtl":"ltr",className:"space-y-4",children:[e.jsx("div",{className:"flex flex-col space-y-4",children:e.jsx(Y,{collisionDetection:Ne,onDragEnd:u,children:e.jsx(J,{items:s.map(r=>r.id),strategy:K,children:e.jsx("div",{className:"space-y-4",children:(s==null?void 0:s.length)===0?e.jsxs("div",{className:"rounded-md border-2 border-dashed py-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No content blocks yet"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-sm",children:"Add your first content block using the buttons below"})]}):s.map(r=>e.jsx(ts,{block:r,activeBlockId:d,setActiveBlockId:m,removeBlock:x,renderBlockEditor:re,handleShareBlock:le},r.id))})})})}),e.jsxs("div",{className:"rounded-md border p-4",children:[e.jsx("h3",{className:"mb-3 p-3 text-sm font-medium",children:"Add Content Block"}),e.jsxs(me,{defaultValue:"basic",className:"w-full",children:[e.jsx(he,{className:"w-full",children:e.jsx(xe,{value:"basic",children:"Add Chapter Content"})}),e.jsx(ue,{value:"basic",children:e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 sm:grid-cols-3",children:[e.jsxs(j,{variant:"outline",className:"justify-start",onClick:()=>a("text"),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Text"]}),e.jsxs(j,{variant:"outline",className:"justify-start",onClick:()=>a("list"),children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"List"]}),e.jsxs(j,{variant:"outline",className:"justify-start",onClick:()=>a("image"),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Image"]}),e.jsxs(j,{variant:"outline",className:"justify-start",onClick:()=>a("video"),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Video"]}),e.jsxs(j,{variant:"outline",className:"justify-start",onClick:()=>a("table"),children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Table"]}),e.jsxs(j,{variant:"outline",className:"justify-start",onClick:()=>a("chart"),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Chart"]}),e.jsxs(j,{variant:"outline",className:"justify-start",onClick:()=>a("document"),children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Document"]})]})})]})]}),e.jsx(pe,{open:f,onOpenChange:y,children:e.jsxs(je,{className:"sm:max-w-[425px]",children:[e.jsx(ve,{children:e.jsx(fe,{children:"Share block"})}),e.jsx(p,{children:"Choose Course :"}),e.jsxs(_,{onValueChange:se,children:[e.jsx(B,{className:"",children:e.jsx(P,{placeholder:"Select a course"})}),e.jsx(I,{children:e.jsxs(O,{children:[e.jsx(G,{children:"Courses"}),o==null?void 0:o.map((r,c)=>e.jsx(D,{value:r,children:r.name.en},c))]})})]}),e.jsx(p,{children:"Choose Chapter :"}),e.jsxs(_,{onValueChange:ae,children:[e.jsx(B,{className:"",children:e.jsx(P,{placeholder:"Select a chapter"})}),e.jsx(I,{children:e.jsxs(O,{children:[e.jsx(G,{children:"Chapters"}),(R=g==null?void 0:g.chapters)==null?void 0:R.map((r,c)=>e.jsx(D,{value:r.id,children:r.title.en},c))]})})]}),e.jsxs(ye,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(j,{type:"button",onClick:ie,disabled:!g||!k,children:"Share"})]})]})})]})}function ts({block:s,activeBlockId:t,setActiveBlockId:n,removeBlock:o,renderBlockEditor:i,handleShareBlock:h}){const{attributes:d,listeners:m,setNodeRef:a,transform:l,transition:x}=we({id:s.id}),{url:u}=ce();return e.jsxs(ne,{ref:a,style:{transform:Ce.Transform.toString(l),transition:x},className:`${t===s.id?"ring-primary ring-2":""} p-2`,children:[e.jsxs("div",{className:"bg-muted/50 flex items-center border-b p-3",children:[e.jsx("div",{...m,...d,className:"mr-2 cursor-move",children:e.jsx(V,{className:"text-muted-foreground h-5 w-5"})}),e.jsx("div",{className:"flex-1 font-medium",children:s.content.title||`${s.type.charAt(0).toUpperCase()+s.type.slice(1)} Block`}),u.includes("edit")&&e.jsx(j,{variant:"ghost",onClick:()=>h(s),children:e.jsx($e,{className:"h-4 w-4"})}),e.jsxs(j,{variant:"ghost",size:"icon",onClick:()=>n(t===s.id?null:s.id),children:[s.type==="text"&&e.jsx(X,{className:"h-4 w-4"}),s.type==="image"&&e.jsx(A,{className:"h-4 w-4"}),s.type==="video"&&e.jsx(M,{className:"h-4 w-4"}),s.type==="list"&&e.jsx(Z,{className:"h-4 w-4"}),s.type==="table"&&e.jsx(ee,{className:"h-4 w-4"}),s.type==="chart"&&e.jsx(z,{className:"h-4 w-4"}),s.type==="presentation"&&e.jsx(Je,{className:"h-4 w-4"}),s.type==="document"&&e.jsx(Q,{className:"h-4 w-4"})]}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>o(s.id),className:"text-destructive",children:e.jsx(S,{className:"h-4 w-4"})})]}),t===s.id&&e.jsx(oe,{className:"p-4",children:i(s)})]})}export{Cs as C};
