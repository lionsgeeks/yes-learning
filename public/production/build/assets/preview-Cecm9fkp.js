import{K as R,r as u,j as e,L as H,$ as K,S as W}from"./app-D1uP6xAc.js";import{B as P}from"./badge-BHte1J5J.js";import{B as h}from"./button-D0NtJzOZ.js";import{C as $,a as q,b as G,d as T}from"./card-DLWXjJMa.js";import{A as J,D as U,a as X,b as Y,c as Z}from"./app-layout-CES0yGId.js";import{S as k}from"./scroll-area-DZmHAQmz.js";import{T as ee,a as se,b as te,c as ae}from"./tabs-DByHUxHm.js";import{B as re,L as ne,P as ie,C as le,a as ce,b as de,c as oe,p as me,d as xe,e as he,A as pe,f as ue,g as je}from"./index-BUjE1EQW.js";import{C as A}from"./chevron-left-uJGV0o8b.js";import{B as fe}from"./book-open-CmKOxast.js";import{C as ge}from"./chevron-down-B09WZ6Nv.js";import{C as Ne}from"./circle-check-big-BZHtXYhu.js";import{F as ve}from"./file-text-ZeZnulqW.js";import{D as ye}from"./download-DN-24FMV.js";import{C as _}from"./sidebar-CJIwj5Jk.js";import"./index-CgCsWYJI.js";import"./index-CyAHaNaG.js";import"./index-Dmu8fun0.js";import"./index-BdQq_4o_.js";le.register(ce,de,oe,me,xe,he,pe,ue,je);const He=()=>{var v;const{course:p,chapters:c,auth:f}=R().props,[E,g]=u.useState((v=c[0])==null?void 0:v.id),[n,F]=u.useState("en"),[i,j]=u.useState(1),[we,M]=u.useState(0),N=t=>{M(t/c.length*100)},z=[{title:p.name[n],href:`/course/${p.id}`}],I=()=>{j(i+1),N(i),g(E+1)};function V(t){const a=t.content,l={labels:a.data.map(m=>m.name),datasets:[{label:"Dataset",data:a.data.map(m=>m.value),backgroundColor:a.type==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},d={responsive:!0,plugins:{title:{display:!0,text:a.title||"Chart Preview"}}};return e.jsx("div",{className:"bg- rounded-md",children:e.jsx("div",{className:"h-full w-full",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"",children:[t.content.type==="bar"&&e.jsx(re,{data:l,options:d}),t.content.type==="line"&&e.jsx(ne,{data:l,options:d}),t.content.type==="pie"&&e.jsx(ie,{data:l,options:d})]})})})})}function O(t){const a=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,l=t.match(a);return l&&l[1]}return e.jsxs(J,{breadcrumbs:z,children:[e.jsx(H,{title:p.name[n]}),e.jsxs("div",{dir:n==="ar"?"rtl":"ltr",children:[e.jsxs("div",{className:"p-6",children:[e.jsxs(K,{href:"/admin/courses",className:"text-muted-foreground hover:text-foreground inline-flex items-center text-sm transition-colors",children:[e.jsx(A,{className:"mr- h-4 w-4"}),"Back to Courses"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:p.name[n]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(P,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(fe,{className:"mr-1 h-3 w-3"}),c.length," lessons"]})})]})]}),e.jsx("div",{className:"p-4",children:e.jsxs(U,{className:"",children:[e.jsx(X,{asChild:!0,children:e.jsxs(h,{variant:"ghost",size:"sm",className:"h-8",children:[n==="en"?"English":n==="ar"?"العربية ":"Français"," ",e.jsx(ge,{className:"ml-1 h-4 w-4"})]})}),e.jsx(Y,{align:"end",children:["en","ar","fr"].map(t=>e.jsx(Z,{onClick:()=>F(t),children:e.jsx("span",{className:"mr-2",children:t})},t))})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 p-6 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs($,{children:[e.jsx(q,{className:"py-",children:e.jsx(G,{className:"text-lg",children:"Course Content"})}),e.jsx(T,{className:"p-0",children:e.jsx(k,{className:"h-[calc(100vh-300px)]",children:e.jsx("div",{className:"space-y-1 p-2",children:c.map((t,a)=>e.jsx("div",{onClick:()=>{j(a+1),N(a+1),g(t.id)},className:`flex cursor-pointer items-center justify-between rounded-md px-2 py-1.5 text-sm transition-colors ${a+1===i?"bg-primary/80 text-primary-foreground":"hover:bg-muted"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[t.hasQuiz&&e.jsx(P,{variant:"outline",className:"h-5 px-1 text-[10px]",children:"Quiz"}),e.jsx("span",{className:a+1===i?"":"text-muted-foreground text-xs",children:t.estimated_duration[n]}),e.jsx("span",{className:a+1===i?"":"text-muted-foreground",children:t.title[n]})]})},a))})})})]})}),e.jsxs("div",{dir:f.user.language==="ar"?"rtl":"ltr",className:"lg:col-span-9",children:[e.jsx($,{className:"overflow-hidden",children:e.jsx(T,{className:"",children:e.jsxs(ee,{defaultValue:"content",children:[e.jsx(se,{className:"mb-4",children:e.jsx(te,{value:"content",children:" Lesson Content"})}),e.jsxs(ae,{value:"content",className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-xl font-medium",children:c[0].title[n]})}),e.jsx("div",{dir:f.user.language==="ar"?"rtl":"ltr",className:"prose max-w-none",children:c.flatMap((t,a)=>{var l;return(l=t==null?void 0:t.content[n])==null?void 0:l.flatMap((d,m)=>{var y;return(y=d==null?void 0:d.blocks)==null?void 0:y.map((s,Q)=>{var w,C,b,S,D;return a+1===i&&e.jsxs("div",{className:"rounded-md p-4",children:[s.content.title&&e.jsx("h3",{className:"mb-2 font-medium",children:s.content.title}),s.type==="text"&&s.content.body&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:s.content.body})}),s.type==="image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("img",{src:`/storage/${s.content.url}`,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="video"&&s.content.url&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("iframe",{width:"866",height:"487",src:`https://www.youtube.com/embed/${O(s.content.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="list"&&e.jsx("div",{children:s.content.type==="bullet"?e.jsx("ul",{className:"list-disc space-y-1 pl-5",children:(w=s.content.items||["Sample item"])==null?void 0:w.map((o,r)=>e.jsx("li",{children:o},r))}):s.content.type==="numbered"?e.jsx("ol",{className:"list-decimal space-y-1 pl-5",children:(C=s.content.items||["Sample item"])==null?void 0:C.map((o,r)=>e.jsx("li",{children:o},r))}):e.jsx("div",{className:"space-y-2",children:(b=s.content.items||["Sample item"])==null?void 0:b.map((o,r)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{className:"text-primary mr-2 h-4 w-4"}),e.jsx("span",{children:o})]},r))})}),s.type==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:(S=Array.from({length:s.content.cols||3}))==null?void 0:S.map((o,r)=>{var x;return e.jsx("th",{className:"border p-2 text-left",children:(x=s.content)==null?void 0:x.data[0][r]},r)})})}),e.jsx("tbody",{children:(D=Array.from({length:s.content.rows-1||3}))==null?void 0:D.map((o,r)=>{var x;return e.jsx("tr",{children:(x=Array.from({length:s.content.cols||3}))==null?void 0:x.map((Ce,B)=>{var L;return e.jsx("td",{className:"border p-2",children:(L=s.content)==null?void 0:L.data[r+1][B]},B)})},r)})})]})}),s.type==="chart"&&V(s),s.type==="document"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs("div",{className:"bg-muted/30 flex items-center justify-between border-b p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("div",{className:"font-medium",children:e.jsx("span",{children:s.content.title||"PDF Document"})})]}),e.jsx("a",{href:`/storage/${s.content.url}`,target:"_blank",download:!0,children:e.jsxs(h,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Download"]})})]})}),s.content.description&&e.jsx("p",{className:"text-muted-foreground text-sm",children:s.content.description})]})]},`${a}-${m}-${Q}`)})})})})]})]})})}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[i>1&&e.jsxs(h,{variant:"outline",onClick:()=>j(i-1),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Previous Lesson"]}),i===c.length?e.jsxs(h,{onClick:()=>W.visit("/admin/courses"),children:["Back to courses",e.jsx(_,{className:"ml-2 h-4 w-4"})]}):e.jsxs(h,{onClick:()=>{I()},children:["Next",e.jsx(_,{className:"ml-2 h-4 w-4"})]})]})]})]})]})]})};export{He as default};
