import{r as C,m as P,j as e,L as R,$ as k}from"./app-BO2Erc1k.js";import{A as _,D as B,a as Q,b as V,c as D}from"./app-layout-DWGmey9C.js";import{c as z,B as m}from"./button-Bo_LbEuX.js";import{C as F,a as I,b as A,d as E,e as S,c as G}from"./card-BcU8RAaX.js";import{B as p}from"./badge-sg1cCvKz.js";import{D as H,a as J,b as K,c as X,e as Y,d as Z}from"./dialog-I1RqCxJl.js";import{I as h}from"./input-COSAMtAb.js";import{L as d}from"./label-Bqb7aRek.js";import{T as W}from"./textarea-BwgXVmor.js";import{S as ee,a as se,b as te,c as ae,d as re}from"./select-DfsXUpRv.js";import{S as g}from"./switch-0bwDiVTA.js";import{T as $,a as M,b as j,c as T}from"./tabs-7DVaec6h.js";import{C as L}from"./index-Dl5nQ3KP.js";import{C as ie}from"./chevron-left-CmsAlM-d.js";import{D as ne,C as le}from"./delete-workshop-dialog-CbtrXmYw.js";import{i as ce}from"./isPast-CMtZTBm5.js";import{C as q}from"./calendar-CtxrN4st.js";import{U as O}from"./users-BvBm0Bar.js";import{T as de}from"./triangle-alert-BK9adC8V.js";import{C as oe}from"./circle-check-big-t1nT4U1l.js";import{f as U}from"./format-ymR-pL-R.js";import{A as me}from"./arrow-left-B6HBT3vM.js";import{E as xe}from"./alert-dialog-BdoB9muQ.js";import{G as he}from"./globe-DK5rp3vz.js";import{P as pe}from"./plus-bcunI6PJ.js";import"./index-DdbgeCqb.js";import"./index-DXSOa7z7.js";import"./index-B1FhypQQ.js";import"./book-open-B6vd86xF.js";import"./index-BdQq_4o_.js";import"./chevron-down-TiK4eFmA.js";import"./check-BftTAXPi.js";import"./loader-circle-Bla19TVU.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],je=z("CircleCheck",ue);function fe({open:t,onOpenChange:n,chapters:u,workshop:w}){const[l,x]=C.useState(1),{data:a,setData:r,post:y,processing:f,errors:c}=P({name:{en:"",fr:"",ar:""},description:{en:"",fr:"",ar:""},workshop_id:w,prerequisite:{en:"",fr:"",ar:""},chapter_id:"",date:"",time:"",duration:"90",instructor:{en:"",fr:"",ar:""},meetLink:{en:"",fr:"",ar:""},allowQuestions:!0,requireRegistration:!0,sendNotifications:!0,notificationTime:"24h",published:!1}),N=()=>{x(s=>Math.min(s+1,3))},v=()=>{x(s=>Math.max(s-1,1))},i=()=>{y(route("sub-workshop.store"),{onSuccess:()=>{n(!1),x(1)}})},b=a.name&&a.description&&a.date&&a.time&&a.duration;return e.jsx(H,{open:t,onOpenChange:s=>{n(s),s||x(1)},children:e.jsxs(J,{className:"max-w-3xl",children:[e.jsxs(K,{children:[e.jsx(X,{children:"Add Sub-Workshop"}),e.jsx(Y,{children:l===1?"Enter basic information about the sub-workshop":l===2?"Configure instructor settings":"Set sub-workshop preferences and notification settings"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Step ",l," of 3"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l===1?"Basic Info":l===2?"Instructor Settings":"Preferences"})]}),e.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-muted",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all",style:{width:`${l/3*100}%`}})})]}),l===1&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs($,{defaultValue:"en",children:[e.jsxs(M,{className:"grid w-full grid-cols-3",children:[e.jsx(j,{value:"en",children:"English"}),e.jsx(j,{value:"fr",children:"French"}),e.jsx(j,{value:"ar",children:"Arabic"})]}),["en","fr","ar"].map(s=>e.jsx(T,{value:s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:`name-${s}`,children:["Sub-Workshop Title (",s.toUpperCase(),")"]}),e.jsx(h,{id:`name-${s}`,placeholder:`name (${s.toUpperCase()})`,value:a.name[`${s}`],onChange:o=>r("name",{...a.name,[`${s}`]:o.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:`description-${s}`,children:["description (",s.toUpperCase(),")"]}),e.jsx(h,{id:`description-${s}`,placeholder:`description (${s.toUpperCase()})`,value:a.description[`${s}`],onChange:o=>r("description",{...a.description,[`${s}`]:o.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:`prerequisite-${s}`,children:["prerequisite (",s.toUpperCase(),")"]}),e.jsx(W,{id:`prerequisite-${s}`,placeholder:`prerequisite (${s.toUpperCase()})`,value:a.prerequisite[`${s}`],onChange:o=>r("prerequisite",{...a.prerequisite,[`${s}`]:o.target.value})})]})]})},s))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"course",children:"Associated chapter"}),e.jsxs(ee,{value:a.chapter_id,onValueChange:s=>r("chapter_id",s),children:[e.jsx(se,{id:"course",children:e.jsx(te,{placeholder:"Select a course"})}),e.jsx(ae,{children:u.map(s=>e.jsx(re,{value:s.id,children:s.title.en},s.id))})]}),c.chapter_id&&e.jsx("p",{className:"text-sm text-red-500",children:c.chapter_id})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"date",children:"Date"}),e.jsx(h,{id:"date",type:"date",value:a.date,onChange:s=>r("date",s.target.value),error:c.date}),c.date&&e.jsx("p",{className:"text-sm text-red-500",children:c.date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"time",children:"Time"}),e.jsx(h,{id:"time",type:"time",value:a.time,onChange:s=>r("time",s.target.value),error:c.time}),c.time&&e.jsx("p",{className:"text-sm text-red-500",children:c.time})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"duration",children:"Duration (minutes)"}),e.jsx(h,{id:"duration",type:"number",placeholder:"90",value:a.duration,onChange:s=>r("duration",s.target.value),error:c.duration}),c.duration&&e.jsx("p",{className:"text-sm text-red-500",children:c.duration})]})]})]}),l===2&&e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs($,{defaultValue:"en",children:[e.jsxs(M,{className:"grid w-full grid-cols-3",children:[e.jsx(j,{value:"en",children:"English"}),e.jsx(j,{value:"fr",children:"French"}),e.jsx(j,{value:"ar",children:"Arabic"})]}),["en","fr","ar"].map(s=>e.jsx(T,{value:s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:`instructor-${s}`,children:["Instructor (",s.toUpperCase(),")"]}),e.jsx(h,{id:`instructor-${s}`,placeholder:`Instructor (${s.toUpperCase()})`,value:a.instructor[`${s}`],onChange:o=>r("instructor",{...a.instructor,[`${s}`]:o.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{htmlFor:`meetLink-${s}`,children:["Google Meet Link (",s.toUpperCase(),")"]}),e.jsx(h,{id:`meetLink-${s}`,placeholder:"https://meet.google.com/...",value:a.meetLink[`${s}`],onChange:o=>r("meetLink",{...a.meetLink,[`${s}`]:o.target.value})})]})]})},s))]})}),l===3&&e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{children:"Allow Questions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable Q&A during the workshop"})]}),e.jsx(g,{checked:a.allowQuestions,onCheckedChange:s=>r("allowQuestions",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{children:"Require Registration"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Students must register before joining"})]}),e.jsx(g,{checked:a.requireRegistration,onCheckedChange:s=>r("requireRegistration",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{children:"Send Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify enrolled students about this workshop"})]}),e.jsx(g,{checked:a.sendNotifications,onCheckedChange:s=>r("sendNotifications",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{children:"Publish Sub-Workshop"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this sub-workshop visible to students"})]}),e.jsx(g,{checked:a.published,onCheckedChange:s=>r("published",s)})]})]})}),e.jsx(Z,{children:l===1?e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsxs(m,{onClick:N,disabled:!b,children:["Next",e.jsx(L,{className:"ml-2 h-4 w-4"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(m,{variant:"outline",onClick:v,children:[e.jsx(ie,{className:"mr-2 h-4 w-4"}),"Back"]}),l===2?e.jsxs(m,{onClick:N,children:["Next",e.jsx(L,{className:"ml-2 h-4 w-4"})]}):e.jsx(m,{onClick:i,disabled:f,children:f?"Creating...":"Create Sub-Workshop"})]})})]})})}function Ne({subWorkshop:t}){const n=[];t.date||n.push("date"),t.time||n.push("time"),t.instructor.en||n.push("instructor"),t.meetLink||n.push("meet link");const u=t.date&&ce(new Date(`${t.date} ${t.time}`));return e.jsxs(F,{className:"overflow-hidden transition-all hover:shadow-md h-full flex flex-col",children:[e.jsx(I,{className:"pb-2",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx(A,{className:"text-lg",children:t.name.en}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(p,{variant:"outline",className:"text-xs",children:t.subCourse}),e.jsx(p,{variant:"secondary",className:"text-xs uppercase",children:t.language})]})]})})}),e.jsx(E,{className:"pb-2 flex-grow",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[t.description.en&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:t.description.en}),t.date&&e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(q,{className:"mr-1 h-4 w-4"}),e.jsx("span",{children:U(new Date(t.date),"MMM d, yyyy")}),t.time&&e.jsxs("span",{className:"ml-1",children:["at ",t.time]}),u&&e.jsx(p,{variant:"outline",className:"ml-2 text-xs text-muted-foreground",children:"Passed"})]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(O,{className:"mr-1 h-4 w-4"}),e.jsxs("span",{children:[t.users.length," Students"]})]}),t.instructor.en&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Instructor:"}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:e.jsx("span",{children:t.instructor.en})})]})]})}),n.length>0&&e.jsx(S,{className:"border-t bg-amber-50 px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-600 w-full",children:[e.jsx(de,{className:"h-4 w-4 flex-shrink-0"}),e.jsxs("span",{className:"text-xs",children:["Missing: ",n.join(", ")]})]})}),u&&n.length===0?e.jsx(S,{className:"border-t bg-muted px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground w-full",children:[e.jsx(je,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-xs",children:"Completed"})]})}):e.jsx(S,{className:"border-t bg-muted px-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground w-full",children:[e.jsx(oe,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"text-xs",children:"Soon"})]})})]})}const ve=[{title:"Workshops",href:"/admin/workshop/detail"}],We=({workshop:t,subWorkshops:n,chapters:u,courses:w})=>{const[l,x]=C.useState(!1),[a,r]=C.useState(!1),[y,f]=C.useState(!1),c=new Date,N=n.filter(i=>new Date(`${i.date} ${i.time}`)>c).sort((i,b)=>new Date(i.date).getTime()-new Date(b.date).getTime()),v=N.length>0?N[0]:null;return e.jsxs(_,{breadcrumbs:ve,children:[e.jsx(R,{title:"Workshop Detail"}),e.jsxs("div",{className:"container mx-auto p-3 lg:p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center",children:[e.jsx(m,{variant:"ghost",size:"icon",asChild:!0,className:"mr-2",children:e.jsx(k,{href:"/admin/workshops",children:e.jsx(me,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h1",{className:"text-2xl font-bold",children:JSON.parse(t.name).en})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.course.name.en})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex gap-2 jus",children:e.jsxs(B,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(m,{variant:"outline",size:"icon",children:e.jsx(xe,{className:"h-4 w-4"})})}),e.jsxs(V,{align:"end",children:[e.jsx(D,{onClick:i=>{i.preventDefault(),i.stopPropagation(),r(!0)},children:"Edit Workshop"}),e.jsx(D,{className:"text-destructive",onClick:i=>{i.preventDefault(),i.stopPropagation(),x(!0)},children:"Delete Workshop"}),e.jsx(ne,{open:l,onOpenChange:x,workshopTitle:t.name,workshopId:t.id})]})]})})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(F,{className:"md:col-span-2",children:[e.jsxs(I,{className:"pb-2",children:[e.jsx(A,{children:"Workshop Overview"}),e.jsx(G,{children:JSON.parse(t.description).en})]}),e.jsx(E,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Course"}),e.jsx(p,{variant:"outline",className:"mt-1",children:t.course.name.en})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Enrollment"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:"Students"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Languages"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(p,{variant:"secondary",className:"text-xs",children:"EN"}),e.jsx(p,{variant:"secondary",className:"text-xs",children:"FR"}),e.jsx(p,{variant:"secondary",className:"text-xs",children:"AR"})]})]})]}),v&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Next Session"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(q,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[U(new Date(v.date),"MMM d, yyyy")," at ",v.time]})]})]})]})})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Sub-Workshops"}),e.jsxs(m,{onClick:()=>f(!0),children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Add Sub-Workshop"]})]}),e.jsx("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3",children:n.map(i=>e.jsx(k,{href:`/admin/sub-workshop/${i.id}`,children:e.jsx(Ne,{subWorkshop:i})},i.id))})]})]}),e.jsx(fe,{open:y,onOpenChange:f,chapters:u,workshop:t.id})]}),e.jsx(le,{open:a,onOpenChange:r,workshop:t,courses:w})]})};export{We as default};
