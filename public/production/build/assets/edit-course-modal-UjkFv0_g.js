import{r as m,m as I,j as e}from"./app-D1uP6xAc.js";import{B as u}from"./button-D0NtJzOZ.js";import{D as E,a as L,b as k,c as P,e as R,d as B}from"./dialog-yxwbQcQh.js";import{I as t}from"./input-Bv6Tt3c0.js";import{L as l}from"./label-C-gTEHXO.js";import{T as G,a as U,b as x,c as g}from"./tabs-DByHUxHm.js";import{T as j}from"./textarea-CXU7yDQJ.js";import{X as A}from"./sidebar-CJIwj5Jk.js";import{I as M}from"./image-CKd0u51_.js";function W({open:y,onOpenChange:h,course:s}){const[f,b]=m.useState(!1),[C,w]=m.useState("details"),[v,p]=m.useState(null),{data:a,setData:c,post:F}=I({id:s.id,name:{en:s.name.en,fr:s.name.fr,ar:s.name.ar},description:{en:s.description.en,ar:s.description.ar,fr:s.description.fr},label:{en:s.label.en,fr:s.label.fr,ar:s.label.ar},published:s.published,image:s.image});m.useEffect(()=>{p(a.image)},[a.image]);const D=async n=>{n.preventDefault(),b(!0),F(route("course.update",{_method:"put",data:a,course:s.id})),b(!1),h(!1)},r=n=>{const[i,o]=n.target.name.split("."),d=n.target.value;i=="published"?c("published",!a.published):c(N=>({...N,[i]:{...N[i],[o]:d}}))},S=n=>{var o;const i=(o=n.target.files)==null?void 0:o[0];if(i){c("image",i);const d=new FileReader;d.onloadend=()=>{d.result&&p(d.result)},d.readAsDataURL(i)}},T=()=>{p(null),c("image",null)};return e.jsx(E,{open:y,onOpenChange:h,children:e.jsx("div",{className:"p-5",children:e.jsxs(L,{className:"h-[90%] overflow-y-auto sm:max-w-[500px]",children:[e.jsxs(k,{children:[e.jsx(P,{children:"Edit Course"}),e.jsx(R,{children:"Update your course details. Click save when you're done."})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6 py-4",encType:"multipart/form-data",children:[e.jsxs(G,{value:C,onValueChange:w,className:"space-y-4",children:[e.jsxs(U,{className:"grid w-full grid-cols-3",children:[e.jsx(x,{value:"en",children:"English"}),e.jsx(x,{value:"fr",children:"Français"}),e.jsx(x,{value:"ar",children:"العربية "})]}),e.jsx(g,{value:"en",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name.en",children:"Course Name"}),e.jsx(t,{id:"name.en",name:"name.en",placeholder:"Enter Course name",value:a.name.en,onChange:r,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"label.en",children:"Label"}),e.jsx(t,{id:"label.en",name:"label.en",placeholder:"Enter Course Label",value:a.label.en,onChange:r,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-",children:[e.jsx(l,{htmlFor:"description.en",children:"Description"}),e.jsx(j,{id:"description.en",name:"description.en",placeholder:"Enter Course description",value:a.description.en,onChange:r,className:"mt-3 w-full rounded-lg border p-3"})]})]})}),e.jsx(g,{value:"fr",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name.fr",children:"Nom du cours"}),e.jsx(t,{id:"name.fr",name:"name.fr",placeholder:"Saisir le nom du cours",value:a.name.fr,onChange:r,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"label.fr",children:"Libellé"}),e.jsx(t,{id:"label.fr",name:"label.fr",placeholder:"Saisir le libellé du cours",value:a.label.fr,onChange:r,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-",children:[e.jsx(l,{htmlFor:"description.fr",children:"Description"}),e.jsx(j,{id:"description.fr",name:"description.fr",placeholder:"Saisir la description du cours",value:a.description.fr,onChange:r,className:"mt-3 w-full rounded-lg border p-3"})]})]})}),e.jsx(g,{value:"ar",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs("div",{dir:"rtl",className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name.ar",children:"اسم الدورة"}),e.jsx(t,{id:"name.ar",name:"name.ar",placeholder:"أدخل اسم الدورة",value:a.name.ar,onChange:r,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"label.ar",children:"التصنيف"}),e.jsx(t,{id:"label.ar",name:"label.ar",placeholder:"أدخل تصنيف الدورة",value:a.label.ar,onChange:r,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-",children:[e.jsx(l,{htmlFor:"description.ar",children:"الوصف"}),e.jsx(j,{id:"description.ar",name:"description.ar",placeholder:"أدخل وصف الدورة",value:a.description.ar,onChange:r,className:"mt-3 w-full rounded-lg border p-3"})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsx("input",{type:"checkbox",id:"published",name:"published",className:"text-primary focus:ring-primary h-4 w-4 rounded border-gray-300",checked:a.published,onChange:r}),e.jsx(l,{htmlFor:"auto-award",children:"Publish this course"})]}),e.jsx("div",{className:"border-muted space-y- relative flex flex-col items-center gap-y-2 rounded-lg border-2 border-dashed p-3",children:v?e.jsxs("div",{className:"reletive mt-4",children:[e.jsx(u,{variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-8 w-8 rounded-full",onClick:T,children:e.jsx(A,{className:"h-4 w-4"})}),e.jsx("img",{src:v,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{id:"image-upload",name:"image",type:"file",accept:"image/*",className:"absolute top-0 h-full w-full opacity-0",onChange:S}),e.jsx(l,{htmlFor:"image-upload",children:"Course Image"}),e.jsx("div",{className:"text-muted-foreground mb-4",children:e.jsx(M,{className:"h-12 w-12"})}),e.jsxs("div",{className:"text-muted-foreground flex text-sm",children:[e.jsx("label",{htmlFor:"image-upload",className:"text-primary focus-within:ring-primary relative cursor-pointer rounded-md font-medium focus-within:ring-2 focus-within:outline-none",children:e.jsx("span",{children:"Upload an image"})}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-muted-foreground mt-2 text-xs",children:"PNG, JPG, GIF up to 3MB"})]})}),e.jsxs(B,{children:[e.jsx(u,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(u,{type:"submit",disabled:f,children:f?"Saving...":"Save Changes"})]})]})]})})})}export{W as E};
