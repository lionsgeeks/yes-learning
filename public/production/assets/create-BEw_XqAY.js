import{j as e,r as b,m as H,L as U,$ as W}from"./app-Dd7Q8jNu.js";import{C as M,a as V,d as $,b as K,c as O}from"./card-CfFIHGbB.js";import{T as y,c as u,a as B,b as N}from"./tabs-CsNbqTkm.js";import{B as q,L as J,P as Q,C as X,a as Y,b as Z,c as k,p as ee,d as se,e as te,A as ae,f as re,g as ie}from"./index-BaQg_lfl.js";import{B as v}from"./button-KjDgFd1P.js";import{C as ne}from"./circle-check-big-CI4zAa-E.js";import{F as le}from"./file-text-CH7zLvRt.js";import{D as ce}from"./download-DLOrlsV9.js";import{B as de}from"./book-open-5AuiOLw1.js";import{A as oe,D as me,a as ue,b as pe,c as he}from"./app-layout-BA-I2_TL.js";import{C as xe}from"./content-block-editor-BrpeqV_D.js";import{u as je,a as z,s as fe,K as ve,P as ge}from"./sortable.esm-41aatrBC.js";import{I as R}from"./input-CKZp8rp8.js";import{L as E}from"./label-MZ4qcrcX.js";import{T as Ne}from"./textarea-DIpC6JMV.js";import{C as be}from"./check-BoPQFPlN.js";import{A as Ce}from"./arrow-left-CItjV9VI.js";import{L as we}from"./loader-circle-CDgxRtGq.js";import{S as ye}from"./save-Cu2l_eMU.js";import{C as Se}from"./chevron-down-BhKfBWad.js";import"./index-Clufub-a.js";import"./index-CJnyyRVE.js";import"./index-jda3ngqe.js";import"./index-DiPPBe7i.js";import"./dialog-C3xIbq3o.js";import"./select-BVCvdu5o.js";import"./index-BdQq_4o_.js";import"./plus-BHBOTWBW.js";import"./trash-2-hZfra-Ye.js";import"./image-FrDUa7YJ.js";import"./radio-group-IZLkajYf.js";import"./video-D3fnCNyg.js";import"./file-Cth1ZqMk.js";import"./external-link-C3i-IxL7.js";X.register(Y,Z,k,ee,se,te,ae,re,ie);function D({course:j,lang:C}){function p(i){const t=i.content,c={labels:t.data.map(a=>a.name),datasets:[{label:"Dataset",data:t.data.map(a=>a.value),backgroundColor:t.type==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},s={responsive:!0,plugins:{title:{display:!0,text:t.title||"Chart Preview"}}};return e.jsx("div",{className:"bg- rounded-md",children:e.jsx("div",{className:"h-full w-full",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"",children:[i.content.type==="bar"&&e.jsx(q,{data:c,options:s}),i.content.type==="line"&&e.jsx(J,{data:c,options:s}),i.content.type==="pie"&&e.jsx(Q,{data:c,options:s})]})})})})}function l(i){const t=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,c=i.match(t);return c&&c[1]}function d({block:i}){const[t,c]=b.useState(null);return b.useEffect(()=>{var a;const s=(a=i.content)==null?void 0:a.file;if(s){const n=new FileReader;n.onloadend=()=>{n.result&&c(n.result)},n.readAsDataURL(s)}},[i]),t?e.jsx("img",{src:t,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"}):e.jsx("div",{className:"text-muted-foreground",children:"Image Preview"})}return e.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-4",children:e.jsxs(M,{className:"lg:col-span-4",children:[e.jsx(V,{className:"pb-0",children:e.jsx("div",{dir:C==="ar"?"rtl":"ltr",className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"bg-primary/10 text-primary rounded-full px-2 py-1 text-xs",children:"NGO View"})})})}),e.jsx($,{className:"",children:e.jsxs(y,{dir:C==="ar"?"rtl":"ltr",defaultValue:"content",children:[e.jsx(u,{value:"content",className:"mt-3",children:j.subcourses.length>0?e.jsx("div",{className:"space-y-8",children:j.subcourses.map((i,t)=>{var c;return e.jsx("div",{children:((c=i.blocks)==null?void 0:c.length)>0?e.jsx("div",{className:"",children:i.blocks.map(s=>e.jsxs("div",{className:"rounded-md p-4",children:[e.jsx("h3",{className:"mb-2 font-medium",children:s.content.title}),s.type==="text"&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:s.content.body||"Text content will appear here."})}),s.type==="image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx(d,{block:s})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="video"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video rounded-md",children:s.type==="video"&&e.jsxs("div",{className:"w-full space-y-2",children:[e.jsx("div",{className:"bg-muted aspect-video rounded-md",children:e.jsx("iframe",{className:"h-full w-full",src:`https://www.youtube.com/embed/${l(s.content.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground w-full text-center text-sm",children:s.content.caption})]})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground w-full text-center text-sm",children:s.content.caption})]}),s.type==="list"&&e.jsx("div",{children:s.content.type==="bullet"?e.jsx("ul",{className:"list-disc space-y-1 pl-5",children:(s.content.items||["Sample item"]).map((a,n)=>e.jsx("li",{children:a},n))}):s.content.type==="numbered"?e.jsx("ol",{className:"list-decimal space-y-1 pl-5",children:(s.content.items||["Sample item"]).map((a,n)=>e.jsx("li",{children:a},n))}):e.jsx("div",{className:"space-y-2",children:(s.content.items||["Sample item"]).map((a,n)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{className:"text-primary mr-2 h-4 w-4"}),e.jsx("span",{children:a})]},n))})}),s.type==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:Array.from({length:s.content.cols||3}).map((a,n)=>{var o;return e.jsx("th",{className:"border p-2 text-left",children:((o=s.content)==null?void 0:o.data[0][n])||`Header ${n+1}`},n)})})}),e.jsx("tbody",{children:Array.from({length:s.content.rows-1||3}).map((a,n)=>e.jsx("tr",{children:Array.from({length:s.content.cols||3}).map((o,m)=>{var w;return e.jsx("td",{className:"border p-2",children:((w=s.content)==null?void 0:w.data[n+1][m])||`Cell ${n+1}, ${m+1}`},m)})},n))})]})}),s.type==="chart"&&p(s),s.type==="document"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs("div",{className:"bg-muted/30 flex items-center justify-between border-b p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(le,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("div",{className:"font-medium",children:s.content.title||"PDF Document"})]}),e.jsxs(v,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(ce,{className:"mr-2 h-4 w-4"}),"Download"]})]})}),s.content.description&&e.jsx("p",{className:"text-muted-foreground text-sm",children:s.content.description})]})]},s.id))}):e.jsx("div",{className:"text-muted-foreground pl-11",children:"No content blocks in this module"})},i.id)})}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(de,{className:"text-muted-foreground mx-auto mb-4 h-12 w-12"}),e.jsx("h3",{className:"text-lg font-medium",children:"No modules yet"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Add modules to your course to see a preview"})]})}),e.jsx(u,{value:"resources",children:e.jsx("div",{className:"text-muted-foreground py-8 text-center",children:"Resources section preview"})}),e.jsx(u,{value:"discussions",children:e.jsx("div",{className:"text-muted-foreground py-8 text-center",children:"Discussions section preview"})})]})})]})})}const F=({subcourses:j,setSubcourses:C,activeSubcourse:p,setActiveSubcourse:l,addSubcourse:d,updateSubcourse:i,deleteSubcourse:t,data:c,setData:s,lang:a})=>{var o,m,w,S;je(z(ge),z(ve,{coordinateGetter:fe}));const n=f=>f[a];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(M,{className:"lg:col-span-2",children:[e.jsxs(V,{children:[e.jsx(K,{children:((m=(o=j[a])==null?void 0:o.find(f=>f.id===p))==null?void 0:m.title)||"Module Content"}),e.jsxs(O,{children:[n({en:"Add and arrange content blocks for this module",fr:"",ar:""})," "]})]}),e.jsx($,{children:e.jsx(xe,{subcourseId:p,blocks:((S=(w=j[a])==null?void 0:w.find(f=>f.id===p))==null?void 0:S.blocks)||[],onBlocksChange:f=>{i(p,{blocks:f},a)},lang:a})})]}),e.jsx("div",{className:"col-span-2",children:e.jsx(D,{lang:a,course:{title:"Course Title",description:"Course description will appear here.",subcourses:j[a]}})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(v,{variant:"outline",onClick:()=>setActiveTab("details"),children:"Back to Details"}),e.jsx(v,{onClick:()=>setActiveTab("preview"),children:"Preview Course"})]})]})},I=({setActiveTab:j,data:C,setData:p,lang:l})=>{const d=i=>i[l];return e.jsx(e.Fragment,{children:e.jsxs(M,{dir:l==="ar"?"rtl":"ltr",className:"col-span-5",children:[e.jsxs(V,{children:[e.jsxs(K,{children:[" ",d({en:"Basic Information",ar:"المعلومات الأساسية",fr:"Informations de base"})," "]}),e.jsx(O,{children:d({en:"Enter the main details about your course",ar:"أدخل التفاصيل الرئيسية حول دورتك",fr:"Informations de base"})})]}),e.jsxs($,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"title",children:d({en:"Course Title",ar:"عنوان الدورة",fr:"titre du cours"})}),e.jsx(R,{className:"mt-4",id:"title",placeholder:d({en:"Enter course title",ar:"	أدخل عنوان الدورة",fr:"Saisissez le titre du cours"}),value:C.title,onChange:i=>p(t=>({...t,[l]:{...t[l],title:i.target.value}}))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(E,{htmlFor:"duration",children:[d({en:"Estimated Duration (Minutes)",ar:"المدة التقديرية",fr:"Durée estimée"})," "]}),e.jsx(R,{className:"mt-4",id:"duration",type:"number",min:"1",placeholder:"e.g., 8",value:C.estimated_duration,onChange:i=>p(t=>({...t,[l]:{...t[l],estimated_duration:i.target.value}}))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(E,{htmlFor:"description",children:[d({en:"Course Description",ar:"وصف الدورة",fr:"Description du cours"}),"  "]}),e.jsx(Ne,{id:"description",placeholder:d({en:"Describe what this course covers and its learning objectives",ar:"صِف ما تغطيه هذه الدورة وأهدافها التعليمية",fr:"Décrivez le contenu de ce cours et ses objectifs d’apprentissage"}),className:"mt-4 h-[35vh]",value:C.description,onChange:i=>p(t=>({...t,[l]:{...t[l],description:i.target.value}}))})]})]}),e.jsx("div",{className:"mr-3 flex h-full items-end justify-end",children:e.jsxs(v,{onClick:()=>{j("content")},children:["Continue to Content",e.jsx(be,{className:"ml-2 h-4 w-4"})]})})]})})},ns=()=>{const[j,C]=b.useState(!1),[p,l]=b.useState("details"),[d,i]=b.useState("en"),[t,c]=b.useState({en:[{id:"subcourse-1",title:"Chapter 1",description:"",block:[]}],fr:[{id:"subcourse-1",title:"Chapter 1",description:"",block:[]}],ar:[{id:"subcourse-1",title:"Chapter 1",description:"",block:[]}]}),[s,a]=b.useState("subcourse-1"),n=new URLSearchParams(window.location.search).get("course"),{data:o,setData:m,post:w}=H({en:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[]},fr:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[]},ar:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[]},course_id:n});b.useEffect(()=>{m(r=>({...r,en:{...r.en,content:t.en},fr:{...r.fr,content:t.fr},ar:{...r.ar,content:t.ar}}))},[t]);const S=r=>r[d];b.useEffect(()=>{l("details")},[d]);function f(r){return["en","fr","ar"].every(h=>{const g=r[h];return g.title.trim()!==""&&g.description.trim()!==""&&g.estimated_duration.trim()!==""&&g.content.length>0})}const G=r=>{console.log("all feilds are fill : ",f),r.preventDefault(),f(o)?w(route("chapter.store"),{data:o,onFinish:()=>{m({en:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[]},fr:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[]},ar:{title:"",description:"",estimated_duration:"",published:!1,enable_certificate:!1,enable_discussion:!1,content:[]},course_id:n})}}):alert("All inputs should be filled")},_=r=>{const x=`subcourse-${t[r].length+1}`;c(h=>({...h,[r]:[...h[r],{id:x,title:`Chapter ${h[r].length+1}`,description:"",blocks:[]}]})),a(x)},T=(r,x,h)=>{c(g=>({...g,[h]:g[h].map(P=>P.id===r?{...P,...x}:P)}))},A=(r,x)=>{c(h=>({...h,[x]:h[x].filter(g=>g.id!==r)}))},L=r=>{if(!r.destination)return;const x=Array.from(t),[h]=x.splice(r.source.index,1);x.splice(r.destination.index,0,h),c(x)};return e.jsxs(oe,{children:[e.jsx(U,{title:"Chapter"}),e.jsx("div",{className:"space-y-6 p-3 lg:p-6",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx(v,{variant:"ghost",size:"sm",asChild:!0,className:"mr-2",children:e.jsxs(W,{href:"/admin/courses",children:[e.jsx(Ce,{className:"mr-1 h-4 w-4"}),"Back"]})}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Course"})]}),e.jsx(v,{onClick:G,disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"mr-2 h-4 w-4"}),"Save Course"]})})]}),e.jsxs("div",{dir:d==="ar"?"rtl":"ltr",className:"bg-alpha mb-6 flex items-center justify-between rounded-lg p-3 text-white",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"font-medium",children:[S({en:"Editing english Language Content",ar:"تعديل محتوى اللغة العربية ",fr:"Modification du contenu en langue français"}),"  "]})}),e.jsxs(me,{children:[e.jsx(ue,{asChild:!0,children:e.jsxs(v,{variant:"ghost",size:"sm",className:"h-8",children:["Switch ",e.jsx(Se,{className:"ml-1 h-4 w-4"})]})}),e.jsx(pe,{align:"end",children:["en","ar","fr"].map(r=>e.jsx(he,{onClick:()=>i(r),children:e.jsx("span",{className:"mr-2",children:r})},r))})]})]}),e.jsxs(y,{value:d,onValueChange:i,className:"space-y-4",children:[e.jsx(u,{value:"en",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs(y,{value:p,onValueChange:l,className:"space-y-4",children:[e.jsxs(B,{className:"grid w-full grid-cols-3",children:[e.jsx(N,{value:"details",children:"Course Details"}),e.jsx(N,{value:"content",children:"Content & Modules"}),e.jsx(N,{value:"preview",children:"Preview"})]}),e.jsx(u,{value:"details",className:"grid grid-cols-5 gap-4 space-y-4",children:e.jsx(I,{data:o.en,setData:m,setActiveTab:l,lang:"en"})}),e.jsx(u,{value:"content",className:"space-y-4",children:e.jsx(F,{data:o.en,setData:m,deleteSubcourse:A,updateSubcourse:T,onDragEnd:L,addSubcourse:_,subcourses:t,activeSubcourse:s,setActiveSubcourse:a,setSubcourses:c,lang:"en"})}),e.jsxs(u,{value:"preview",children:[e.jsx(D,{course:{title:"Course Title",description:"Course description will appear here.",subcourses:t.en},lang:"en"}),e.jsx("div",{className:"mt-6 flex justify-between",children:e.jsx(v,{variant:"outline",onClick:()=>l("content"),children:"Back to Content"})})]})]})}),e.jsx(u,{value:"fr",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs(y,{value:p,onValueChange:l,className:"space-y-4",children:[e.jsxs(B,{className:"grid w-full grid-cols-3",children:[e.jsx(N,{value:"details",children:"Course Details"}),e.jsx(N,{value:"content",children:"Content & Modules"}),e.jsx(N,{value:"preview",children:"Preview"})]}),e.jsx(u,{value:"details",className:"grid grid-cols-5 gap-4 space-y-4",children:e.jsx(I,{data:o.fr,setData:m,setActiveTab:l,lang:"fr"})}),e.jsx(u,{value:"content",className:"space-y-4",children:e.jsx(F,{data:o.fr,setData:m,deleteSubcourse:A,updateSubcourse:T,onDragEnd:L,addSubcourse:_,subcourses:t,activeSubcourse:s,setActiveSubcourse:a,setSubcourses:c,lang:"fr"})}),e.jsxs(u,{value:"preview",children:[e.jsx(D,{course:{title:"Course Title",description:"Course description will appear here.",subcourses:t.fr},lang:"fr"}),e.jsx("div",{className:"mt-6 flex justify-between",children:e.jsx(v,{variant:"outline",onClick:()=>l("content"),children:"Back to Content"})})]})]})}),e.jsx(u,{value:"ar",dir:"rtl",className:"grid-cols- grid gap-4 space-y-4",children:e.jsx("div",{dir:"rtl",children:e.jsxs(y,{value:p,onValueChange:l,className:"space-y-4",children:[e.jsxs(B,{className:"grid w-full grid-cols-3",children:[e.jsx(N,{value:"details",children:"Course Details"}),e.jsx(N,{value:"content",children:"Content & Modules"}),e.jsx(N,{value:"preview",children:"Preview"})]}),e.jsx(u,{value:"details",className:"grid grid-cols-5 gap-4 space-y-4",children:e.jsx(I,{data:o.ar,setData:m,setActiveTab:l,lang:"ar"})}),e.jsx(u,{value:"content",className:"space-y-4",children:e.jsx(F,{data:o,setData:m,deleteSubcourse:A,updateSubcourse:T,onDragEnd:L,addSubcourse:_,subcourses:t,activeSubcourse:s,setActiveSubcourse:a,setSubcourses:c,lang:"ar"})}),e.jsxs(u,{value:"preview",children:[e.jsx(D,{course:{title:"Course Title",description:"Course description will appear here.",subcourses:t.ar},lang:"ar"}),e.jsx("div",{className:"mt-6 flex justify-between",children:e.jsx(v,{variant:"outline",onClick:()=>l("content"),children:"Back to Content"})})]})]})})})]})]})})]})};export{ns as default};
