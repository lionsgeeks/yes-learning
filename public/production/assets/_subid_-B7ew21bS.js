import{r as D,m as U,j as e,L as ae,$ as _,S as re}from"./app-D4TMrZXc.js";import{B as u}from"./badge-jWZ_So_A.js";import{c as K,B as c}from"./button-CbAxOMBv.js";import{C as y,d as w,a as F,b as M,c as B}from"./card-BUZKdygx.js";import{D as X,a as Y,b as Z,c as W,e as ee,d as se,f as ne}from"./dialog-BJogk6G7.js";import{S as q}from"./separator-CQ15VXcP.js";import{A as le}from"./admin-users-table-DIsGjZZA.js";import{I as j}from"./input-DrKP1DBc.js";import{L as o}from"./label-pXlkp3JG.js";import{T as ce}from"./textarea-X8IvpYrv.js";import{S as P,a as V,b as O,c as Q,d as b}from"./select-BEybDhR8.js";import{S}from"./switch-DSWAaUIA.js";import{T as z,a as G,b as f,c as H}from"./tabs-4J5HzUdS.js";import{C as $}from"./index-DZBFr4dZ.js";import{C as de}from"./chevron-left-CkcVu-7l.js";import{A as oe}from"./app-layout-CFiiGJaS.js";import{A as me,a as xe,b as he,c as je,d as pe,e as ue,f as fe}from"./alert-dialog-C317dYFi.js";import{L as Ne}from"./loader-circle-BukOlfmS.js";import{A as ve}from"./arrow-left-BwrosKBd.js";import{T as I}from"./triangle-alert-DJfuulkA.js";import{C as ge}from"./calendar-BxjM0uh1.js";import{C as Ce}from"./clock-W4reJtgV.js";import{U as ye}from"./users-9Qpupr-x.js";import{G as we}from"./globe-CR4i3zGc.js";import{B as be}from"./book-open-CutzJHx1.js";import{C as Se}from"./copy-o0IWD-O6.js";import{V as De}from"./video-CbISiKt1.js";import{i as $e}from"./isPast-CMtZTBm5.js";import{f as ke}from"./format-ymR-pL-R.js";import"./index-C_QyVRLl.js";import"./table-UMzRVkWt.js";import"./search-xxBJd3t1.js";import"./filter-z5BL3lTx.js";import"./square-pen-mregKaM8.js";import"./trash-2-UlSWDdth.js";import"./index-BdQq_4o_.js";import"./index-D0Y7t9tT.js";import"./index-CvL4AiEa.js";import"./chevron-down-B-nyD14p.js";import"./check-Cr6uphOX.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Te=K("Link",Le);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],J=K("Mail",Ae);function Fe({open:i,onOpenChange:h,chapters:N,subWorkshop:a}){const[d,m]=D.useState(1),{data:t,setData:n,put:p,processing:v,errors:x}=U({workshop_id:a.workshop_id,chapter_id:a.chapter_id,date:a.date,time:a.time,duration:a.duration,name:{en:a.name.en,fr:a.name.fr,ar:a.name.ar},description:{en:a.description.en,fr:a.description.fr,ar:a.description.ar},prerequisite:{en:a.prerequisite.en,fr:a.prerequisite.fr,ar:a.prerequisite.ar},instructor:{en:a.instructor.en,fr:a.instructor.fr,ar:a.instructor.ar},meetLink:{en:a.meetLink.en,fr:a.meetLink.fr,ar:a.meetLink.ar},allowQuestions:a.allowQuestions,requireRegistration:a.requireRegistration,sendNotifications:a.sendNotifications,notificationTime:"24h",published:a.published}),g=()=>{m(s=>Math.min(s+1,3))},k=()=>{m(s=>Math.max(s-1,1))},L=()=>{p(route("subworkshop.update",a.id),{onSuccess:()=>{h(!1),m(1)}})},T=t.name&&t.description&&t.date&&t.time&&t.duration;return e.jsx(X,{open:i,onOpenChange:s=>{h(s),s||m(1)},children:e.jsxs(Y,{className:"max-w-3xl",children:[e.jsxs(Z,{children:[e.jsx(W,{children:"Update Sub-Workshop"}),e.jsx(ee,{children:d===1?"Update basic information about the sub-workshop":d===2?"Modify instructor settings":"Adjust sub-workshop preferences and notification settings"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Step ",d," of 3"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:d===1?"Basic Info":d===2?"Instructor Settings":"Preferences"})]}),e.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-muted",children:e.jsx("div",{className:"h-full rounded-full bg-primary transition-all",style:{width:`${d/3*100}%`}})})]}),d===1&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(z,{defaultValue:"en",children:[e.jsxs(G,{className:"grid w-full grid-cols-3",children:[e.jsx(f,{value:"en",children:"English"}),e.jsx(f,{value:"fr",children:"French"}),e.jsx(f,{value:"ar",children:"Arabic"})]}),["en","fr","ar"].map(s=>e.jsx(H,{value:s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:`name-${s}`,children:["name (",s.toUpperCase(),")"]}),e.jsx(j,{id:`name-${s}`,placeholder:`name (${s.toUpperCase()})`,value:t.name[`${s}`],onChange:l=>n("name",{...t.name,[`${s}`]:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:`description-${s}`,children:["description (",s.toUpperCase(),")"]}),e.jsx(j,{id:`description-${s}`,placeholder:"https://meet.google.com/...",value:t.description[`${s}`],onChange:l=>n("description",{...t.description,[`${s}`]:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:`prerequisite-${s}`,children:["prerequisite (",s.toUpperCase(),")"]}),e.jsx(ce,{id:`prerequisite-${s}`,placeholder:"https://meet.google.com/...",value:t.prerequisite[`${s}`],onChange:l=>n("prerequisite",{...t.prerequisite,[`${s}`]:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"course",children:"Associated chapter"}),e.jsxs(P,{value:t.chapter_id,onValueChange:l=>n("chapter_id",l),children:[e.jsx(V,{id:"course",children:e.jsx(O,{placeholder:"Select a course"})}),e.jsx(Q,{children:N.map(l=>e.jsx(b,{value:l.id,children:l.title[`${s}`]},l.id))})]}),x.chapter_id&&e.jsx("p",{className:"text-sm text-red-500",children:x.chapter_id})]})]})},s))]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"date",children:"Date"}),e.jsx(j,{id:"date",type:"date",value:t.date,onChange:s=>n("date",s.target.value)}),x.date&&e.jsx("p",{className:"text-sm text-red-500",children:x.date})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"time",children:"Time"}),e.jsx(j,{id:"time",type:"time",value:t.time,onChange:s=>n("time",s.target.value)}),x.time&&e.jsx("p",{className:"text-sm text-red-500",children:x.time})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"duration",children:"Duration (minutes)"}),e.jsx(j,{id:"duration",type:"number",placeholder:"90",value:t.duration,onChange:s=>n("duration",s.target.value)}),x.duration&&e.jsx("p",{className:"text-sm text-red-500",children:x.duration})]})]})]}),d===2&&e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs(z,{defaultValue:"en",children:[e.jsxs(G,{className:"grid w-full grid-cols-3",children:[e.jsx(f,{value:"en",children:"English"}),e.jsx(f,{value:"fr",children:"French"}),e.jsx(f,{value:"ar",children:"Arabic"})]}),["en","fr","ar"].map(s=>e.jsx(H,{value:s,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:`instructor-${s}`,children:["Instructor (",s.toUpperCase(),")"]}),e.jsx(j,{id:`instructor-${s}`,placeholder:`Instructor (${s.toUpperCase()})`,value:t.instructor[`${s}`],onChange:l=>n("instructor",{...t.instructor,[`${s}`]:l.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:`meetLink-${s}`,children:["Google Meet Link (",s.toUpperCase(),")"]}),e.jsx(j,{id:`meetLink-${s}`,placeholder:"https://meet.google.com/...",value:t.meetLink[`${s}`],onChange:l=>n("meetLink",{...t.meetLink,[`${s}`]:l.target.value})})]})]})},s))]})}),d===3&&e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{children:"Allow Questions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enable Q&A during the workshop"})]}),e.jsx(S,{checked:t.allowQuestions,onCheckedChange:s=>n("allowQuestions",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{children:"Require Registration"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Students must register before joining"})]}),e.jsx(S,{checked:t.requireRegistration,onCheckedChange:s=>n("requireRegistration",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{children:"Send Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify enrolled students about this workshop"})]}),e.jsx(S,{checked:t.sendNotifications,onCheckedChange:s=>n("sendNotifications",s)})]}),t.sendNotifications&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"notificationTime",children:"Notification Schedule"}),e.jsxs(P,{value:t.notificationTime,onValueChange:s=>n("notificationTime",s),children:[e.jsx(V,{id:"notificationTime",children:e.jsx(O,{})}),e.jsxs(Q,{children:[e.jsx(b,{value:"24h",children:"24 hours before workshop"}),e.jsx(b,{value:"1h",children:"1 hour before workshop"}),e.jsx(b,{value:"both",children:"Both 24 hours and 1 hour before"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(o,{children:"Publish Sub-Workshop"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make this sub-workshop visible to students"})]}),e.jsx(S,{checked:t.published,onCheckedChange:s=>n("published",s)})]})]})}),e.jsx(se,{children:d===1?e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsxs(c,{onClick:g,disabled:!T,children:["Next",e.jsx($,{className:"ml-2 h-4 w-4"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(c,{variant:"outline",onClick:k,children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Back"]}),d===2?e.jsxs(c,{onClick:g,children:["Next",e.jsx($,{className:"ml-2 h-4 w-4"})]}):e.jsx(c,{onClick:L,disabled:v,children:v?"Updating...":"Update Sub-Workshop"})]})})]})})}function Me({open:i,onOpenChange:h,workshopTitle:N,workshopId:a}){const[d,m]=D.useState(!1),{delete:t,processing:n}=U(),p=()=>{m(!0),t(route("subworkshop.destroy",a),{onSuccess:()=>{h(!1),m(!1)},onError:()=>{m(!1)}})};return e.jsx(me,{open:i,onOpenChange:h,children:e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(je,{children:"Are you absolutely sure?"}),e.jsxs(pe,{children:["This action cannot be undone. This will permanently delete the ",N," workshop and remove its data from our servers."]})]}),e.jsxs(ue,{children:[e.jsx(fe,{disabled:n,children:"Cancel"}),e.jsx(c,{variant:"destructive",onClick:p,disabled:n,className:"bg-red-500 text-red-50 hover:bg-red-600",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})}const qe=[{title:"Sub-Workshop Session",href:"/admin/sub-workshop/1"}];function Cs({subWorkshop:i,chapters:h}){console.log(i),i.status;const[N,a]=D.useState(!1),[d,m]=D.useState(!1),t=[];i.date||t.push("date"),i.time||t.push("time");const n=["en","fr","ar"],p=n.filter(r=>!i.instructor.instructor-[r]),v=n.filter(r=>!i.meetLink.meetLink-[r]);p.length>0&&t.push(`instructor (${p.map(r=>r.substring(0,2).toUpperCase()).join(", ")})`),v.length>0&&t.push(`meet link (${v.map(r=>r.substring(0,2).toUpperCase()).join(", ")})`),i.date&&$e(new Date(`${i.date} ${i.time}`));const x={english:"English",french:"French",arabic:"Arabic"},g={english:"EN",french:"FR",arabic:"AR"},{data:k,setData:L,post:T,put:s}=U({workshop:i}),l=r=>{L("workshop",r),s(route("workshop.notif",r),{})},ie=()=>{T(route("library.store"),{data:k,onFinish:()=>re.visit("/admin/libraries")})};return e.jsxs(oe,{breadcrumbs:qe,children:[e.jsx(ae,{title:"Sub-Workshop Session"}),e.jsxs("div",{className:"container mx-auto p-3 lg:p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center",children:[e.jsx(c,{variant:"ghost",size:"icon",asChild:!0,className:"mr-2",children:e.jsx(_,{href:`/admin/workshops/${i.workshop_id}`,children:e.jsx(ve,{className:"h-4 w-4"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("h1",{className:"text-2xl font-bold",children:i.name.en})}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:[e.jsx(_,{href:`/workshops/${i.workshopId}`,className:"hover:underline",children:i.workshopTitle})," ",i.subCourse]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(X,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(c,{variant:"outline",children:"Create Library"})}),e.jsxs(Y,{className:"sm:max-w-[425px]",children:[e.jsxs(Z,{children:[e.jsx(W,{children:"Create Library"}),e.jsx(ee,{children:"Create Library for this workshop. Click create when you're done."})]}),e.jsx(se,{children:e.jsx(c,{onClick:ie,children:"Create"})})]})]}),e.jsx(c,{variant:"outline",onClick:r=>{r.preventDefault(),r.stopPropagation(),m(!0)},children:"Edit"}),e.jsx(Fe,{open:d,onOpenChange:m,subWorkshop:i,chapters:h}),e.jsx(c,{className:"text-destructive",variant:"outline",onClick:r=>{r.preventDefault(),r.stopPropagation(),a(!0)},children:"Delete Sub-Workshop"}),e.jsx(Me,{open:N,onOpenChange:a,workshopTitle:i.name.en,workshopId:i.id})]})})]}),t.length>0&&e.jsx(y,{className:"mb-6 border-amber-200 bg-amber-50",children:e.jsx(w,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(I,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Incomplete Sub-Workshop"}),e.jsxs("p",{className:"text-sm",children:["This sub-workshop is missing: ",t.join(", "),". Please complete all required information before publishing."]})]})]})})}),e.jsxs("div",{className:"mb-6 grid gap-6 md:grid-cols-3",children:[e.jsxs(y,{className:"md:col-span-2",children:[e.jsxs(F,{className:"pb-3",children:[e.jsx(M,{children:"Overview"}),e.jsx(B,{children:i.name.en})]}),e.jsxs(w,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(ge,{className:"text-muted-foreground h-4 w-4"}),"Date"]}),e.jsx("div",{className:"text-sm",children:i.date?ke(new Date(i.date),"MMMM d, yyyy"):"Not set"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Ce,{className:"text-muted-foreground h-4 w-4"}),"Time"]}),e.jsx("div",{className:"text-sm",children:i.time?`${i.time} (${i.duration} min)`:"Not set"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(ye,{className:"text-muted-foreground h-4 w-4"}),"Enrollment"]}),e.jsxs("div",{className:"text-sm",children:[i.users.length," participants"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(we,{className:"text-muted-foreground h-4 w-4"}),"Languages"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(u,{variant:"secondary",className:"text-xs",children:"EN"}),e.jsx(u,{variant:"secondary",className:"text-xs",children:"FR"}),e.jsx(u,{variant:"secondary",className:"text-xs",children:"AR"})]})]})]}),e.jsx(q,{className:"my-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(be,{className:"text-muted-foreground h-4 w-4"}),"Prerequisites"]}),e.jsx("ul",{className:"list-disc space-y-1 pl-5 text-sm",children:e.jsx("li",{children:i.prerequisite.en})})]})]})]}),e.jsxs(y,{children:[e.jsxs(F,{className:"pb-3",children:[e.jsx(M,{children:"Communication"}),e.jsx(B,{children:"Send emails to participants"})]}),e.jsxs(w,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{variant:"outline",className:"w-full justify-between",size:"sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Send Reminder"]}),e.jsx($,{className:"h-4 w-4"})]}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Remind participants about the upcoming session"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{variant:"outline",className:"w-full justify-between",size:"sm",onClick:()=>l(i),children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Send Meeting Links"]}),e.jsx($,{className:"h-4 w-4"})]}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Send meeting links to all confirmed participants"})]}),e.jsx(q,{}),e.jsx("div",{className:"pt-2",children:e.jsxs(c,{className:"w-full",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Custom Email"]})})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"mb-4 text-xl font-semibold",children:"Language Sessions"}),e.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:n.map(r=>{const A=i.instructor,C=i.meetLink,E=!!A[`${r}`],R=!!C[`${r}`],te=E&&R;return e.jsxs(y,{className:"border",children:[e.jsx(F,{className:"border-b pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"flex items-center gap-2 text-lg",children:[e.jsx(u,{variant:"secondary",children:g[r]}),x[r]]}),te?e.jsx(u,{children:"Complete"}):e.jsx(u,{variant:"outline",className:"border-amber-500 text-amber-500",children:"Incomplete"})]})}),e.jsxs(w,{className:"space-y-4 pt-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"Instructor"}),E?e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:A[`${r}`]}),e.jsx("div",{className:"text-muted-foreground text-xs",children:A[`${r}`]})]})}):e.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[e.jsx(I,{className:"h-4 w-4"}),"No instructor assigned"]})]}),e.jsx(q,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"Google Meet"}),R?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted text-muted-foreground rounded-md border p-2 text-xs break-all",children:C[`${r}`]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{size:"sm",variant:"outline",className:"h-8 flex-1 text-xs",onClick:()=>navigator.clipboard.writeText(C[`${r}`]||""),children:[e.jsx(Se,{className:"mr-1 h-3 w-3"}),"Copy"]}),e.jsx(c,{size:"sm",className:"h-8 flex-1 text-xs",asChild:!0,children:e.jsxs("a",{href:C[`${r}`],target:"_blank",rel:"noopener noreferrer",children:[e.jsx(De,{className:"mr-1 h-3 w-3"}),"Join"]})})]})]}):e.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[e.jsx(I,{className:"h-4 w-4"}),"No meeting link provided"]})]})]})]},r)})})]}),e.jsx(le,{title:"Manage Users",description:"Check Students Information",Users:i.users,role:1,courses:1,joinDate:1,showAddButton:!1})]})]})}export{Cs as default};
