import{j as e,K as de,r as j,m as ce,L as me,$ as oe,S as xe}from"./app-D4TMrZXc.js";import{d as he,A as ue,T as pe}from"./app-layout-CFiiGJaS.js";import{T as je}from"./TruncateText-BaG0PKgH.js";import{B as S}from"./badge-jWZ_So_A.js";import{c as fe,B as m}from"./button-CbAxOMBv.js";import{C as L,a as U,b as W,d as T}from"./card-BUZKdygx.js";import{P as ge}from"./progress-epLrR_Z8.js";import{S as Ne}from"./scroll-area-Yl23ltWn.js";import{S as ve}from"./separator-CQ15VXcP.js";import{T as ye,a as we,b as Ce,c as A}from"./tabs-4J5HzUdS.js";import{B as Se,L as Le,P as Te,C as Ae,a as Be,b as _e,c as Pe,p as $e,d as ze,e as De,A as Ee,f as Fe,g as be}from"./index-CkAJ5eUW.js";import{C as K}from"./chevron-left-CkcVu-7l.js";import{C as Ie}from"./clock-W4reJtgV.js";import{B as qe}from"./book-open-CutzJHx1.js";import{C as Qe}from"./circle-check-big-DnDyGrpX.js";import{F as G}from"./file-text-GeR8BLD1.js";import{D as X}from"./download-CRAqONwq.js";import{I as Y}from"./image-dNhxIxbr.js";import{C as Z}from"./index-DZBFr4dZ.js";import"./index-D0Y7t9tT.js";import"./index-C_QyVRLl.js";import"./index-CvL4AiEa.js";import"./index-BdQq_4o_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Ve=fe("CirclePlus",Re),He=()=>e.jsx("div",{className:"animate-bounce flex items-center mx-auto justify-center",children:e.jsx(he,{className:"w-52"})});Ae.register(Be,_e,Pe,$e,ze,De,Ee,Fe,be);const hs=()=>{var $,z;const{course:N,chapters:r,auth:i,quizId:B}=de().props,[y,_]=j.useState(($=r[0])==null?void 0:$.id),{setData:k,post:ee,processing:se}=ce({user_id:i==null?void 0:i.user.id,chapter_id:null}),[c,w]=j.useState(1),[C,te]=j.useState(0),[o,ae]=j.useState([]);j.useEffect(()=>{const t=[];r==null||r.forEach(a=>{var n;(n=a.content)==null||n.forEach(x=>{var h;(h=x.blocks)==null||h.forEach(l=>{if((l==null?void 0:l.type)==="document"){console.log("document block",l);const s=l.content;t.push(s)}})})}),ae(t)},[]);const re=[{title:N.name,href:`/course/${N.id}`}];j.useEffect(()=>{var t;y!==null&&k("chapter_id",(t=r[c-1])==null?void 0:t.id),te(r.filter(a=>a.users.some(n=>n.id===i.user.id)).length/r.length*100)},[y,r]);const P=()=>{ee(route("chapter.read")),w(c+1),_(y+1)},ne=t=>{t.preventDefault(),P(),xe.visit("/quiz/"+B)};function ie(t){var h,l,s,v,f;const a=t.content,n={labels:(h=a.data)==null?void 0:h.map(p=>p.name),datasets:[{label:"Dataset",data:(l=a.data)==null?void 0:l.map(p=>p.value),backgroundColor:(a==null?void 0:a.type)==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},x={responsive:!0,plugins:{title:{display:!0,text:(a==null?void 0:a.title)||"Chart Preview"}}};return e.jsx("div",{className:"bg- rounded-md",children:e.jsx("div",{className:"h-full w-full",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"",children:[((s=t.content)==null?void 0:s.type)==="bar"&&e.jsx(Se,{data:n,options:x}),((v=t.content)==null?void 0:v.type)==="line"&&e.jsx(Le,{data:n,options:x}),((f=t.content)==null?void 0:f.type)==="pie"&&e.jsx(Te,{data:n,options:x})]})})})})}function le(t){const a=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,n=t.match(a);return n&&n[1]}return console.log("%%%%",r.filter(t=>t.users.some(a=>a.id===i.user.id)).length),e.jsxs(ue,{breadcrumbs:re,children:[e.jsx(me,{title:N.name}),se?e.jsx("div",{className:"  w-full h-[80vh] flex justify-center items-center ",children:e.jsx(He,{})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 p-6",children:[e.jsxs(oe,{href:"/course",className:"text-muted-foreground hover:text-foreground inline-flex items-center text-sm transition-colors",children:[e.jsx(K,{className:"mr- h-4 w-4"}),"Back to Courses"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:N.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(Ie,{className:"mr-1 h-3 w-3"}),r.reduce((t,a)=>t+Number(a.estimated_duration),0)," Minutes total"]}),e.jsxs(S,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(qe,{className:"mr-1 h-3 w-3"}),r.length," lessons"]})]})]}),e.jsx(ge,{value:C,className:"mt-4 h-2"}),e.jsxs("div",{className:"text-muted-foreground mt-1 flex justify-between text-xs",children:[e.jsxs("span",{children:[C.toFixed(2)," % completed"]}),e.jsxs("span",{children:[C/100*r.length," of ",r.length," lessons completed"]})]})]}),e.jsxs("div",{dir:i.user.language==="ar"?"rtl":"ltr",className:`grid grid-cols-1 gap-6 p-6 ${o.length>0?"lg:grid-cols-12":"lg:grid-cols-10"} `,children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(L,{children:[e.jsx(U,{className:"py-3",children:e.jsx(W,{className:"text-lg",children:"Course Content"})}),e.jsx(T,{className:"p-0",children:e.jsx(Ne,{className:"h-[calc(100vh-300px)]",children:e.jsx("div",{className:"space-y-1 p-2",children:r==null?void 0:r.map((t,a)=>e.jsxs("div",{onClick:()=>{w(a+1),_(t.id)},className:`flex cursor-pointer items-center justify-between rounded-md px-2 py-1.5 text-sm transition-colors ${a+1===c?"bg-primary/80 text-primary-foreground":"hover:bg-muted"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.users.some(n=>n.id===i.user.id)?e.jsx("div",{className:"bg-primary mr-2 flex aspect-square w-4 items-center justify-center rounded-full text-[10px] text-white",children:"✓"}):e.jsx("div",{className:"border-input mr-2 flex aspect-square w-4 items-center justify-center rounded-full border text-[10px]"}),e.jsx("span",{className:`w-[80%] ${a+1===c?"":"text-muted-foreground"}`,children:t==null?void 0:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.hasQuiz&&e.jsx(S,{variant:"outline",className:"h-5 px-1 text-[10px]",children:"Quiz"}),e.jsx("span",{className:a+1===c?"":"text-muted-foreground text-xs",children:t.estimated_duration})]})]},a))})})})]})}),e.jsxs("div",{className:"lg:col-span-6",children:[e.jsx(L,{className:"overflow-hidden",children:e.jsx(T,{className:"p-6",children:e.jsxs(ye,{defaultValue:"content",children:[e.jsx(we,{className:"mb-4",children:e.jsxs(Ce,{value:"content",children:[e.jsx(pe,{en:"Lesson Content",fr:"Contenu",ar:"محتوى "})," "]})}),e.jsxs(A,{value:"content",className:"space-y-4",children:[e.jsx("div",{dir:i.user.language==="ar"?"rtl":"ltr",className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-medium",children:[(z=r[0])==null?void 0:z.title," "]})}),e.jsx("div",{dir:i.user.language==="ar"?"rtl":"ltr",className:"prose max-w-none",children:r==null?void 0:r.flatMap((t,a)=>{var n;return(n=t.content)==null?void 0:n.flatMap((x,h)=>{var l;return(l=x.blocks)==null?void 0:l.map((s,v)=>{var f,p,D,E,F,b,I,q,Q,R,V,H,J;return a+1===c&&e.jsxs("div",{className:"rounded-md p-4",children:[((f=s.content)==null?void 0:f.title)&&e.jsx("h3",{className:"mb-2 font-medium",children:(p=s.content)==null?void 0:p.title}),(s==null?void 0:s.type)==="text"&&s.content.body&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:s.content.body})}),(s==null?void 0:s.type)==="image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("img",{src:`/storage/${s.content.url}`,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),(s==null?void 0:s.type)==="video"&&s.content.url&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("iframe",{width:"866",height:"487",src:`https://www.youtube.com/embed/${le(s.content.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),(s==null?void 0:s.type)==="list"&&e.jsx("div",{children:((D=s.content)==null?void 0:D.type)==="bullet"?e.jsx("ul",{className:"list-disc space-y-1 pl-5",children:(F=((E=s.content)==null?void 0:E.items)||["Sample item"])==null?void 0:F.map((u,d)=>e.jsx("li",{children:u},d))}):((b=s.content)==null?void 0:b.type)==="numbered"?e.jsx("ol",{className:"list-decimal space-y-1 pl-5",children:(q=((I=s.content)==null?void 0:I.items)||["Sample item"])==null?void 0:q.map((u,d)=>e.jsx("li",{children:u},d))}):e.jsx("div",{className:"space-y-2",children:(R=((Q=s.content)==null?void 0:Q.items)||["Sample item"])==null?void 0:R.map((u,d)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qe,{className:"text-primary mr-2 h-4 w-4"}),e.jsx("span",{children:u})]},d))})}),(s==null?void 0:s.type)==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:(V=Array.from({length:s.content.cols||3}))==null?void 0:V.map((u,d)=>{var g;return e.jsx("th",{className:"border p-2 text-left",children:(g=s.content)==null?void 0:g.data[0][d]},d)})})}),e.jsx("tbody",{children:(H=Array.from({length:s.content.rows-1||3}))==null?void 0:H.map((u,d)=>{var g;return e.jsx("tr",{children:(g=Array.from({length:s.content.cols||3}))==null?void 0:g.map((Je,M)=>{var O;return e.jsx("td",{className:"border p-2",children:(O=s.content)==null?void 0:O.data[d+1][M]},M)})},d)})})]})}),(s==null?void 0:s.type)==="chart"&&ie(s),(s==null?void 0:s.type)==="document"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs("div",{className:"bg-muted/30 flex items-center justify-between border-b p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("div",{className:"font-medium",children:e.jsx("span",{children:((J=s.content)==null?void 0:J.title)||"PDF Document"})})]}),e.jsx("a",{href:`/storage/${s.content.url}`,target:"_blank",download:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),i.user.language==="ar"?"تحميل":"Download"]})})]})}),s.content.description&&e.jsx("p",{className:"text-muted-foreground text-sm",children:s.content.description})]})]},`${a}-${h}-${v}`)})})})})]}),e.jsx(A,{value:"discussion",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4",children:[e.jsx(Y,{src:"/placeholder.svg?height=40&width=40",alt:"User avatar",width:40,height:40,className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{className:"w-full rounded-md border p-2 text-sm",rows:3,placeholder:"Add to the discussion..."}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx(m,{size:"sm",children:"Post Comment"})})]})]}),e.jsx(ve,{}),e.jsx("div",{className:"space-y-4 pt-2",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(Y,{src:"/placeholder.svg?height=40&width=40",alt:"User avatar",width:40,height:40,className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Alex Johnson"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"2 days ago"})]}),e.jsx("p",{className:"mt-1 text-sm",children:"I'm finding the distinction between front-end and back-end really helpful. Are there any recommended resources for learning more about back-end development?"}),e.jsx("div",{className:"mt-2 flex gap-4",children:e.jsxs(m,{variant:"ghost",size:"sm",className:"h-8 px-2",children:[e.jsx("svg",{className:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905a3.61 3.61 0 01-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),"Like (12)"]})})]})]})})]})}),e.jsx(A,{value:"notes",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:"My Notes for This Lesson"}),e.jsxs(m,{variant:"outline",size:"sm",children:[e.jsx(Ve,{className:"mr-1 h-4 w-4"}),"Add Note"]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"font-medium",children:"Front-end vs Back-end"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Added 2 days ago"})]}),e.jsx("p",{className:"mt-2 text-sm",children:"Front-end: HTML, CSS, JavaScript - what users see and interact with. Back-end: Server-side languages, databases - powers the front-end. Remember to look into Node.js for JavaScript back-end development."})]})]})})]})})}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[c>1&&e.jsxs(m,{variant:"outline",onClick:()=>w(c-1),children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Previous Lesson"]}),c===r.length?B?e.jsx("a",{onClick:t=>ne(t),children:e.jsxs(m,{children:["Take Quiz",e.jsx(Z,{className:"ml-2 h-4 w-4"})]})}):e.jsx("a",{href:"/course",children:e.jsx(m,{children:"Return To Courses"})}):e.jsxs(m,{onClick:()=>{P()},className:`flex gap-2 ${i.user.language==="ar"&&"flex-row-reverse"}`,children:[i.user.language==="ar"?"الدرس التالي":"Next Lesson",e.jsx(Z,{className:"h-4 w-4"})]})]})]}),(o==null?void 0:o.length)>0&&e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(L,{children:[e.jsx(U,{className:"py-3",children:e.jsx(W,{className:"text-lg",children:"Attachments"})}),e.jsx(T,{children:e.jsx("div",{className:"space-y-3",children:o==null?void 0:o.map((t,a)=>e.jsxs("div",{className:"hover:bg-muted/50 flex items-center justify-between rounded-md border p-2 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary/10 mr-3 flex h-8 w-8 items-center justify-center rounded",children:e.jsx(G,{className:"text-primary h-4 w-4"})}),e.jsx("div",{children:e.jsx("div",{className:"text-sm font-medium",children:e.jsx(je,{text:t==null?void 0:t.title,length:8})})})]}),e.jsx("a",{href:`/storage/${t.url}`,target:"_blank",download:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Download"]})})]},a))})})]})})]})]})]})};export{hs as default};
