import{r as t,m as O,j as e,$ as w,S as _,K as z,L as J}from"./app-BQJo8KWI.js";import{D as V,a as Y,b as q,c as D,A as Q}from"./app-layout-BYFZV0cl.js";import{E as W}from"./edit-course-modal-bqTH5OX4.js";import{E as X,A as Z,a as ee,b as se,c as ae,d as re,e as le,f as te,g as ie}from"./alert-dialog-Bqlbk0QJ.js";import{B as P}from"./badge-DRpx7C5Y.js";import{B as y}from"./button-CXZ9KNic.js";import{C as ne,a as oe,d as de,e as ce}from"./card-Bx8o_yOY.js";import{T as H}from"./TruncateText-BqXi7VES.js";import{E as me}from"./eye-DowYATHd.js";import{S as ue}from"./square-pen-BdOcl-4v.js";import{T as pe}from"./trash-2-CU_5O03C.js";import{D as he,a as xe,b as fe,c as ge,e as je,d as be}from"./dialog-DSLPv4zs.js";import{I as v}from"./input-hkeF4yTh.js";import{L as f}from"./label-omjpmp1s.js";import{T as ve,a as Ce,b as T,c as F}from"./tabs-DdzKjpXk.js";import{a as $,$ as Ne,b as ye}from"./disabled-Crq_Pot6.js";import{K as k,n as B,L as A,o as we,_ as De}from"./render-DjcOG0El.js";import{y as G}from"./use-sync-refs-CgJYBCcd.js";import{I as Te}from"./image-Axw5bqMw.js";import{P as Fe}from"./plus-CJX66saj.js";import"./index-HfmPAlVu.js";import"./index-DK41LuF8.js";import"./index-Dq-AqB3F.js";import"./index-BFpf-iuu.js";import"./book-open-BuM-h4bS.js";import"./textarea-Co6FdU2x.js";function Ee({course:s}){const[r,a]=t.useState(!1),{delete:i}=O(),[l,p]=t.useState(!1);return e.jsxs("div",{children:[e.jsxs(ne,{className:"gap-3 overflow-hidden transition-all hover:shadow-md p-0",children:[e.jsx(w,{href:`/admin/courses/${s.id}`,children:e.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[e.jsx("img",{src:s.image,alt:s.name.en,className:"object-cover transition-transform hover:scale-105"}),!s.published&&e.jsx(P,{variant:"secondary",className:"absolute top-2 right-2",children:"Draft"}),e.jsxs(P,{className:"absolute top-2 left-2",children:[" ",e.jsx(H,{text:s.label.en,length:10}),"  "]})]})}),e.jsx(oe,{className:"px-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(w,{href:`/admin/courses/${s.id}`,className:"hover:underline",children:e.jsxs("h3",{className:"line-clamp-1 text-lg font-semibold",children:[e.jsx(H,{text:s.name.en,length:19})," "]})}),e.jsxs(V,{children:[e.jsx(Y,{asChild:!0,children:e.jsxs(y,{variant:"ghost",size:"icon",className:"h-8 w-8",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(q,{align:"end",children:[e.jsxs(D,{onClick:()=>_.visit(`/admin/courses/${s.id}`),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"View"]}),e.jsxs(D,{onClick:()=>p(!0),children:[e.jsx(ue,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(D,{className:"text-destructive focus:text-destructive",onClick:()=>a(!0),children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}),e.jsx(de,{className:"px-4 pt-0",children:e.jsx("p",{className:"text-muted-foreground line-clamp-2 text-sm",children:s.description.en})}),e.jsx(ce,{className:"flex justify-between p-4 pt-0",children:e.jsx(y,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(w,{href:`/admin/courses/${s.id}`,children:"Manage"})})})]}),e.jsx(Z,{open:r,onOpenChange:a,children:e.jsxs(ee,{children:[e.jsxs(se,{children:[e.jsx(ae,{children:"Are you sure you want to delete this course?"}),e.jsx(re,{children:"This action cannot be undone. This will permanently delete the course and all its chapters and content."})]}),e.jsxs(le,{children:[e.jsx(te,{children:"Cancel"}),e.jsx(ie,{onClick:()=>{i(route("course.destroy",s.id))},className:"bg-destructive text-white hover:bg-destructive/90",children:"Delete"})]})]})}),e.jsx(W,{course:s,open:l,onOpenChange:p})]})}let $e=t.createContext(void 0);function U(){return t.useContext($e)}let L=t.createContext(null);L.displayName="DescriptionContext";function K(){let s=t.useContext(L);if(s===null){let r=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,K),r}return s}function ke(){var s,r;return(r=(s=t.useContext(L))==null?void 0:s.value)!=null?r:void 0}let Ae="p";function Le(s,r){let a=t.useId(),i=$(),{id:l=`headlessui-description-${a}`,...p}=s,o=K(),d=G(r);B(()=>o.register(l),[l,o.register]);let m=i||!1,n=t.useMemo(()=>({...o.slot,disabled:m}),[o.slot,m]),g={ref:d,...o.props,id:l};return A()({ourProps:g,theirProps:p,slot:n,defaultTag:Ae,name:o.name||"Description"})}let Se=k(Le);Object.assign(Se,{});let S=t.createContext(null);S.displayName="LabelContext";function R(){let s=t.useContext(S);if(s===null){let r=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,R),r}return s}function Me(s){var r,a,i;let l=(a=(r=t.useContext(S))==null?void 0:r.value)!=null?a:void 0;return((i=void 0)!=null?i:0)>0?[l,...s].filter(Boolean).join(" "):l}let Ie="label";function Pe(s,r){var a;let i=t.useId(),l=R(),p=U(),o=$(),{id:d=`headlessui-label-${i}`,htmlFor:m=p??((a=l.props)==null?void 0:a.htmlFor),passive:n=!1,...g}=s,C=G(r);B(()=>l.register(d),[d,l.register]);let h=we(b=>{let N=b.currentTarget;if(N instanceof HTMLLabelElement&&b.preventDefault(),l.props&&"onClick"in l.props&&typeof l.props.onClick=="function"&&l.props.onClick(b),N instanceof HTMLLabelElement){let x=document.getElementById(N.htmlFor);if(x){let M=x.getAttribute("disabled");if(M==="true"||M==="")return;let I=x.getAttribute("aria-disabled");if(I==="true"||I==="")return;(x instanceof HTMLInputElement&&(x.type==="radio"||x.type==="checkbox")||x.role==="radio"||x.role==="checkbox"||x.role==="switch")&&x.click(),x.focus({preventScroll:!0})}}}),u=o||!1,j=t.useMemo(()=>({...l.slot,disabled:u}),[l.slot,u]),c={ref:C,...l.props,id:d,htmlFor:m,onClick:h};return n&&("onClick"in c&&(delete c.htmlFor,delete c.onClick),"onClick"in g&&delete g.onClick),A()({ourProps:c,theirProps:g,slot:j,defaultTag:m?Ie:"div",name:l.name||"Label"})}let He=k(Pe);Object.assign(He,{});let Oe="textarea";function Be(s,r){let a=t.useId(),i=U(),l=$(),{id:p=i||`headlessui-textarea-${a}`,disabled:o=l||!1,autoFocus:d=!1,invalid:m=!1,...n}=s,g=Me(),C=ke(),{isFocused:h,focusProps:u}=Ne({autoFocus:d}),{isHovered:j,hoverProps:c}=ye({isDisabled:o}),b=De({ref:r,id:p,"aria-labelledby":g,"aria-describedby":C,"aria-invalid":m?"":void 0,disabled:o||void 0,autoFocus:d},u,c),N=t.useMemo(()=>({disabled:o,invalid:m,hover:j,focus:h,autofocus:d}),[o,m,j,h,d]);return A()({ourProps:b,theirProps:n,slot:N,defaultTag:Oe,name:"Textarea"})}let E=k(Be);function Ge({open:s,onOpenChange:r}){const{data:a,setData:i,post:l}=O({name:{en:"",fr:"",ar:""},label:{en:"",fr:"",ar:""},description:{en:"",fr:"",ar:""},published:!1,image:null}),[p,o]=t.useState("en"),[d,m]=t.useState(null),n=h=>{const[u,j]=h.target.name.split("."),c=h.target.value;u=="published"?i("published",!a.published):i(b=>({...b,[u]:{...b[u],[j]:c}}))},g=h=>{var j;const u=(j=h.target.files)==null?void 0:j[0];if(u){i("image",u);const c=new FileReader;c.onloadend=()=>{c.result&&m(c.result)},c.readAsDataURL(u)}},C=h=>{h.preventDefault(),l(route("course.store"),{data:a,onFinish:()=>{i({name:{en:"",fr:"",ar:""},label:{en:"",fr:"",ar:""},description:{en:"",fr:"",ar:""},published:!1,image:null}),r(!1),m(null)}})};return e.jsx(he,{open:s,onOpenChange:r,children:e.jsxs(xe,{className:"h-[90%] overflow-y-auto sm:max-w-[425px]",children:[e.jsxs(fe,{children:[e.jsx(ge,{children:"Create New Course"}),e.jsx(je,{children:"Enter a name, description, tagline, and upload an image to create a new course."})]}),e.jsxs(ve,{value:p,onValueChange:o,className:"space-y-4",children:[e.jsxs(Ce,{className:"grid w-full grid-cols-3",children:[e.jsx(T,{value:"en",children:"English"}),e.jsx(T,{value:"fr",children:"Français"}),e.jsx(T,{value:"ar",children:"العربية "})]}),e.jsx(F,{value:"en",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"name.en",children:"Course Name"}),e.jsx(v,{id:"name.en",name:"name.en",placeholder:"Enter Course name",value:a.name.en,onChange:n,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"label.en",children:"Label"}),e.jsx(v,{id:"label.en",name:"label.en",placeholder:"Enter Course Label",value:a.label.en,onChange:n,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-",children:[e.jsx(f,{htmlFor:"description.en",children:"Description"}),e.jsx(E,{id:"description.en",name:"description.en",placeholder:"Enter Course description",value:a.description.en,onChange:n,className:"mt-3 w-full rounded-lg border p-3"})]})]})}),e.jsx(F,{value:"fr",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"name.fr",children:"Nom du cours"}),e.jsx(v,{id:"name.fr",name:"name.fr",placeholder:"Saisir le nom du cours",value:a.name.fr,onChange:n,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"label.fr",children:"Libellé"}),e.jsx(v,{id:"label.fr",name:"label.fr",placeholder:"Saisir le libellé du cours",value:a.label.fr,onChange:n,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-",children:[e.jsx(f,{htmlFor:"description.fr",children:"Description"}),e.jsx(E,{id:"description.fr",name:"description.fr",placeholder:"Saisir la description du cours",value:a.description.fr,onChange:n,className:"mt-3 w-full rounded-lg border p-3"})]})]})}),e.jsx(F,{value:"ar",className:"grid-cols- grid gap-4 space-y-4",children:e.jsxs("div",{dir:"rtl",className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"name.ar",children:"اسم الدورة"}),e.jsx(v,{id:"name.ar",name:"name.ar",placeholder:"أدخل اسم الدورة",value:a.name.ar,onChange:n,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"label.ar",children:"التصنيف"}),e.jsx(v,{id:"label.ar",name:"label.ar",placeholder:"أدخل تصنيف الدورة",value:a.label.ar,onChange:n,className:"mt-3"})]}),e.jsxs("div",{className:"space-y-",children:[e.jsx(f,{htmlFor:"description.ar",children:"الوصف"}),e.jsx(E,{id:"description.ar",name:"description.ar",placeholder:"أدخل وصف الدورة",value:a.description.ar,onChange:n,className:"mt-3 w-full rounded-lg border p-3"})]})]})})]}),e.jsxs("div",{className:"flex items-center space-x-2 pb-2",children:[e.jsx("input",{type:"checkbox",id:"published",name:"published",className:"text-primary focus:ring-primary h-4 w-4 rounded border-gray-300",checked:a.published,onChange:n}),e.jsx(f,{htmlFor:"auto-award",children:"Publish this course"})]}),e.jsx("div",{className:"border-muted space-y- relative flex flex-col items-center gap-y-2 rounded-lg border-2 border-dashed p-3",children:d?e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:d,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"})}):e.jsxs(e.Fragment,{children:[e.jsx("input",{id:"image-upload",name:"image",type:"file",accept:"image/*",className:"absolute top-0 h-full w-full opacity-0",onChange:g}),e.jsx(f,{htmlFor:"image-upload",children:"Course Image"}),e.jsx("div",{className:"text-muted-foreground mb-4",children:e.jsx(Te,{className:"h-12 w-12"})}),e.jsxs("div",{className:"text-muted-foreground flex text-sm",children:[e.jsx("label",{htmlFor:"image-upload",className:"text-primary focus-within:ring-primary relative cursor-pointer rounded-md font-medium focus-within:ring-2 focus-within:outline-none",children:e.jsx("span",{children:"Upload an image"})}),e.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),e.jsx("p",{className:"text-muted-foreground mt-2 text-xs",children:"PNG, JPG, GIF up to 3MB"})]})}),e.jsxs(be,{children:[e.jsx(y,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsx(y,{onClick:C,children:"Create Course"})]})]})})}const ps=()=>{const[s,r]=t.useState(!1),{courses:a}=z().props;return e.jsxs(Q,{children:[e.jsx(J,{title:"Courses"}),e.jsxs("div",{className:"space-y-6 p-3 lg:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Courses"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage your courses"})]}),e.jsxs(y,{onClick:()=>r(!0),children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Create Course"]})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(i=>e.jsx(Ee,{course:i},i.id))})]}),e.jsx(Ge,{open:s,onOpenChange:r})]})};export{ps as default};
