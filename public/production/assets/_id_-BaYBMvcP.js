import{j as e,K as k,r as p,m as ee,L as se,$ as te,S as ae}from"./app-B6UCuMfb.js";import{T as re}from"./TransText-DM9kxfeu.js";import{B as g}from"./badge-DRW9damy.js";import{c as ne,B as c}from"./button-BcujM6ML.js";import{C as y,a as I,b as F,d as w}from"./card-C2Tf5paB.js";import{P as ie}from"./progress-U9TIf1gS.js";import{S as le}from"./scroll-area-BnHExB4z.js";import{S as ce}from"./separator-Cn8_psEn.js";import{T as de,a as oe,b as me,c as C}from"./tabs-CNMJUKTU.js";import{d as xe,A as he}from"./app-layout-CkGG04rN.js";import{B as pe,L as ue,P as je,C as fe,a as Ne,b as ve,c as ge,p as ye,d as we,e as Ce,A as be,f as Se,g as Le}from"./index-DGD8k08_.js";import{T as Te}from"./TruncateText-BLQ3YxTp.js";import{C as Q}from"./chevron-left-B_PBozw3.js";import{C as Ae}from"./clock-Dz292Wny.js";import{B as Be}from"./book-open-Ctr72cf3.js";import{C as Pe}from"./circle-check-big-BT6HGpn3.js";import{F as R}from"./file-text-DaGTqfWD.js";import{D as V}from"./download-DcfqGnwy.js";import{I as H}from"./image-BFSfR6nD.js";import{C as J}from"./sidebar-DaU0Uv7R.js";import"./index-D2_VD1ku.js";import"./index-DuDPoHyt.js";import"./index-BdQq_4o_.js";import"./index-BhHF2WI2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ze=ne("CirclePlus",_e),De=()=>e.jsx("div",{className:"animate-bounce",children:e.jsx(xe,{})});fe.register(Ne,ve,ge,ye,we,Ce,be,Se,Le);const ns=()=>{var B;const{course:j,chapters:r,auth:o,quizId:b}=k().props,[f,S]=p.useState((B=r[0])==null?void 0:B.id),{setData:q,post:O,processing:U}=ee({user_id:o==null?void 0:o.user.id,chapter_id:null}),[i,N]=p.useState(1),[L,W]=p.useState(0),[v,K]=p.useState([]);p.useEffect(()=>{const t=[];r==null||r.forEach(a=>{var n;(n=a.content)==null||n.forEach(m=>{var d;(d=m.blocks)==null||d.forEach(s=>{if(s.type==="document"){console.log("document block",s);const x=s.content;t.push(x)}})})}),K(t)},[]);const T=t=>{W(t/r.length*100)},G=[{title:j.name,href:`/course/${j.id}`}];p.useEffect(()=>{var t;f!==null&&q("chapter_id",(t=r[i-1])==null?void 0:t.id)},[f]);const A=()=>{O(route("chapter.read")),N(i+1),T(i),S(f+1)},X=t=>{t.preventDefault(),A(),ae.visit("/quiz/"+b)};function Y(t){var d,s;const a=t.content,n={labels:(d=a.data)==null?void 0:d.map(x=>x.name),datasets:[{label:"Dataset",data:(s=a.data)==null?void 0:s.map(x=>x.value),backgroundColor:a.type==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},m={responsive:!0,plugins:{title:{display:!0,text:a.title||"Chart Preview"}}};return e.jsx("div",{className:"bg- rounded-md",children:e.jsx("div",{className:"h-full w-full",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"",children:[t.content.type==="bar"&&e.jsx(pe,{data:n,options:m}),t.content.type==="line"&&e.jsx(ue,{data:n,options:m}),t.content.type==="pie"&&e.jsx(je,{data:n,options:m})]})})})})}function Z(t){const a=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,n=t.match(a);return n&&n[1]}return e.jsxs(he,{breadcrumbs:G,children:[e.jsx(se,{title:j.name}),e.jsxs("div",{className:"mb-6 p-6",children:[e.jsxs(te,{href:"/course",className:"text-muted-foreground hover:text-foreground inline-flex items-center text-sm transition-colors",children:[e.jsx(Q,{className:"mr- h-4 w-4"}),"Back to Courses"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:j.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(g,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(Ae,{className:"mr-1 h-3 w-3"}),r.reduce((t,a)=>t+a.estimated_duration,0)," Minutes total"]}),e.jsxs(g,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(Be,{className:"mr-1 h-3 w-3"}),r.length," lessons"]})]})]}),e.jsx(ie,{value:L,className:"mt-4 h-2"}),e.jsxs("div",{className:"text-muted-foreground mt-1 flex justify-between text-xs",children:[e.jsxs("span",{children:[Math.round(L),"% completed"]}),e.jsxs("span",{children:[i," of ",r.length," lessons completed"]})]})]}),e.jsxs("div",{dir:o.user.language==="ar"?"rtl":"ltr",className:"grid grid-cols-1 gap-6 p-6 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(y,{children:[e.jsx(I,{className:"py-3",children:e.jsx(F,{className:"text-lg",children:"Course Content"})}),e.jsx(w,{className:"p-0",children:e.jsx(le,{className:"h-[calc(100vh-300px)]",children:e.jsx("div",{className:"space-y-1 pl-2",children:r==null?void 0:r.map((t,a)=>e.jsxs("div",{onClick:()=>{N(a+1),T(a+1),S(t.id)},className:`flex cursor-pointer items-center justify-between rounded-md px-2 py-1.5 text-sm transition-colors ${a+1===i?"bg-primary/80 text-primary-foreground":"hover:bg-muted"}`,children:[e.jsxs("div",{className:"flex items-center",children:[t.users.some(n=>n.id===o.user.id)?e.jsx("div",{className:"bg-primary mr-2 flex h-4 w-4 items-center justify-center rounded-full text-[10px] text-white",children:"✓"}):e.jsx("div",{className:"border-input mr-2 flex h-4 w-4 items-center justify-center rounded-full border text-[10px]"}),e.jsx("span",{className:a+1===i?"":"text-muted-foreground",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.hasQuiz&&e.jsx(g,{variant:"outline",className:"h-5 px-1 text-[10px]",children:"Quiz"}),e.jsx("span",{className:a+1===i?"":"text-muted-foreground text-xs",children:t.estimated_duration})]})]},a))})})})]})}),U?e.jsx("div",{className:"flex items-center justify-center lg:col-span-6",children:e.jsx(De,{})}):e.jsxs("div",{className:"lg:col-span-6",children:[e.jsx(y,{className:"overflow-hidden",children:e.jsx(w,{className:"p-6",children:e.jsxs(de,{defaultValue:"content",children:[e.jsx(oe,{className:"mb-4",children:e.jsxs(me,{value:"content",children:[e.jsx(re,{en:"Lesson Content",fr:"Contenu",ar:"محتوى "})," "]})}),e.jsxs(C,{value:"content",className:"space-y-4",children:[e.jsx("div",{dir:o.user.language==="ar"?"rtl":"ltr",className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-medium",children:[r[0].title," "]})}),e.jsx("div",{dir:o.user.language==="ar"?"rtl":"ltr",className:"prose max-w-none",children:r.flatMap((t,a)=>t.content.flatMap((n,m)=>{var d;return(d=n.blocks)==null?void 0:d.map((s,x)=>{var P,_,z,D,E;return a+1===i&&e.jsxs("div",{className:"rounded-md p-4",children:[s.content.title&&e.jsx("h3",{className:"mb-2 font-medium",children:s.content.title}),s.type==="text"&&s.content.body&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:s.content.body})}),s.type==="image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("img",{src:`/storage/${s.content.url}`,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="video"&&s.content.url&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("iframe",{width:"866",height:"487",src:`https://www.youtube.com/embed/${Z(s.content.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="list"&&e.jsx("div",{children:s.content.type==="bullet"?e.jsx("ul",{className:"list-disc space-y-1 pl-5",children:(P=s.content.items||["Sample item"])==null?void 0:P.map((h,l)=>e.jsx("li",{children:h},l))}):s.content.type==="numbered"?e.jsx("ol",{className:"list-decimal space-y-1 pl-5",children:(_=s.content.items||["Sample item"])==null?void 0:_.map((h,l)=>e.jsx("li",{children:h},l))}):e.jsx("div",{className:"space-y-2",children:(z=s.content.items||["Sample item"])==null?void 0:z.map((h,l)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pe,{className:"text-primary mr-2 h-4 w-4"}),e.jsx("span",{children:h})]},l))})}),s.type==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:(D=Array.from({length:s.content.cols||3}))==null?void 0:D.map((h,l)=>{var u;return e.jsx("th",{className:"border p-2 text-left",children:(u=s.content)==null?void 0:u.data[0][l]},l)})})}),e.jsx("tbody",{children:(E=Array.from({length:s.content.rows-1||3}))==null?void 0:E.map((h,l)=>{var u;return e.jsx("tr",{children:(u=Array.from({length:s.content.cols||3}))==null?void 0:u.map((Ee,$)=>{var M;return e.jsx("td",{className:"border p-2",children:(M=s.content)==null?void 0:M.data[l+1][$]},$)})},l)})})]})}),s.type==="chart"&&Y(s),s.type==="document"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs("div",{className:"bg-muted/30 flex items-center justify-between border-b p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("div",{className:"font-medium",children:e.jsx("span",{children:s.content.title||"PDF Document"})})]}),e.jsx("a",{href:`/storage/${s.content.url}`,target:"_blank",download:!0,children:e.jsxs(c,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Download"]})})]})}),s.content.description&&e.jsx("p",{className:"text-muted-foreground text-sm",children:s.content.description})]})]},`${a}-${m}-${x}`)})}))})]}),e.jsx(C,{value:"discussion",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4",children:[e.jsx(H,{src:"/placeholder.svg?height=40&width=40",alt:"User avatar",width:40,height:40,className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{className:"w-full rounded-md border p-2 text-sm",rows:3,placeholder:"Add to the discussion..."}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx(c,{size:"sm",children:"Post Comment"})})]})]}),e.jsx(ce,{}),e.jsx("div",{className:"space-y-4 pt-2",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(H,{src:"/placeholder.svg?height=40&width=40",alt:"User avatar",width:40,height:40,className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Alex Johnson"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"2 days ago"})]}),e.jsx("p",{className:"mt-1 text-sm",children:"I'm finding the distinction between front-end and back-end really helpful. Are there any recommended resources for learning more about back-end development?"}),e.jsx("div",{className:"mt-2 flex gap-4",children:e.jsxs(c,{variant:"ghost",size:"sm",className:"h-8 px-2",children:[e.jsx("svg",{className:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905a3.61 3.61 0 01-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),"Like (12)"]})})]})]})})]})}),e.jsx(C,{value:"notes",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:"My Notes for This Lesson"}),e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(ze,{className:"mr-1 h-4 w-4"}),"Add Note"]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"font-medium",children:"Front-end vs Back-end"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Added 2 days ago"})]}),e.jsx("p",{className:"mt-2 text-sm",children:"Front-end: HTML, CSS, JavaScript - what users see and interact with. Back-end: Server-side languages, databases - powers the front-end. Remember to look into Node.js for JavaScript back-end development."})]})]})})]})})}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[i>1&&e.jsxs(c,{variant:"outline",onClick:()=>N(i-1),children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Previous Lesson"]}),i===r.length?b?e.jsx("a",{onClick:t=>X(t),children:e.jsxs(c,{children:["Take Quiz",e.jsx(J,{className:"ml-2 h-4 w-4"})]})}):e.jsx("a",{href:"/course",children:e.jsx(c,{children:"Return To Courses"})}):e.jsxs(c,{onClick:()=>{A()},children:["Next",e.jsx(J,{className:"ml-2 h-4 w-4"})]})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(y,{children:[e.jsx(I,{className:"py-3",children:e.jsx(F,{className:"text-lg",children:"Attachments"})}),e.jsx(w,{children:e.jsx("div",{className:"space-y-3",children:v==null?void 0:v.map((t,a)=>e.jsxs("div",{className:"hover:bg-muted/50 flex items-center justify-between rounded-md border p-2 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary/10 mr-3 flex h-8 w-8 items-center justify-center rounded",children:e.jsx(R,{className:"text-primary h-4 w-4"})}),e.jsx("div",{children:e.jsx("div",{className:"text-sm font-medium",children:e.jsx(Te,{text:t.title,length:8})})})]}),e.jsx("a",{href:`/storage/${t.url}`,target:"_blank",download:!0,children:e.jsxs(c,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Download"]})})]},a))})})]})})]})]})};export{ns as default};
