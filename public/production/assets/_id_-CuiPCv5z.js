import{j as e,K as Z,r as p,m as k,L as ee,$ as se,S as te}from"./app-xf9yeTlC.js";import{T as ae}from"./TransText-D9vtIHMG.js";import{T as re}from"./TruncateText-1Fck8HPx.js";import{B as y}from"./badge-o1S1mkJJ.js";import{c as ne,B as d}from"./button-CPLmO1_U.js";import{C as w,a as F,b as I,d as C}from"./card-DN6yydil.js";import{P as ie}from"./progress-Nq7H2_jX.js";import{S as le}from"./scroll-area-BF9dcRRQ.js";import{S as ce}from"./separator-N4D7O9Ra.js";import{T as de,a as oe,b as me,c as b}from"./tabs-CNiDq2oj.js";import{d as xe,A as he}from"./app-layout-Cibb0jVw.js";import{B as ue,L as pe,P as je,C as fe,a as ge,b as Ne,c as ve,p as ye,d as we,e as Ce,A as be,f as Se,g as Le}from"./index-DLOM2X3D.js";import{C as M}from"./chevron-left-BT2f1wTk.js";import{C as Te}from"./clock-DH8471Fx.js";import{B as Ae}from"./book-open-CC4_7Ik2.js";import{C as Be}from"./circle-check-big-CWJF0_PM.js";import{F as q}from"./file-text-D0E1v_0u.js";import{D as Q}from"./download-BcWAzPyA.js";import{I as R}from"./image-1vYEHfYg.js";import{C as V}from"./sidebar-B00BNUTU.js";import"./index-Dd3sNqx2.js";import"./index-CKGoxREz.js";import"./index-BdQq_4o_.js";import"./index-BiS866L-.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],Pe=ne("CirclePlus",_e),$e=()=>e.jsx("div",{className:"animate-bounce flex items-center mx-auto justify-center",children:e.jsx(xe,{className:"w-52"})});fe.register(ge,Ne,ve,ye,we,Ce,be,Se,Le);const rs=()=>{var A;const{course:f,chapters:r,auth:i,quizId:S}=Z().props,[g,L]=p.useState((A=r[0])==null?void 0:A.id),{setData:H,post:J,processing:O}=k({user_id:i==null?void 0:i.user.id,chapter_id:null}),[c,N]=p.useState(1),[v,U]=p.useState(0),[m,W]=p.useState([]);p.useEffect(()=>{const t=[];r==null||r.forEach(a=>{var n;(n=a.content)==null||n.forEach(x=>{var o;(o=x.blocks)==null||o.forEach(s=>{if(s.type==="document"){console.log("document block",s);const h=s.content;t.push(h)}})})}),W(t)},[]);const K=[{title:f.name,href:`/course/${f.id}`}];p.useEffect(()=>{var t;g!==null&&H("chapter_id",(t=r[c-1])==null?void 0:t.id),U(r.filter(a=>a.users.some(n=>n.id===i.user.id)).length/r.length*100)},[g,r]);const T=()=>{J(route("chapter.read")),N(c+1),L(g+1)},G=t=>{t.preventDefault(),T(),te.visit("/quiz/"+S)};function X(t){var o,s;const a=t.content,n={labels:(o=a.data)==null?void 0:o.map(h=>h.name),datasets:[{label:"Dataset",data:(s=a.data)==null?void 0:s.map(h=>h.value),backgroundColor:a.type==="pie"?"rgba(75, 192, 192, 0.2)":"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},x={responsive:!0,plugins:{title:{display:!0,text:a.title||"Chart Preview"}}};return e.jsx("div",{className:"bg- rounded-md",children:e.jsx("div",{className:"h-full w-full",children:e.jsx("div",{className:"flex h-full items-center justify-center",children:e.jsxs("div",{className:"",children:[t.content.type==="bar"&&e.jsx(ue,{data:n,options:x}),t.content.type==="line"&&e.jsx(pe,{data:n,options:x}),t.content.type==="pie"&&e.jsx(je,{data:n,options:x})]})})})})}function Y(t){const a=/(?:https?:\/\/(?:www\.)?youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=))([^"&?/]+)/,n=t.match(a);return n&&n[1]}return console.log("%%%%",r.filter(t=>t.users.some(a=>a.id===i.user.id)).length),e.jsxs(he,{breadcrumbs:K,children:[e.jsx(ee,{title:f.name}),O?e.jsx("div",{className:"  w-full h-[80vh] flex justify-center items-center ",children:e.jsx($e,{})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 p-6",children:[e.jsxs(se,{href:"/course",className:"text-muted-foreground hover:text-foreground inline-flex items-center text-sm transition-colors",children:[e.jsx(M,{className:"mr- h-4 w-4"}),"Back to Courses"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-between gap-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:f.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(Te,{className:"mr-1 h-3 w-3"}),r.reduce((t,a)=>t+Number(a.estimated_duration),0)," Minutes total"]}),e.jsxs(y,{variant:"outline",className:"px-2 py-0 text-xs font-normal",children:[e.jsx(Ae,{className:"mr-1 h-3 w-3"}),r.length," lessons"]})]})]}),e.jsx(ie,{value:v,className:"mt-4 h-2"}),e.jsxs("div",{className:"text-muted-foreground mt-1 flex justify-between text-xs",children:[e.jsxs("span",{children:[v.toFixed(2)," % completed"]}),e.jsxs("span",{children:[v/100*r.length," of ",r.length," lessons completed"]})]})]}),e.jsxs("div",{dir:i.user.language==="ar"?"rtl":"ltr",className:`grid grid-cols-1 gap-6 p-6 ${m.length>0?"lg:grid-cols-12":"lg:grid-cols-10"} `,children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(w,{children:[e.jsx(F,{className:"py-3",children:e.jsx(I,{className:"text-lg",children:"Course Content"})}),e.jsx(C,{className:"p-0",children:e.jsx(le,{className:"h-[calc(100vh-300px)]",children:e.jsx("div",{className:"space-y-1 p-2",children:r==null?void 0:r.map((t,a)=>e.jsxs("div",{onClick:()=>{N(a+1),L(t.id)},className:`flex cursor-pointer items-center justify-between rounded-md px-2 py-1.5 text-sm transition-colors ${a+1===c?"bg-primary/80 text-primary-foreground":"hover:bg-muted"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.users.some(n=>n.id===i.user.id)?e.jsx("div",{className:"bg-primary mr-2 flex aspect-square w-4 items-center justify-center rounded-full text-[10px] text-white",children:"✓"}):e.jsx("div",{className:"border-input mr-2 flex aspect-square w-4 items-center justify-center rounded-full border text-[10px]"}),e.jsx("span",{className:`w-[80%] ${a+1===c?"":"text-muted-foreground"}`,children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.hasQuiz&&e.jsx(y,{variant:"outline",className:"h-5 px-1 text-[10px]",children:"Quiz"}),e.jsx("span",{className:a+1===c?"":"text-muted-foreground text-xs",children:t.estimated_duration})]})]},a))})})})]})}),e.jsxs("div",{className:"lg:col-span-6",children:[e.jsx(w,{className:"overflow-hidden",children:e.jsx(C,{className:"p-6",children:e.jsxs(de,{defaultValue:"content",children:[e.jsx(oe,{className:"mb-4",children:e.jsxs(me,{value:"content",children:[e.jsx(ae,{en:"Lesson Content",fr:"Contenu",ar:"محتوى "})," "]})}),e.jsxs(b,{value:"content",className:"space-y-4",children:[e.jsx("div",{dir:i.user.language==="ar"?"rtl":"ltr",className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-xl font-medium",children:[r[0].title," "]})}),e.jsx("div",{dir:i.user.language==="ar"?"rtl":"ltr",className:"prose max-w-none",children:r.flatMap((t,a)=>t.content.flatMap((n,x)=>{var o;return(o=n.blocks)==null?void 0:o.map((s,h)=>{var B,_,P,$,z;return a+1===c&&e.jsxs("div",{className:"rounded-md p-4",children:[s.content.title&&e.jsx("h3",{className:"mb-2 font-medium",children:s.content.title}),s.type==="text"&&s.content.body&&e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{children:s.content.body})}),s.type==="image"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("img",{src:`/storage/${s.content.url}`,alt:"Course cover preview",className:"h-auto w-full rounded-md object-cover"})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="video"&&s.content.url&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"bg-muted flex aspect-video items-center justify-center rounded-md",children:e.jsx("iframe",{width:"866",height:"487",src:`https://www.youtube.com/embed/${Y(s.content.url)}`,title:"Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}),s.content.caption&&e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:s.content.caption})]}),s.type==="list"&&e.jsx("div",{children:s.content.type==="bullet"?e.jsx("ul",{className:"list-disc space-y-1 pl-5",children:(B=s.content.items||["Sample item"])==null?void 0:B.map((u,l)=>e.jsx("li",{children:u},l))}):s.content.type==="numbered"?e.jsx("ol",{className:"list-decimal space-y-1 pl-5",children:(_=s.content.items||["Sample item"])==null?void 0:_.map((u,l)=>e.jsx("li",{children:u},l))}):e.jsx("div",{className:"space-y-2",children:(P=s.content.items||["Sample item"])==null?void 0:P.map((u,l)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(Be,{className:"text-primary mr-2 h-4 w-4"}),e.jsx("span",{children:u})]},l))})}),s.type==="table"&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsx("tr",{className:"bg-muted",children:($=Array.from({length:s.content.cols||3}))==null?void 0:$.map((u,l)=>{var j;return e.jsx("th",{className:"border p-2 text-left",children:(j=s.content)==null?void 0:j.data[0][l]},l)})})}),e.jsx("tbody",{children:(z=Array.from({length:s.content.rows-1||3}))==null?void 0:z.map((u,l)=>{var j;return e.jsx("tr",{children:(j=Array.from({length:s.content.cols||3}))==null?void 0:j.map((ze,D)=>{var E;return e.jsx("td",{className:"border p-2",children:(E=s.content)==null?void 0:E.data[l+1][D]},D)})},l)})})]})}),s.type==="chart"&&X(s),s.type==="document"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs("div",{className:"bg-muted/30 flex items-center justify-between border-b p-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"text-primary mr-2 h-5 w-5"}),e.jsx("div",{className:"font-medium",children:e.jsx("span",{children:s.content.title||"PDF Document"})})]}),e.jsx("a",{href:`/storage/${s.content.url}`,target:"_blank",download:!0,children:e.jsxs(d,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),i.user.language==="ar"?"تحميل":"Download"]})})]})}),s.content.description&&e.jsx("p",{className:"text-muted-foreground text-sm",children:s.content.description})]})]},`${a}-${x}-${h}`)})}))})]}),e.jsx(b,{value:"discussion",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 pb-4",children:[e.jsx(R,{src:"/placeholder.svg?height=40&width=40",alt:"User avatar",width:40,height:40,className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{className:"w-full rounded-md border p-2 text-sm",rows:3,placeholder:"Add to the discussion..."}),e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx(d,{size:"sm",children:"Post Comment"})})]})]}),e.jsx(ce,{}),e.jsx("div",{className:"space-y-4 pt-2",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(R,{src:"/placeholder.svg?height=40&width=40",alt:"User avatar",width:40,height:40,className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Alex Johnson"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"2 days ago"})]}),e.jsx("p",{className:"mt-1 text-sm",children:"I'm finding the distinction between front-end and back-end really helpful. Are there any recommended resources for learning more about back-end development?"}),e.jsx("div",{className:"mt-2 flex gap-4",children:e.jsxs(d,{variant:"ghost",size:"sm",className:"h-8 px-2",children:[e.jsx("svg",{className:"mr-1 h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905a3.61 3.61 0 01-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})}),"Like (12)"]})})]})]})})]})}),e.jsx(b,{value:"notes",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:"My Notes for This Lesson"}),e.jsxs(d,{variant:"outline",size:"sm",children:[e.jsx(Pe,{className:"mr-1 h-4 w-4"}),"Add Note"]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-md border p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"font-medium",children:"Front-end vs Back-end"}),e.jsx("div",{className:"text-muted-foreground text-xs",children:"Added 2 days ago"})]}),e.jsx("p",{className:"mt-2 text-sm",children:"Front-end: HTML, CSS, JavaScript - what users see and interact with. Back-end: Server-side languages, databases - powers the front-end. Remember to look into Node.js for JavaScript back-end development."})]})]})})]})})}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[c>1&&e.jsxs(d,{variant:"outline",onClick:()=>N(c-1),children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Previous Lesson"]}),c===r.length?S?e.jsx("a",{onClick:t=>G(t),children:e.jsxs(d,{children:["Take Quiz",e.jsx(V,{className:"ml-2 h-4 w-4"})]})}):e.jsx("a",{href:"/course",children:e.jsx(d,{children:"Return To Courses"})}):e.jsxs(d,{onClick:()=>{T()},className:`flex gap-2 ${i.user.language==="ar"&&"flex-row-reverse"}`,children:[i.user.language==="ar"?"الدرس التالي":"Next Lesson",e.jsx(V,{className:"h-4 w-4"})]})]})]}),(m==null?void 0:m.length)>0&&e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(w,{children:[e.jsx(F,{className:"py-3",children:e.jsx(I,{className:"text-lg",children:"Attachments"})}),e.jsx(C,{children:e.jsx("div",{className:"space-y-3",children:m==null?void 0:m.map((t,a)=>e.jsxs("div",{className:"hover:bg-muted/50 flex items-center justify-between rounded-md border p-2 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary/10 mr-3 flex h-8 w-8 items-center justify-center rounded",children:e.jsx(q,{className:"text-primary h-4 w-4"})}),e.jsx("div",{children:e.jsx("div",{className:"text-sm font-medium",children:e.jsx(re,{text:t.title,length:8})})})]}),e.jsx("a",{href:`/storage/${t.url}`,target:"_blank",download:!0,children:e.jsxs(d,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Download"]})})]},a))})})]})})]})]})]})};export{rs as default};
